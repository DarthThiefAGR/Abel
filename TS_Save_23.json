{
  "SaveName": "canasta_v5.0w",
  "GameMode": "Cards",
  "Gravity": 0.5,
  "PlayArea": 0.5,
  "Date": "5/2/2020 7:06:48 PM",
  "Table": "Table_Custom_Square",
  "TableURL": "http://cloud-3.steamusercontent.com/ugc/1020570631714070622/4D6023DDFC41030B3C3CBD78B4E76EB387ABFFD3/",
  "Sky": "Sky_Downtown",
  "Note": "",
  "Rules": "",
  "XmlUI": "<!-- Xml UI. See documentation: https://api.tabletopsimulator.com/ui/introUI/ -->",
  "LuaScript": "function onLoad()\n\n    -- INCLUDES\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/colocar_cartas\nfunction colocaCartasEnZona_v3(salidaE,zona)\r\n\r\n    nObjetosActual     = salidaE[1]\r\n    tipo_canasta       = salidaE[2]\r\n    activar_colocacion = salidaE[3]\r\n\r\n    local objectsInZone = zona.getObjects()\r\n    local nObjetos      = #objectsInZone\r\n\r\n    local posicionCarta = {}\r\n    local rotacionCarta = {}\r\n    local posicionZonai = zona.getPosition()\r\n    local rotacionZonai = zona.getRotation()\r\n\r\n    -- Parámetros de colocación\r\n    local paramXA = 3.3\r\n    local paramXB = 0.9\r\n    local paramYA = 1.5\r\n    local angA   = 0\r\n    local angB   = 9\r\n\r\n    -- GUID de la zona\r\n    zona_GUID = zona.getGUID()\r\n\r\n    -- Comprobar condicion de jugador y equipo\r\n    cond_E1 = false\r\n    for k = 1,9 do\r\n      zona_canasta_GUID = 'zonaCanastaE1_C0' .. k .. '_GUID'\r\n      cond_E1 = cond_E1 or zona_GUID == _G[zona_canasta_GUID]\r\n    end\r\n    cond_E2 = false\r\n    for k = 1,9 do\r\n      zona_canasta_GUID = 'zonaCanastaE2_C0' .. k .. '_GUID'\r\n      cond_E2 = cond_E2 or zona_GUID == _G[zona_canasta_GUID]\r\n    end\r\n\r\n    cond_jugadorE1 = cond_E1 and ( turno_actual == 'Blue' or turno_actual == 'Yellow' )\r\n    cond_jugadorE2 = cond_E2 and ( turno_actual == 'Red' or turno_actual == 'Green' )\r\n\r\n    -- Si ha variado el número de objetos en el interior de la zona\r\n    -- y el número de cartas es 8 como máximo, ejecutamos el script\r\n\r\n    if (nObjetos ~= nObjetosActual) and (nObjetos <= 8) then\r\n\r\n      -- if activar_colocacion == 0 then\r\n      --   print('No funciona')\r\n      -- end\r\n\r\n      if (cond_jugadorE1 or cond_jugadorE2) then\r\n\r\n        print('')\r\n        print('nObjetosActual = ',nObjetosActual)\r\n        print('tipo_canasta = ',tipo_canasta)\r\n        print('nObjetos = ',nObjetos)\r\n\r\n        if nObjetos < nObjetosActual then\r\n          obj_in_out = 'out'\r\n        else\r\n          obj_in_out = 'in'\r\n        end\r\n\r\n        print('')\r\n        print('obj_in_out = ',obj_in_out)\r\n\r\n        nObjetosActual = nObjetos\r\n\r\n\r\n        error_tipo_obj = false\r\n\r\n        -- Si objeto entra, detectamos cual es (cual no está bloqueado), y si es una carta\r\n        if obj_in_out == 'in' then\r\n\r\n          kk    = 1\r\n          k_new = 0\r\n\r\n          if nObjetos > 0 then\r\n\r\n            obj      = objectsInZone[kk]\r\n            obj_name = obj.name\r\n            if obj_name ~= nil then\r\n              print(obj_name)\r\n              if obj_name == 'Card' or obj_name == 'CardCustom' then\r\n                while k_new == 0 do\r\n                  obj      = objectsInZone[kk]\r\n                  obj_name = obj.name\r\n                  bloq  = obj.getLock()\r\n                  if bloq == false then\r\n                      k_new = kk\r\n                  end\r\n                  kk = kk + 1\r\n                end\r\n              else\r\n                error_tipo_obj = true\r\n              end\r\n            else\r\n              error_tipo_obj = true\r\n            end\r\n\r\n          end\r\n          print('k_new = ',k_new)\r\n        end\r\n        print('error_tipo_obj = ',error_tipo_obj)\r\n\r\n\r\n        -- Una vez sabemos cual es el objeto que acaba de entrar, actuamos:\r\n        bloquear_carta = 'no'\r\n\r\n        -- El objeto introducido en zona no es una carta\r\n        if error_tipo_obj == true then\r\n          printToAll('No se pueden colocar mazos de cartas en la zona de canastas', {1,0,0})\r\n\r\n        -- Si la carta única carta sale\r\n        elseif error_tipo_obj == false and obj_in_out == 'out' then\r\n\r\n          if nObjetos == 0 then\r\n\r\n            -- Detectamo qué zona es\r\n            zona_GUI = zona.getGUID()\r\n            equipo_zona = 0\r\n            numero_zona = 0\r\n            for i = 1,2 do\r\n              for j = 1,9 do\r\n                zona_comp_GUI = 'zonaCanastaE' .. i ..  '_C0' .. j .. '_GUID'\r\n                if zona_GUI == _G[zona_comp_GUI] then\r\n                  equipo_zona = i\r\n                  numero_zona = j\r\n                  break\r\n                end\r\n              end\r\n            end\r\n\r\n            -- TEXTO INDICANDO TIPO DE CANASTA\r\n            canasta_tipo_gui = 'canasta_tipo_E' .. equipo_zona .. '_C0' .. numero_zona .. '_GUID'\r\n            print(canasta_tipo_gui)\r\n            canasta_tipo_txt = getObjectFromGUID(_G[canasta_tipo_gui])\r\n            canasta_tipo_txt.setValue(' ')\r\n\r\n          end\r\n\r\n\r\n\r\n        -- Si hay carta nueva que haya entrado en zona\r\n        elseif error_tipo_obj == false and obj_in_out == 'in' then\r\n\r\n\r\n\r\n          -- Contamos cuantos monos hay en la canasta\r\n          Nmonos = 0\r\n          for i = 1,nObjetos do\r\n            carta = objectsInZone[i]\r\n            nombreCarta = carta.getName()\r\n            if (nombreCarta == 'Joker') or (nombreCarta == '2c') or\r\n                   (nombreCarta == '2r') or (nombreCarta == '2p') or\r\n                   (nombreCarta == '2t') then\r\n              Nmonos = Nmonos + 1\r\n            end\r\n          end\r\n\r\n          print('')\r\n          print('Nmonos = ',Nmonos)\r\n\r\n          -- Colocamos la carta nueva según condiciones\r\n          carta = objectsInZone[k_new]\r\n          nombreCarta = carta.getName()\r\n          numCarta  = string.sub(nombreCarta,\r\n                      string.len(nombreCarta)-2,\r\n                      string.len(nombreCarta)-1)\r\n          paloCarta = string.sub(nombreCarta,-1)\r\n\r\n          if (nombreCarta == 'Joker') or (nombreCarta == '2c') or\r\n                 (nombreCarta == '2r') or (nombreCarta == '2p') or\r\n                 (nombreCarta == '2t') then\r\n            numCarta = 'Mono'\r\n          end\r\n\r\n          print('nombreCarta = ',nombreCarta)\r\n          print('numCarta = ',numCarta)\r\n          print('paloCarta = ',paloCarta)\r\n\r\n          -- Se ha introducido marcador, sin ser la carta nº 8\r\n          if (nObjetos < 8 and (nombreCarta == 'Oculta' or nombreCarta == 'Oculta Apoyada')) then\r\n            printToAll('El marcador de canasta oculta se tiene que poner al final', {r=1,g=0,b=0})\r\n\r\n          -- Se ha introducido como carta nº8 una carta que no es el marcador\r\n          elseif nObjetos == 8 and (nombreCarta ~= 'Oculta' and nombreCarta ~= 'Oculta Apoyada') then\r\n            printToAll('La carta número 8 sólo puede ser el marcador de canasta oculta', {r=1,g=0,b=0})\r\n\r\n          -- Se ha introducido la primera carta de la canasta\r\n          elseif nObjetos == 1 then\r\n\r\n            -- Si la carta es un mono\r\n            if (nombreCarta == 'Joker') or (nombreCarta == '2c') or\r\n                   (nombreCarta == '2r') or (nombreCarta == '2p') or\r\n                   (nombreCarta == '2t') then\r\n              tipo_canasta = numCarta\r\n              txt_out = 'La canasta será del tipo: ' .. tipo_canasta\r\n              printToAll(txt_out, {r=1,g=0,b=0})\r\n              bloquear_carta = 'si'\r\n\r\n              -- Detectamo qué zona es\r\n              zona_GUI = zona.getGUID()\r\n              equipo_zona = 0\r\n              numero_zona = 0\r\n              for i = 1,2 do\r\n                for j = 1,9 do\r\n                  zona_comp_GUI = 'zonaCanastaE' .. i ..  '_C0' .. j .. '_GUID'\r\n                  if zona_GUI == _G[zona_comp_GUI] then\r\n                    equipo_zona = i\r\n                    numero_zona = j\r\n                    break\r\n                  end\r\n                end\r\n              end\r\n\r\n              -- TEXTO INDICANDO TIPO DE CANASTA\r\n              canasta_tipo_gui = 'canasta_tipo_E' .. equipo_zona .. '_C0' .. numero_zona .. '_GUID'\r\n              print(canasta_tipo_gui)\r\n              canasta_tipo_txt = getObjectFromGUID(_G[canasta_tipo_gui])\r\n              canasta_tipo_txt.setValue(tipo_canasta)\r\n\r\n            -- Si la carta es una flor\r\n            elseif (nombreCarta == '3c') or (nombreCarta == '3r') then\r\n              printToAll('No se pueden hacer canastas de flores, colocala en su sitio', {r=1,g=0,b=0})\r\n\r\n            -- Si la carta es una carta normal\r\n            else\r\n\r\n              tipo_canasta = numCarta\r\n              txt_out = 'La canasta será del tipo: ' .. tipo_canasta\r\n              printToAll(txt_out, {r=1,g=0,b=0})\r\n              bloquear_carta = 'si'\r\n\r\n              -- Detectamo qué zona es\r\n              zona_GUI = zona.getGUID()\r\n              equipo_zona = 0\r\n              numero_zona = 0\r\n              for i = 1,2 do\r\n                for j = 1,9 do\r\n                  zona_comp_GUI = 'zonaCanastaE' .. i ..  '_C0' .. j .. '_GUID'\r\n                  if zona_GUI == _G[zona_comp_GUI] then\r\n                    equipo_zona = i\r\n                    numero_zona = j\r\n                    break\r\n                  end\r\n                end\r\n              end\r\n\r\n              -- TEXTO INDICANDO TIPO DE CANASTA\r\n              canasta_tipo_gui = 'canasta_tipo_E' .. equipo_zona .. '_C0' .. numero_zona .. '_GUID'\r\n              print(canasta_tipo_gui)\r\n              canasta_tipo_txt = getObjectFromGUID(_G[canasta_tipo_gui])\r\n              canasta_tipo_txt.setValue(tipo_canasta)\r\n\r\n\r\n            end\r\n\r\n          -- Se introduce desde la 2ª a la 7ª carta de la canasta\r\n          elseif nObjetos > 1 and nObjetos < 7 then\r\n            -- Necesitamos conocer el tipo de canasta, para saber si es correcta la carta\r\n\r\n            -- Si la carta no coincide con el tipo de canasta y no es un mono\r\n            if tipo_canasta ~= numCarta and numCarta ~= 'Mono' then\r\n              printToAll('Carta no válida', {r=1,g=0,b=0})\r\n\r\n            -- Si la carta no coincide con el tipo de canasta, pero es un mono\r\n            elseif tipo_canasta ~= numCarta and numCarta == 'Mono' then\r\n\r\n              if Nmonos > math.floor(nObjetos /2) then\r\n                txt_out = 'Superado número máximo actual de monos'\r\n                printToAll(txt_out, {r=1,g=0,b=0})\r\n              else\r\n                txt_out = 'Canasta de tipo ' .. tipo_canasta .. ' - ' .. (7-nObjetos) .. ' restantes'\r\n                printToAll(txt_out, {r=1,g=0,b=0})\r\n                bloquear_carta = 'si'\r\n              end\r\n\r\n            -- Si la carta coincide con el tipo de canasta\r\n            else\r\n              txt_out = 'Canasta de tipo ' .. tipo_canasta .. ' - ' .. (7-nObjetos) .. ' restantes'\r\n              printToAll(txt_out, {r=1,g=0,b=0})\r\n              bloquear_carta = 'si'\r\n            end\r\n\r\n          -- Se introduce desde la 7ª canasta\r\n          elseif nObjetos == 7 then\r\n\r\n\r\n            -- Si la carta no coincide con el tipo de canasta y no es un mono\r\n            if tipo_canasta ~= numCarta and numCarta ~= 'Mono' then\r\n              printToAll('Carta no válida', {r=1,g=0,b=0})\r\n\r\n            -- Si la carta no coincide con el tipo de canasta, pero es un mono\r\n            elseif tipo_canasta ~= numCarta and numCarta == 'Mono' then\r\n\r\n              if Nmonos > math.floor(nObjetos /2) then\r\n                txt_out = 'Superado número máximo actual de monos'\r\n                printToAll(txt_out, {r=1,g=0,b=0})\r\n              else\r\n                txt_out = '¡Canasta completa!'\r\n                printToAll(txt_out, {r=1,g=0,b=0})\r\n                bloquear_carta = 'si'\r\n              end\r\n\r\n            -- Si la carta coincide con el tipo de canasta\r\n            else\r\n              txt_out = '¡Canasta completa!'\r\n              printToAll(txt_out, {r=1,g=0,b=0})\r\n              bloquear_carta = 'si'\r\n            end\r\n\r\n          -- Carta nº8 es un marcador\r\n          elseif nObjetos == 8 and (nombreCarta == 'Oculta' or nombreCarta == 'Oculta Apoyada') then\r\n            txt_out = '¡Canasta oculta!'\r\n            printToAll(txt_out, {r=1,g=0,b=0})\r\n            bloquear_carta = 'si'\r\n          end\r\n\r\n        end\r\n\r\n\r\n        print('Colocamos? ',bloquear_carta)\r\n        -- Bloqueamos carta si procede\r\n        if bloquear_carta == 'si' then\r\n        -- Tenemos que colocar en su sitio\r\n\r\n        -- Detectamos lado de mesa\r\n        local signo     = 1\r\n        if posicionZonai.x < 0 then\r\n          signo = -1\r\n        end\r\n\r\n        posX = paramXA*signo - (nObjetos-1)*paramXB*signo\r\n        -- Posición de la zona\r\n        posicionCarta.x = posicionZonai.x - posX\r\n        posicionCarta.y = paramYA\r\n        posicionCarta.z = posicionZonai.z\r\n\r\n        --angX = signo * ( (8-nObjetos)*(angA/8) + angB )\r\n        angX = angB\r\n        rotacionCarta.x = angX\r\n        rotacionCarta.y = rotacionZonai.y\r\n        rotacionCarta.z = rotacionZonai.z\r\n\r\n        -- Colocamos\r\n        objectsInZone[k_new].setPosition(posicionCarta)\r\n        objectsInZone[k_new].setRotation(rotacionCarta)\r\n\r\n        -- Bloqueamos\r\n        objectsInZone[k_new].setLock(true)\r\n\r\n        end\r\n\r\n      else\r\n        --printToAll('¡No es tu zona!', {1,0,0})\r\n      end\r\n\r\n  end\r\n\r\n  arg_out = {}\r\n  arg_out[1] = nObjetosActual\r\n  arg_out[2] = tipo_canasta\r\n  arg_out[3] = 0\r\n\r\n  return arg_out\r\n\r\n-- Final de función\r\nend\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/colocar_cartas\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/colocar_flores\nfunction colocarFloresEnZona(salidaF,zona,equipo)\r\n\r\n  local objectsInZone = zona.getObjects()\r\n  local nObjetos      = #objectsInZone\r\n  local posicionCarta = {}\r\n  local rotacionCarta = {}\r\n  local posicionZonai = zona.getPosition()\r\n  local rotacionZonai = zona.getRotation()\r\n\r\n  nObjetosActual     = salidaF[1]\r\n  carta_actual       = salidaF[2]\r\n\r\n  -- GUID de la zona\r\n  zona_GUID = zona.getGUID()\r\n\r\n  -- Turno actual y condición de equipo\r\n  texto_turno_actual = getObjectFromGUID(texto_turno_actual_GUID)\r\n  turno_actual = texto_turno_actual.getValue()\r\n\r\n  cond_E1 = zona_GUID == 'ed889e' or zona_GUID == '9f2a5d' or zona_GUID == '0b88c3' or zona_GUID == '5883a5'\r\n  cond_E2 = zona_GUID == '4e6a03' or zona_GUID == 'e54478' or zona_GUID == 'f2eba4' or zona_GUID == '4889e2'\r\n\r\n  cond_jugadorE1 = cond_E1 and ( turno_actual == 'Blue' or turno_actual == 'Yellow' )\r\n  cond_jugadorE2 = cond_E2 and ( turno_actual == 'Red' or turno_actual == 'Green' )\r\n\r\n  -- Colocamos carta en su sitio, si es una flor\r\n  if (nObjetos ~= nObjetosActual) and nObjetos == 1  then\r\n\r\n    if (cond_jugadorE1 or cond_jugadorE2) then\r\n\r\n      posicionCarta.x = posicionZonai.x\r\n      posicionCarta.y = posicionZonai.y\r\n      posicionCarta.z = posicionZonai.z\r\n\r\n      carta = objectsInZone[1]\r\n      carta_name = carta.getName()\r\n\r\n      print(carta_name)\r\n      if carta_name == '3r' or carta_name == '3c' then\r\n        -- Colocamos flor en su sitio\r\n        objectsInZone[1].setPosition(posicionCarta)\r\n        objectsInZone[1].setRotation(rotacionZonai)\r\n        objectsInZone[1].setLock(true)\r\n        -- Contabilizamos puntos\r\n        contar_puntos_flor(equipo,'in')\r\n        -- Guardamos carta\r\n        carta_actual = 'flor'\r\n      else\r\n        carta_actual = 'no_flor'\r\n      end\r\n\r\n    else\r\n\r\n      printToAll('¡No es tu zona!', {1,0,0})\r\n\r\n    end\r\n\r\n  end\r\n\r\n\r\n  -- Sacamos flor\r\n  if (nObjetos ~= nObjetosActual) and nObjetos == 0 then\r\n    --print(carta_actual)\r\n    if carta_actual == 'flor' then\r\n      contar_puntos_flor(equipo,'out')\r\n      carta_actual = 'no_flor'\r\n    end\r\n  end\r\n\r\n  nObjetosActual = nObjetos\r\n\r\n  salidaF[1] = nObjetosActual\r\n  salidaF[2] = carta_actual\r\n  return salidaF\r\n\r\nend\r\n\r\nfunction contar_puntos_flor(equipo,in_out)\r\n\r\n  -- Puntos en el contador de puntos canasta\r\n  contador_nombre = 'contador_puntos_canastas_E' .. equipo\r\n  contador_obj = _G[contador_nombre]\r\n\r\n  -- Número de flores del equipo\r\n  zonaF_nombre = 'zonasFloresE' .. equipo\r\n  zonaF_obj = _G[zonaF_nombre]\r\n  Nflores = 0\r\n\r\n  for _,zona in ipairs(zonaF_obj) do\r\n    carta = zona.getObjects()\r\n    Ncarta = #carta\r\n    if Ncarta == 1 then\r\n      Nflores = Nflores + 1\r\n    end\r\n  end\r\n\r\n  -- Contabilizamos nuevos puntos\r\n  puntos_actuales = contador_obj.getValue()\r\n\r\n  if in_out == 'out' then\r\n    if Nflores == 3 then\r\n      if puntos_actuales <= 0 then\r\n        puntos_actuales = puntos_actuales + 100\r\n      elseif puntos_actuales > 0 then\r\n        puntos_actuales = puntos_actuales - 500\r\n      end\r\n    elseif Nflores < 3 then\r\n      if puntos_actuales <= 0 then\r\n        puntos_actuales = puntos_actuales + 100\r\n      elseif puntos_actuales > 0 then\r\n        puntos_actuales = puntos_actuales - 100\r\n      end\r\n    end\r\n  elseif in_out == 'in' then\r\n    if Nflores == 4 then\r\n      if puntos_actuales <= 0 then\r\n        puntos_actuales = puntos_actuales - 100\r\n      elseif puntos_actuales > 0 then\r\n        puntos_actuales = puntos_actuales + 500\r\n      end\r\n    elseif Nflores < 4 then\r\n      if puntos_actuales <= 0 then\r\n        puntos_actuales = puntos_actuales - 100\r\n      elseif puntos_actuales > 0 then\r\n        puntos_actuales = puntos_actuales + 100\r\n      end\r\n    end\r\n  end\r\n\r\n  -- Actualizamos contador\r\n  contador_obj.setValue(puntos_actuales)\r\n\r\nend\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/colocar_flores\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/colocar_cartas_descarte\nfunction colocar_cartas_descarte(salidaDE,zona)\r\n\r\n      nObjetosActual     = salidaDE[1]\r\n\r\n      local objectsInZone = zona.getObjects()\r\n\r\n      tipo_objeto = objectsInZone.name\r\n      local nObjetos      = #objectsInZone\r\n\r\n      if tipo_objeto == 'CustomCard' or tipo_objeto == 'Card' then\r\n        nObjetos = 1\r\n        objeto_inicial = 'Carta'\r\n      elseif tipo_objeto == 'Deck' then\r\n        mazoD = objectsInZone[1]\r\n        nObjetos = #mazoD\r\n        objeto_inicial = 'Mazo'\r\n      else\r\n        objeto_inicial = 'Vacio'\r\n      end\r\n\r\n      --print(nObjetos)\r\n\r\n      local posicionCarta = {}\r\n      local rotacionCarta = {}\r\n\r\n      local posicionZonai = zona.getPosition()\r\n      local rotacionZonai = zona.getRotation()\r\n\r\n      -- Si ha variado el número de objetos en el interior de la zona...\r\n\r\n      if (nObjetos ~= nObjetosActual) then\r\n\r\n        print('')\r\n        print('objeto_inicial = ',objeto_inicial)\r\n\r\n        if nObjetos < nObjetosActual then\r\n          obj_in_out = 'out'\r\n        else\r\n          obj_in_out = 'in'\r\n        end\r\n\r\n        print('obj_in_out = ',obj_in_out)\r\n\r\n        nObjetosActual = nObjetos\r\n\r\n        error_tipo_obj = false\r\n\r\n        -- Si objeto entra, detectamos cual es y si es una carta\r\n        if obj_in_out == 'in' then\r\n\r\n          kk      = 1\r\n          k_new   = 0\r\n          kk_deck = 0\r\n\r\n          -- Primera carta del mazo de descartes\r\n          if     nObjetos == 1 then\r\n            obj      = objectsInZone[1]\r\n            obj_name = obj.name\r\n            if obj_name ~= nil then\r\n            else\r\n              error_tipo_obj = true\r\n            end\r\n\r\n          elseif nObjetos == 2 then\r\n\r\n          elseif nObjetos > 2 then\r\n\r\n          end\r\n\r\n\r\n          if nObjetos > 0 then\r\n\r\n            obj      = objectsInZone[kk]\r\n            obj_name = obj.name\r\n\r\n            if obj_name ~= nil then\r\n\r\n              print(obj_name)\r\n              if obj_name == 'Card' or obj_name == 'CardCustom' then\r\n                while k_new == 0 do\r\n                  obj      = objectsInZone[kk]\r\n                  obj_name = obj.name\r\n                  bloq  = obj.getLock()\r\n                  if bloq == false then\r\n                      k_new = kk\r\n                  end\r\n                  kk = kk + 1\r\n                end\r\n              elseif obj_name == 'Deck' then\r\n                mazo_descartes = 'Mazo'\r\n              else\r\n                 error_tipo_obj = true\r\n              end\r\n\r\n            else\r\n              error_tipo_obj = true\r\n            end\r\n\r\n          end\r\n\r\n        end\r\n\r\n\r\n        -- Una vez sabemos cual es el objeto que acaba de entrar, actuamos:\r\n        colocar_carta = 'no'\r\n\r\n        -- El objeto introducido en zona no es una carta\r\n        if error_tipo_obj == true then\r\n          printToAll('Error', {1,0,0})\r\n\r\n        -- Si hay carta nueva que haya entrado en zona\r\n        elseif error_tipo_obj == false and obj_in_out == 'in' then\r\n\r\n          -- Colocamos la carta nueva según condiciones\r\n          carta = objectsInZone[k_new]\r\n          nombreCarta = carta.getName()\r\n          print(nombreCarta)\r\n\r\n          -- Se ha introducido la primera carta de la canasta\r\n          if nObjetos == 1 then\r\n\r\n            colocar_carta = 'carta'\r\n\r\n          -- Siguientes cartas\r\n          elseif nObjetos > 1 then\r\n\r\n            colocar_carta = 'mazo'\r\n\r\n          end\r\n\r\n\r\n        end\r\n\r\n\r\n      print('Colocamos? ',colocar_carta)\r\n\r\n\r\n      if colocar_carta == 'pene' then\r\n\r\n        print('Colocar carta')\r\n\r\n        -- -- Posición de la zona\r\n        posicionCarta.x = posicionZonai.x\r\n        posicionCarta.y = posicionZonai.y\r\n        posicionCarta.z = posicionZonai.z\r\n\r\n        rotacionCarta.x = rotacionZonai.x\r\n        rotacionCarta.y = rotacionZonai.y\r\n        rotacionCarta.z = rotacionZonai.z\r\n\r\n        -- -- Colocamos\r\n        objectsInZone[k_new].setPosition(posicionCarta)\r\n        objectsInZone[k_new].setRotation(rotacionCarta)\r\n\r\n        -- -- Bloqueamos\r\n        -- objectsInZone[k_new].setLock(true)\r\n\r\n      end\r\n\r\n      if colocar_carta == 'pene' then\r\n\r\n\r\n      end\r\n\r\n    end\r\n\r\n    arg_out = {}\r\n    arg_out[1] = nObjetosActual\r\n\r\n    return arg_out\r\n\r\n  -- Final de función\r\n  end\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/colocar_cartas_descarte\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_objects\n--------------GENERANDO OBJETOS DESDE lAS GUIDS----------------------\r\n----------------------- Equipo 1----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE1_C01 = getObjectFromGUID(zonaCanastaE1_C01_GUID)\r\nzonaCanastaE1_C02 = getObjectFromGUID(zonaCanastaE1_C02_GUID)\r\nzonaCanastaE1_C03 = getObjectFromGUID(zonaCanastaE1_C03_GUID)\r\nzonaCanastaE1_C04 = getObjectFromGUID(zonaCanastaE1_C04_GUID)\r\nzonaCanastaE1_C05 = getObjectFromGUID(zonaCanastaE1_C05_GUID)\r\nzonaCanastaE1_C06 = getObjectFromGUID(zonaCanastaE1_C06_GUID)\r\nzonaCanastaE1_C07 = getObjectFromGUID(zonaCanastaE1_C07_GUID)\r\nzonaCanastaE1_C08 = getObjectFromGUID(zonaCanastaE1_C08_GUID)\r\nzonaCanastaE1_C09 = getObjectFromGUID(zonaCanastaE1_C09_GUID)\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nZonaCerradaE1_C01 = getObjectFromGUID(zonaCerradaE1_C01_GUID)\r\nZonaCerradaE1_C02 = getObjectFromGUID(zonaCerradaE1_C02_GUID)\r\nZonaCerradaE1_C03 = getObjectFromGUID(zonaCerradaE1_C03_GUID)\r\nZonaCerradaE1_C04 = getObjectFromGUID(zonaCerradaE1_C04_GUID)\r\nZonaCerradaE1_C05 = getObjectFromGUID(zonaCerradaE1_C05_GUID)\r\nZonaCerradaE1_C06 = getObjectFromGUID(zonaCerradaE1_C06_GUID)\r\nZonaCerradaE1_C07 = getObjectFromGUID(zonaCerradaE1_C07_GUID)\r\nZonaCerradaE1_C08 = getObjectFromGUID(zonaCerradaE1_C08_GUID)\r\n-------------------------Flores------------\r\nZonaCerradaE1_F01 = getObjectFromGUID(zonaCerradaE1_F01_GUID)\r\nZonaCerradaE1_F02 = getObjectFromGUID(zonaCerradaE1_F02_GUID)\r\nZonaCerradaE1_F03 = getObjectFromGUID(zonaCerradaE1_F03_GUID)\r\nZonaCerradaE1_F04 = getObjectFromGUID(zonaCerradaE1_F04_GUID)\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01 = getObjectFromGUID(zonaCanastaE2_C01_GUID)\r\nzonaCanastaE2_C02 = getObjectFromGUID(zonaCanastaE2_C02_GUID)\r\nzonaCanastaE2_C03 = getObjectFromGUID(zonaCanastaE2_C03_GUID)\r\nzonaCanastaE2_C04 = getObjectFromGUID(zonaCanastaE2_C04_GUID)\r\nzonaCanastaE2_C05 = getObjectFromGUID(zonaCanastaE2_C05_GUID)\r\nzonaCanastaE2_C06 = getObjectFromGUID(zonaCanastaE2_C06_GUID)\r\nzonaCanastaE2_C07 = getObjectFromGUID(zonaCanastaE2_C07_GUID)\r\nzonaCanastaE2_C08 = getObjectFromGUID(zonaCanastaE2_C08_GUID)\r\nzonaCanastaE2_C09 = getObjectFromGUID(zonaCanastaE2_C09_GUID)\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nZonaCerradaE2_C01 = getObjectFromGUID(zonaCerradaE2_C01_GUID)\r\nZonaCerradaE2_C02 = getObjectFromGUID(zonaCerradaE2_C02_GUID)\r\nZonaCerradaE2_C03 = getObjectFromGUID(zonaCerradaE2_C03_GUID)\r\nZonaCerradaE2_C04 = getObjectFromGUID(zonaCerradaE2_C04_GUID)\r\nZonaCerradaE2_C05 = getObjectFromGUID(zonaCerradaE2_C05_GUID)\r\nZonaCerradaE2_C06 = getObjectFromGUID(zonaCerradaE2_C06_GUID)\r\nZonaCerradaE2_C07 = getObjectFromGUID(zonaCerradaE2_C07_GUID)\r\nZonaCerradaE2_C08 = getObjectFromGUID(zonaCerradaE2_C08_GUID)\r\n-------------------------Flores------------\r\nZonaCerradaE2_F01 = getObjectFromGUID(zonaCerradaE2_F01_GUID)\r\nZonaCerradaE2_F02 = getObjectFromGUID(zonaCerradaE2_F02_GUID)\r\nZonaCerradaE2_F03 = getObjectFromGUID(zonaCerradaE2_F03_GUID)\r\nZonaCerradaE2_F04 = getObjectFromGUID(zonaCerradaE2_F04_GUID)\r\n-------------------------------------------\r\n\r\n    ---------------------------------------------------------------------\r\n    -------------------GENERANDO BLOQUES DE ZONAS------------------------\r\n    ----------------------- Equipo 1----------------------\r\n    zonasCanastaE1 = {zonaCanastaE1_C01, zonaCanastaE1_C02,\r\n    zonaCanastaE1_C03, zonaCanastaE1_C04, zonaCanastaE1_C05,\r\n    zonaCanastaE1_C06, zonaCanastaE1_C07, zonaCanastaE1_C08,\r\n    zonaCanastaE1_C09}\r\n\r\n    zonasCerradasE1 = {zonaCerradaE1_C01,zonaCerradaE1_C02,\r\n    zonaCerradaE1_C03,zonaCerradaE1_C04,zonaCerradaE1_C05,\r\n    zonaCerradaE1_C06,zonaCerradaE1_C07,zonaCerradaE1_C08}\r\n\r\n    zonasFloresE1 = {ZonaCerradaE1_F01,ZonaCerradaE1_F02,\r\n    ZonaCerradaE1_F03,ZonaCerradaE1_F04}\r\n    ----------------------- Equipo 2----------------------\r\n    zonasCanastaE2 = {zonaCanastaE2_C01, zonaCanastaE2_C02,\r\n    zonaCanastaE2_C03, zonaCanastaE2_C04, zonaCanastaE2_C05,\r\n    zonaCanastaE2_C06, zonaCanastaE2_C07, zonaCanastaE2_C08,\r\n    zonaCanastaE2_C09}\r\n\r\n    zonasCerradasE2 = {zonaCerradaE2_C01,zonaCerradaE2_C02,\r\n    zonaCerradaE2_C03,zonaCerradaE2_C04,zonaCerradaE2_C05,\r\n    zonaCerradaE2_C06,zonaCerradaE2_C07,zonaCerradaE2_C08}\r\n\r\n    zonasFloresE2 = {ZonaCerradaE2_F01,ZonaCerradaE2_F02,\r\n    ZonaCerradaE2_F03,ZonaCerradaE2_F04}\r\n    ---------------------------------------------------------------------\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_objects\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_objects\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01 = getObjectFromGUID(bloque_canasta_E1_C01_GUID)\r\nbloque_canasta_E1_C02 = getObjectFromGUID(bloque_canasta_E1_C02_GUID)\r\nbloque_canasta_E1_C03 = getObjectFromGUID(bloque_canasta_E1_C03_GUID)\r\nbloque_canasta_E1_C04 = getObjectFromGUID(bloque_canasta_E1_C04_GUID)\r\nbloque_canasta_E1_C05 = getObjectFromGUID(bloque_canasta_E1_C05_GUID)\r\nbloque_canasta_E1_C06 = getObjectFromGUID(bloque_canasta_E1_C06_GUID)\r\nbloque_canasta_E1_C07 = getObjectFromGUID(bloque_canasta_E1_C07_GUID)\r\nbloque_canasta_E1_C08 = getObjectFromGUID(bloque_canasta_E1_C08_GUID)\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01 = getObjectFromGUID(bloque_canasta_E2_C01_GUID)\r\nbloque_canasta_E2_C02 = getObjectFromGUID(bloque_canasta_E2_C02_GUID)\r\nbloque_canasta_E2_C03 = getObjectFromGUID(bloque_canasta_E2_C03_GUID)\r\nbloque_canasta_E2_C04 = getObjectFromGUID(bloque_canasta_E2_C04_GUID)\r\nbloque_canasta_E2_C05 = getObjectFromGUID(bloque_canasta_E2_C05_GUID)\r\nbloque_canasta_E2_C06 = getObjectFromGUID(bloque_canasta_E2_C06_GUID)\r\nbloque_canasta_E2_C07 = getObjectFromGUID(bloque_canasta_E2_C07_GUID)\r\nbloque_canasta_E2_C08 = getObjectFromGUID(bloque_canasta_E2_C08_GUID)\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01 = getObjectFromGUID(bloque_canasta_tipo_E1_C01_GUID)\r\nbloque_canasta_tipo_E1_C02 = getObjectFromGUID(bloque_canasta_tipo_E1_C02_GUID)\r\nbloque_canasta_tipo_E1_C03 = getObjectFromGUID(bloque_canasta_tipo_E1_C03_GUID)\r\nbloque_canasta_tipo_E1_C04 = getObjectFromGUID(bloque_canasta_tipo_E1_C04_GUID)\r\nbloque_canasta_tipo_E1_C05 = getObjectFromGUID(bloque_canasta_tipo_E1_C05_GUID)\r\nbloque_canasta_tipo_E1_C06 = getObjectFromGUID(bloque_canasta_tipo_E1_C06_GUID)\r\nbloque_canasta_tipo_E1_C07 = getObjectFromGUID(bloque_canasta_tipo_E1_C07_GUID)\r\nbloque_canasta_tipo_E1_C08 = getObjectFromGUID(bloque_canasta_tipo_E1_C08_GUID)\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01 = getObjectFromGUID(bloque_canasta_tipo_E2_C01_GUID)\r\nbloque_canasta_tipo_E2_C02 = getObjectFromGUID(bloque_canasta_tipo_E2_C02_GUID)\r\nbloque_canasta_tipo_E2_C03 = getObjectFromGUID(bloque_canasta_tipo_E2_C03_GUID)\r\nbloque_canasta_tipo_E2_C04 = getObjectFromGUID(bloque_canasta_tipo_E2_C04_GUID)\r\nbloque_canasta_tipo_E2_C05 = getObjectFromGUID(bloque_canasta_tipo_E2_C05_GUID)\r\nbloque_canasta_tipo_E2_C06 = getObjectFromGUID(bloque_canasta_tipo_E2_C06_GUID)\r\nbloque_canasta_tipo_E2_C07 = getObjectFromGUID(bloque_canasta_tipo_E2_C07_GUID)\r\nbloque_canasta_tipo_E2_C08 = getObjectFromGUID(bloque_canasta_tipo_E2_C08_GUID)\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_objects\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_objects\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1 = getObjectFromGUID(contador_puntos_canastas_E1_GUID)\r\ncontador_puntos_canastas_E2 = getObjectFromGUID(contador_puntos_canastas_E2_GUID)\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1 = getObjectFromGUID(contador_puntos_total_E1_GUID)\r\ncontador_puntos_total_E2 = getObjectFromGUID(contador_puntos_total_E2_GUID)\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda = getObjectFromGUID(contador_ronda_GUID)\r\n\r\n-- Bloqueamos contadores\r\ncontador_puntos_canastas_E1.interactable = false\r\ncontador_puntos_canastas_E2.interactable = false\r\ncontador_puntos_total_E1.interactable = false\r\ncontador_puntos_total_E2.interactable = false\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_objects\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_objects\n-- TEXTOS CANASTA EQUIPO 1\r\ncanasta_tipo_E1_C01 = getObjectFromGUID(canasta_tipo_E1_C01_GUID)\r\ncanasta_tipo_E1_C02 = getObjectFromGUID(canasta_tipo_E1_C02_GUID)\r\ncanasta_tipo_E1_C03 = getObjectFromGUID(canasta_tipo_E1_C03_GUID)\r\ncanasta_tipo_E1_C04 = getObjectFromGUID(canasta_tipo_E1_C04_GUID)\r\ncanasta_tipo_E1_C05 = getObjectFromGUID(canasta_tipo_E1_C05_GUID)\r\ncanasta_tipo_E1_C06 = getObjectFromGUID(canasta_tipo_E1_C06_GUID)\r\ncanasta_tipo_E1_C07 = getObjectFromGUID(canasta_tipo_E1_C07_GUID)\r\ncanasta_tipo_E1_C08 = getObjectFromGUID(canasta_tipo_E1_C08_GUID)\r\ncanasta_tipo_E1_C09 = getObjectFromGUID(canasta_tipo_E1_C09_GUID)\r\n\r\n-- TEXTOS CANASTA EQUIPO 1\r\ncanasta_tipo_E2_C01 = getObjectFromGUID(canasta_tipo_E2_C01_GUID)\r\ncanasta_tipo_E2_C02 = getObjectFromGUID(canasta_tipo_E2_C02_GUID)\r\ncanasta_tipo_E2_C03 = getObjectFromGUID(canasta_tipo_E2_C03_GUID)\r\ncanasta_tipo_E2_C04 = getObjectFromGUID(canasta_tipo_E2_C04_GUID)\r\ncanasta_tipo_E2_C05 = getObjectFromGUID(canasta_tipo_E2_C05_GUID)\r\ncanasta_tipo_E2_C06 = getObjectFromGUID(canasta_tipo_E2_C06_GUID)\r\ncanasta_tipo_E2_C07 = getObjectFromGUID(canasta_tipo_E2_C07_GUID)\r\ncanasta_tipo_E2_C08 = getObjectFromGUID(canasta_tipo_E2_C08_GUID)\r\ncanasta_tipo_E2_C09 = getObjectFromGUID(canasta_tipo_E2_C09_GUID)\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_objects\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/variables_ocultas\n\r\n-- Variable para apagar las zonas de captura de canastas\r\nvariable_zona_canastas_GUID = 'b847c2'\r\nvariable_zona_canastas = getObjectFromGUID(variable_zona_canastas_GUID)\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/variables_ocultas\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n-- JUGADORES\r\nJugador_1_E1 = Player[\"Blue\"]\r\nJugador_2_E1 = Player[\"Yellow\"]\r\nJugador_1_E2 = Player[\"Green\"]\r\nJugador_2_E2 = Player[\"Red\"]\r\n\r\nJugador_1_E1_color = \"Blue\"\r\nJugador_2_E1_color = \"Yellow\"\r\nJugador_1_E2_color = \"Green\"\r\nJugador_2_E2_color = \"Red\"\r\n\n----    #include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n\n\n    -- SCRIPT ZONAS DE CANASTAS\n    salidaE1 = {}\n    salidaE2 = {}\n\n    nObjetosActualE1 = {}\n    nObjetosActualE2 = {}\n    tipo_canasta_E1 = {}\n    tipo_canasta_E2 = {}\n    activar_colocacion_E1 = {}\n    activar_colocacion_E2 = {}\n\n    for i, zona in pairs(zonasCanastaE1) do\n      nObjetosActualE1[i] = #(zona.getObjects())\n      tipo_canasta_E1[i] = ''\n      activar_colocacion_E1[i] = 0\n      salidaE1[i] = {}\n    end\n    for i, zona in pairs(zonasCanastaE2) do\n      nObjetosActualE2[i] = #(zona.getObjects())\n      tipo_canasta_E2[i] = ''\n      activar_colocacion_E2[i] = 0\n      salidaE2[i] = {}\n    end\n\n    for i, zona in pairs(zonasCanastaE1) do\n      salidaE1[i][1] = nObjetosActualE1[i]\n      salidaE1[i][2] = tipo_canasta_E1[i]\n      salidaE1[i][3] = activar_colocacion_E1[i]\n    end\n    for i, zona in pairs(zonasCanastaE2) do\n      salidaE2[i][1] = nObjetosActualE2[i]\n      salidaE2[i][2] = tipo_canasta_E2[i]\n      salidaE2[i][3] = activar_colocacion_E2[i]\n    end\n\n\n    -- SCRIPT DE FLORES\n    salidaF1 = {}\n    salidaF2 = {}\n\n    posicionZonaF1   = {}\n    nObjetosActualF1 = {}\n    posicionZonaF2   = {}\n    nObjetosActualF2 = {}\n    carta_actualF1 = {}\n    carta_actualF2 = {}\n\n    for i, zona in pairs(zonasFloresE1) do\n      posicionZonaF1.i = zona.getPosition()\n      nObjetosActualF1[i] = #(zona.getObjects())\n      carta_actualF1[i] = 'no_flor'\n      salidaF1[i] = {}\n    end\n    for i, zona in pairs(zonasFloresE2) do\n      posicionZonaF2.i = zona.getPosition()\n      nObjetosActualF2[i] = #(zona.getObjects())\n      carta_actualF1[i] = 'no_flor'\n      salidaF2[i] = {}\n    end\n\n    for i, zona in pairs(zonasFloresE1) do\n      salidaF1[i][1] = nObjetosActualF1[i]\n      salidaF1[i][2] = carta_actualF1[i]\n    end\n    for i, zona in pairs(zonasFloresE2) do\n      salidaF2[i][1] = nObjetosActualF2[i]\n      salidaF2[i][2] = carta_actualF2[i]\n    end\n\n    -- SCRIPT DE ZONA DE DESCARTES\n    zonaDescarte = getObjectFromGUID(Z_mazo_descarte_GUID)\n    salidaDE = {}\n    salidaDE[1] = 0\n\n\nend\n\nfunction onUpdate()\n\n  -- FLORES\n  for i,zona in ipairs(zonasFloresE1) do\n    salidaF1[i] = colocarFloresEnZona(salidaF1[i],zona,1)\n  end\n  for i,zona in ipairs(zonasFloresE2) do\n    salidaF2[i] = colocarFloresEnZona(salidaF2[i],zona,2)\n  end\n  -- CANASTAS\n  for i,zona in ipairs(zonasCanastaE1) do\n    salidaE1[i] = colocaCartasEnZona_v3(salidaE1[i],zona)\n  end\n  for i,zona in ipairs(zonasCanastaE2) do\n    salidaE2[i] = colocaCartasEnZona_v3(salidaE2[i],zona)\n  end\n\n  salidaDE = colocar_cartas_descarte(salidaDE,zonaDescarte)\n\n\nend\n\nfunction onPlayerTurn(jugador)\n\n    --print(jugador.color)\n    texto_turno_actual = getObjectFromGUID(texto_turno_actual_GUID)\n    texto_turno_actual.TextTool.setValue(jugador.color)\n\nend",
  "LuaScriptState": "",
  "MusicPlayer": {
    "RepeatSong": false,
    "PlaylistEntry": -1,
    "CurrentAudioTitle": "Unknown Title",
    "CurrentAudioURL": "http://cloud-3.steamusercontent.com/ugc/770602914748073699/96FAA80AA742D5C0D6CCFC94CFC9DEA28AE9945C/",
    "AudioLibrary": []
  },
  "Grid": {
    "Type": 0,
    "Lines": false,
    "Color": {
      "r": 0.0,
      "g": 0.0,
      "b": 0.0
    },
    "Opacity": 0.75,
    "ThickLines": false,
    "Snapping": false,
    "Offset": false,
    "BothSnapping": false,
    "xSize": 2.0,
    "ySize": 2.0,
    "PosOffset": {
      "x": 0.0,
      "y": 1.0,
      "z": 0.0
    }
  },
  "Lighting": {
    "LightIntensity": 0.54,
    "LightColor": {
      "r": 1.0,
      "g": 0.9804,
      "b": 0.8902
    },
    "AmbientIntensity": 1.3,
    "AmbientType": 0,
    "AmbientSkyColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientEquatorColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientGroundColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "ReflectionIntensity": 1.0,
    "LutIndex": 0,
    "LutContribution": 1.0
  },
  "Hands": {
    "Enable": true,
    "DisableUnused": false,
    "Hiding": 0,
    "HandTransforms": [
      {
        "Color": "Blue",
        "Transform": {
          "posX": 28.6145115,
          "posY": 5.695403,
          "posZ": 0.0,
          "rotX": 0.0,
          "rotY": 270.0,
          "rotZ": 0.0,
          "scaleX": 15.4241371,
          "scaleY": 6.6973877,
          "scaleZ": 3.58610415
        }
      },
      {
        "Color": "Green",
        "Transform": {
          "posX": 0.0,
          "posY": 5.695403,
          "posZ": 28.6732559,
          "rotX": 0.0,
          "rotY": 180.0,
          "rotZ": 0.0,
          "scaleX": 15.409296,
          "scaleY": 6.6973877,
          "scaleZ": 3.55600476
        }
      },
      {
        "Color": "Yellow",
        "Transform": {
          "posX": -28.6376839,
          "posY": 5.695403,
          "posZ": 0.0,
          "rotX": 0.0,
          "rotY": 90.0,
          "rotZ": 0.0,
          "scaleX": 15.42418,
          "scaleY": 6.6973877,
          "scaleZ": 3.58643556
        }
      },
      {
        "Color": "Red",
        "Transform": {
          "posX": 0.0,
          "posY": 5.695403,
          "posZ": -28.566576,
          "rotX": 0.0,
          "rotY": 0.0,
          "rotZ": 0.0,
          "scaleX": 15.409296,
          "scaleY": 6.6973877,
          "scaleZ": 3.55600476
        }
      }
    ]
  },
  "Turns": {
    "Enable": false,
    "Type": 0,
    "TurnOrder": [],
    "Reverse": false,
    "SkipEmpty": false,
    "DisableInteractions": false,
    "PassTurns": true,
    "TurnColor": ""
  },
  "ObjectStates": [
    {
      "Name": "Counter",
      "Transform": {
        "posX": -2.17340851,
        "posY": 0.33,
        "posZ": -24.0274181,
        "rotX": -8.64345964E-08,
        "rotY": 0.01291748,
        "rotZ": 8.66707353E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0823529139,
        "g": 0.0823529139,
        "b": 0.0823529139
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "784c65"
    },
    {
      "Name": "Counter",
      "Transform": {
        "posX": 4.00274563,
        "posY": 0.33,
        "posZ": -18.600441,
        "rotX": 2.31539047E-06,
        "rotY": 270.0,
        "rotZ": -5.741731E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0823529139,
        "g": 0.0823529139,
        "b": 0.0823529139
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "821d9e"
    },
    {
      "Name": "Counter",
      "Transform": {
        "posX": -3.955615,
        "posY": 0.33,
        "posZ": 18.5818958,
        "rotX": 2.47362732E-06,
        "rotY": 90.00001,
        "rotZ": -8.41423E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0823529139,
        "g": 0.0823529139,
        "b": 0.0823529139
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "5043d9"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.1,
        "posY": 1.0,
        "posZ": -7.7,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "db7d7a"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.1,
        "posY": 1.0,
        "posZ": -3.97,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "1e1fee"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.1,
        "posY": 1.0,
        "posZ": -0.191037744,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "1a0d9d"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.1,
        "posY": 1.0,
        "posZ": 3.60375619,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "45f2be"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.1,
        "posY": 1.0,
        "posZ": 7.380888,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "65d35b"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.1,
        "posY": 1.0,
        "posZ": 11.1448231,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "29035b"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.1,
        "posY": 1.0,
        "posZ": 14.9066362,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "1ad7ac"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.1,
        "posY": 1.0,
        "posZ": 18.672636,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "875f5e"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.1,
        "posY": 1.0,
        "posZ": 22.46793,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "bdafdd"
    },
    {
      "Name": "Counter",
      "Transform": {
        "posX": 2.10822773,
        "posY": 0.33,
        "posZ": -24.0740376,
        "rotX": -8.434916E-06,
        "rotY": 0.009587197,
        "rotZ": -7.67088068E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0823529139,
        "g": 0.0823529139,
        "b": 0.0823529139
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f204af"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": 7.676786,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "2e09c7"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": 3.87415934,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "970291"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": 0.105276108,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "649098"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": -3.6755538,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "b8caf3"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": -7.444558,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e26404"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": -11.2173986,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "ed78e4"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -12.9962444,
        "posY": 1.0,
        "posZ": -14.9877605,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "ccf4ad"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": -18.7662735,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "df0ee8"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": -22.49317,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 10.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a6714b"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": -19.00387,
        "posY": 0.7,
        "posZ": 7.697721,
        "rotX": 1.4538081E-07,
        "rotY": 270.017151,
        "rotZ": -5.963435E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 01 - EQUIPO 02\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE2_C01_GUID,2)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "29a912"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": -19.0,
        "posY": 0.7,
        "posZ": 3.86117864,
        "rotX": -4.02759753E-07,
        "rotY": 270.021454,
        "rotZ": 2.26456464E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 02 - EQUIPO 02\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE2_C02_GUID,2)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "8c0e4a"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": -19.0,
        "posY": 0.7,
        "posZ": 0.07006383,
        "rotX": -6.738702E-07,
        "rotY": 270.010284,
        "rotZ": 1.95053281E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 03 - EQUIPO 02\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE2_C03_GUID,2)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "a537ff"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": -18.9999962,
        "posY": 0.7,
        "posZ": -3.633642,
        "rotX": -4.21507565E-07,
        "rotY": 270.010254,
        "rotZ": 3.21258227E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 04 - EQUIPO 02\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE2_C04_GUID,2)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "6e7c45"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": -19.0,
        "posY": 0.7,
        "posZ": -7.35336161,
        "rotX": -3.22051257E-08,
        "rotY": 270.010284,
        "rotZ": 3.64889E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 05 - EQUIPO 02\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE2_C05_GUID,2)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "3f1d04"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": -19.0000629,
        "posY": 0.7,
        "posZ": -11.2124367,
        "rotX": 3.468255E-08,
        "rotY": 270.010284,
        "rotZ": -4.909229E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 06 - EQUIPO 02\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE2_C06_GUID,2)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "e387f9"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": -19.0,
        "posY": 0.7,
        "posZ": -15.0575886,
        "rotX": 3.468255E-08,
        "rotY": 270.010284,
        "rotZ": -4.909229E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 07 - EQUIPO 02\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE2_C07_GUID,2)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "e0616a"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": -19.0000916,
        "posY": 0.7,
        "posZ": -18.7093563,
        "rotX": 2.17338183E-08,
        "rotY": 270.010284,
        "rotZ": -1.74414907E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 08 - EQUIPO 02\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE2_C08_GUID,2)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "bc3430"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": -18.9998245,
        "posY": 0.7,
        "posZ": -22.5270882,
        "rotX": -1.54763E-06,
        "rotY": 270.017151,
        "rotZ": -1.34191828E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 09 - EQUIPO 02\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE2_C09_GUID,2)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "d7692a"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": 19.0047951,
        "posY": 0.700000048,
        "posZ": -7.765028,
        "rotX": 9.211274E-08,
        "rotY": 90.0,
        "rotZ": -3.82443432E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 01 - EQUIPO 01\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE1_C01_GUID,1)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "27140a"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": 19.0001,
        "posY": 0.700000048,
        "posZ": -4.01789,
        "rotX": 1.45380938E-07,
        "rotY": 90.0,
        "rotZ": -5.963438E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 02 - EQUIPO 01\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE1_C02_GUID,1)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "739c47"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": 19.0,
        "posY": 0.700000048,
        "posZ": -0.237298846,
        "rotX": 1.45380938E-07,
        "rotY": 90.0,
        "rotZ": -5.963438E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 03 - EQUIPO 01\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE1_C03_GUID,1)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "bd276c"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": 19.0,
        "posY": 0.700000048,
        "posZ": 3.602057,
        "rotX": 1.45380938E-07,
        "rotY": 90.0,
        "rotZ": -5.963438E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 04 - EQUIPO 01\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE1_C04_GUID,1)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "71a4a7"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": 19.0,
        "posY": 0.700000048,
        "posZ": 7.343841,
        "rotX": 1.45380938E-07,
        "rotY": 90.0,
        "rotZ": -5.963438E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 05 - EQUIPO 01\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE1_C05_GUID,1)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "367e70"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": 19.0,
        "posY": 0.700000048,
        "posZ": 11.0745134,
        "rotX": 1.45380938E-07,
        "rotY": 90.0,
        "rotZ": -5.963438E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 06 - EQUIPO 01\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE1_C06_GUID,1)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "b4c3e4"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": 19.0,
        "posY": 0.700000048,
        "posZ": 14.886425,
        "rotX": 1.45380938E-07,
        "rotY": 90.0,
        "rotZ": -5.963438E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 07 - EQUIPO 01\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE1_C07_GUID,1)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "45a375"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": 19.0,
        "posY": 0.700000048,
        "posZ": 18.6610355,
        "rotX": 1.45381023E-07,
        "rotY": 90.0,
        "rotZ": -5.96343739E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 08 - EQUIPO 01\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE1_C08_GUID,1)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "c130d7"
    },
    {
      "Name": "Checker_white",
      "Transform": {
        "posX": 19.0,
        "posY": 0.700000048,
        "posZ": 22.4370766,
        "rotX": 1.45380938E-07,
        "rotY": 90.0,
        "rotZ": -5.963438E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN CANASTA 09 - EQUIPO 01\r\n---------------------------------\r\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CERRAR',\r\n    click_function='pulsar_boton',\r\n    function_owner=self,\r\n    position={0,0.3,0},\r\n    height=300,\r\n    width=500,\r\n    font_size=90,\r\n    tooltip = 'Cerrar canasta',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    agrupar_canasta(zonaCanastaE1_C09_GUID,1)\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "de3eff"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 8.7,
        "posY": 1.0,
        "posZ": -21.6,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.53627968
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "2ef863"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 2.05054975,
        "posY": 0.961139441,
        "posZ": -22.1642418,
        "rotX": 90.0,
        "rotY": 0.4644612,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "Equipo 1",
        "colorstate": {
          "r": 0.627,
          "g": 0.125,
          "b": 0.941
        },
        "fontSize": 48
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "4c1727"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -2.13091469,
        "posY": 0.961139441,
        "posZ": -22.11311,
        "rotX": 90.0,
        "rotY": -1.26165773E-07,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "Equipo 2",
        "colorstate": {
          "r": 0.627,
          "g": 0.125,
          "b": 0.941
        },
        "fontSize": 48
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "4371a2"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 8.7,
        "posY": 1.0,
        "posZ": -18.7021484,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.524316
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "880f29"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.0,
        "posY": 1.0,
        "posZ": -21.6,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.48664165
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f2b64b"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.0,
        "posY": 1.0,
        "posZ": -18.7,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.47534823
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "1359fa"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 17.3,
        "posY": 1.0,
        "posZ": -21.6,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.50581336
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "8463b8"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 17.3,
        "posY": 1.0,
        "posZ": -18.7,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.43655849
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "04dcae"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 21.6,
        "posY": 1.0,
        "posZ": -21.6,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.53050327
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "1ef3ec"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 21.6,
        "posY": 1.0,
        "posZ": -18.7,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.425666
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "da892d"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 8.69278,
        "posY": 1.0,
        "posZ": -15.4811029,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.30585384,
        "scaleY": 1.0,
        "scaleZ": 3.5698278
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "ed889e"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 13.0199623,
        "posY": 1.0,
        "posZ": -15.4788437,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.30231667,
        "scaleY": 1.0,
        "scaleZ": 3.47655
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "9f2a5d"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 17.3140945,
        "posY": 1.0,
        "posZ": -15.4794216,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.30116129,
        "scaleY": 1.0,
        "scaleZ": 3.490154
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "0b88c3"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 21.5851212,
        "posY": 1.0,
        "posZ": -15.4905643,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 2.27888513,
        "scaleY": 1.0,
        "scaleZ": 3.496993
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "5883a5"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -8.7,
        "posY": 1.0,
        "posZ": 21.6,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "8ebbc8"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -8.7,
        "posY": 1.0,
        "posZ": 18.7,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "7283e5"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -8.699816,
        "posY": 1.0,
        "posZ": 15.4883718,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.28325415,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "4e6a03"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": 21.6,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "8279ef"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.0,
        "posY": 1.0,
        "posZ": 18.7,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "3493a2"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -12.9998293,
        "posY": 1.0,
        "posZ": 15.4856129,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.28877258,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e54478"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -17.3,
        "posY": 1.0,
        "posZ": 21.6,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e67d0f"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -17.3,
        "posY": 1.0,
        "posZ": 18.7,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "07c6a3"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -17.2998142,
        "posY": 1.0,
        "posZ": 15.4887123,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.2825737,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f2eba4"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -21.6,
        "posY": 1.0,
        "posZ": 21.6,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d2e8d9"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -21.6,
        "posY": 1.0,
        "posZ": 18.7,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.36,
        "scaleY": 1.0,
        "scaleZ": 3.58
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "abfa5d"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -21.5913754,
        "posY": 1.0,
        "posZ": 15.4898043,
        "rotX": 0.0,
        "rotY": 90.27507,
        "rotZ": 0.0,
        "scaleX": 2.2803092,
        "scaleY": 1.0,
        "scaleZ": 3.59686852
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "4889e2"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 8.7,
        "posY": 0.5,
        "posZ": -18.7021484,
        "rotX": 1.32589648E-07,
        "rotY": 89.9561539,
        "rotZ": 2.16261583E-07,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "32bf01"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 8.697875,
        "posY": 0.5,
        "posZ": -21.603796,
        "rotX": -2.008134E-07,
        "rotY": 89.98928,
        "rotZ": -8.979596E-08,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "6f139a"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 13.0,
        "posY": 0.5,
        "posZ": -21.6,
        "rotX": 0.00084586133,
        "rotY": 89.99306,
        "rotZ": 0.00118582952,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "ceaefc"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 13.0,
        "posY": 0.5,
        "posZ": -18.7,
        "rotX": -1.08107781E-06,
        "rotY": 90.0000153,
        "rotZ": 3.04697437E-06,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "80526b"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 17.3,
        "posY": 0.5,
        "posZ": -21.6,
        "rotX": 1.00646453E-07,
        "rotY": 90.0000153,
        "rotZ": -5.401473E-08,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "faf549"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 17.3,
        "posY": 0.5,
        "posZ": -18.7,
        "rotX": -8.58902467E-07,
        "rotY": 89.99999,
        "rotZ": 4.36483759E-07,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "39a73f"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 21.6,
        "posY": 0.5,
        "posZ": -21.6,
        "rotX": -9.149368E-07,
        "rotY": 89.99999,
        "rotZ": 3.388688E-07,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "db0e7a"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 21.6,
        "posY": 0.5,
        "posZ": -18.7,
        "rotX": -8.660092E-07,
        "rotY": 89.99999,
        "rotZ": 4.11748971E-07,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d6933a"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -8.7,
        "posY": 0.5,
        "posZ": 21.6,
        "rotX": 1.2232951E-07,
        "rotY": 90.00003,
        "rotZ": 5.032962E-07,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "485745"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -8.7,
        "posY": 0.5,
        "posZ": 18.7,
        "rotX": 3.87966743E-08,
        "rotY": 90.00003,
        "rotZ": -3.89376964E-07,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f5df8d"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -13.0,
        "posY": 0.5,
        "posZ": 21.6,
        "rotX": 1.30667772E-07,
        "rotY": 90.00003,
        "rotZ": -2.733981E-07,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a970d2"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -13.0,
        "posY": 0.5,
        "posZ": 18.7,
        "rotX": -0.0046862876,
        "rotY": 90.0003,
        "rotZ": 0.0006314508,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "812e44"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -17.3,
        "posY": 0.5,
        "posZ": 21.6,
        "rotX": 3.59984149E-08,
        "rotY": 90.00003,
        "rotZ": -2.431466E-07,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "399d90"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -17.3,
        "posY": 0.5,
        "posZ": 18.7,
        "rotX": -2.84808351E-07,
        "rotY": 89.93111,
        "rotZ": 180.0,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "6d7a78"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -21.6,
        "posY": 0.5,
        "posZ": 21.6,
        "rotX": 1.34260134E-07,
        "rotY": 90.00003,
        "rotZ": -1.132531E-07,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f0f466"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -21.6,
        "posY": 0.5,
        "posZ": 18.7,
        "rotX": 1.21233015E-07,
        "rotY": 90.00003,
        "rotZ": -9.096743E-08,
        "scaleX": 2.7,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "dc6c83"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 1.76693845,
        "posY": 0.0,
        "posZ": -8.993627,
        "rotX": -6.157073E-07,
        "rotY": 180.0332,
        "rotZ": 1.42512242E-08,
        "scaleX": 0.01,
        "scaleY": 0.01,
        "scaleZ": 0.01
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0678792,
        "g": 0.3651263,
        "b": 0.03742451
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN FINALIZAR RONDA\r\n---------------------------------\r\n-- INCLUDES\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n-- JUGADORES\r\nJugador_1_E1 = Player[\"Blue\"]\r\nJugador_2_E1 = Player[\"Yellow\"]\r\nJugador_1_E2 = Player[\"Green\"]\r\nJugador_2_E2 = Player[\"Red\"]\r\n\r\nJugador_1_E1_color = \"Blue\"\r\nJugador_2_E1_color = \"Yellow\"\r\nJugador_1_E2_color = \"Green\"\r\nJugador_2_E2_color = \"Red\"\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/contar_puntos\nfunction contar_puntos(jugador_color)\r\n\r\n  -- CONTADOR RONDA\r\n  contador_ronda = getObjectFromGUID(contador_ronda_GUID)\r\n  ronda = contador_ronda.getValue()\r\n\r\n  -- MANOS DE JUGADORES\r\n  mano1_E1 = Jugador_1_E1.getHandObjects()\r\n  mano2_E1 = Jugador_2_E1.getHandObjects()\r\n  mano1_E2 = Jugador_1_E2.getHandObjects()\r\n  mano2_E2 = Jugador_2_E2.getHandObjects()\r\n\r\n  Ncartas_1_E1 = #mano1_E1\r\n  Ncartas_2_E1 = #mano2_E1\r\n  Ncartas_1_E2 = #mano1_E2\r\n  Ncartas_2_E2 = #mano2_E2\r\n\r\n  -- Condición para poder recoger - 1 mano vacia\r\n  Cond_Manos = Ncartas_1_E1*Ncartas_2_E1*Ncartas_1_E2*Ncartas_2_E2\r\n\r\n  if Cond_Manos == 0 then\r\n\r\n    -- VARIABLES\r\n    puntosE1 = 0\r\n    puntosE2 = 0\r\n\r\n    puntosE1_mano1 = 0\r\n    puntosE1_mano2 = 0\r\n    puntosE2_mano1 = 0\r\n    puntosE2_mano2 = 0\r\n\r\n    puntosE1_mesa = 0\r\n    puntosE2_mesa = 0\r\n\r\n    -- PUNTOS TOTALES\r\n    contador_puntos_total_E1 = getObjectFromGUID(contador_puntos_total_E1_GUID)\r\n    contador_puntos_total_E2 = getObjectFromGUID(contador_puntos_total_E2_GUID)\r\n\r\n    puntos_total_E1 = contador_puntos_total_E1.getValue()\r\n    puntos_total_E2 = contador_puntos_total_E2.getValue()\r\n\r\n    -- PUNTOS EN LAS MANOS\r\n\r\n    print('')\r\n    print('J1_E1')\r\n    for k = 1,Ncartas_1_E1 do\r\n      carta          = mano1_E1[k]\r\n      carta_name     = carta.getName()\r\n      carta_valor    = carta.getDescription()\r\n      --print(carta_name)\r\n      --print(carta_valor)\r\n      puntosE1_mano1 = puntosE1_mano1 + carta_valor\r\n    end\r\n\r\n    print('')\r\n    print('J2_E1')\r\n    for k = 1,Ncartas_2_E1 do\r\n      carta          = mano2_E1[k]\r\n      carta_name     = carta.getName()\r\n      carta_valor    = carta.getDescription()\r\n      --print(carta_name)\r\n      --print(carta_valor)\r\n      puntosE1_mano2 = puntosE1_mano2 + carta_valor\r\n    end\r\n\r\n    print('')\r\n    print('J1_E2')\r\n    for k = 1,Ncartas_1_E2 do\r\n      carta          = mano1_E2[k]\r\n      carta_name     = carta.getName()\r\n      carta_valor    = carta.getDescription()\r\n      --print(carta_name)\r\n      --print(carta_valor)\r\n      puntosE2_mano1 = puntosE2_mano1 + carta_valor\r\n    end\r\n\r\n    print('')\r\n    print('J2_E2')\r\n    for k = 1,Ncartas_2_E2 do\r\n      carta          = mano2_E2[k]\r\n      carta_name     = carta.getName()\r\n      carta_valor    = carta.getDescription()\r\n      --print(carta_name)\r\n      --print(carta_valor)\r\n      puntosE2_mano2 = puntosE2_mano2 + carta_valor\r\n    end\r\n\r\n    -- PUNTOS EN MESA\r\n    mesaE1 = getObjectFromGUID(zonaCanastaE1_GUID)\r\n    mesaE2 = getObjectFromGUID(zonaCanastaE2_GUID)\r\n    mesaE1_cartas = mesaE1.getObjects()\r\n    mesaE2_cartas = mesaE2.getObjects()\r\n\r\n    NmesaE1 = #mesaE1_cartas\r\n    NmesaE2 = #mesaE2_cartas\r\n\r\n    for k = 1,NmesaE1 do\r\n      carta          = mesaE1_cartas[k]\r\n      carta_valor    = carta.getDescription()\r\n      puntosE1_mesa = puntosE1_mesa + carta_valor\r\n    end\r\n    for i = 1,NmesaE2 do\r\n      carta          = mesaE2_cartas[i]\r\n      carta_valor    = carta.getDescription()\r\n      puntosE2_mesa = puntosE2_mesa + carta_valor\r\n    end\r\n\r\n    -- PUNTOS EN CARTAS DE CANASTAS\r\n    -- EQUIPO 1\r\n    ZonaCerradaE1_C01 = getObjectFromGUID(zonaCerradaE1_C01_GUID)\r\n    ZonaCerradaE1_C02 = getObjectFromGUID(zonaCerradaE1_C02_GUID)\r\n    ZonaCerradaE1_C03 = getObjectFromGUID(zonaCerradaE1_C03_GUID)\r\n    ZonaCerradaE1_C04 = getObjectFromGUID(zonaCerradaE1_C04_GUID)\r\n    ZonaCerradaE1_C05 = getObjectFromGUID(zonaCerradaE1_C05_GUID)\r\n    ZonaCerradaE1_C06 = getObjectFromGUID(zonaCerradaE1_C06_GUID)\r\n    ZonaCerradaE1_C07 = getObjectFromGUID(zonaCerradaE1_C07_GUID)\r\n    ZonaCerradaE1_C08 = getObjectFromGUID(zonaCerradaE1_C08_GUID)\r\n    -- EQUIPO 2\r\n    ZonaCerradaE2_C01 = getObjectFromGUID(zonaCerradaE2_C01_GUID)\r\n    ZonaCerradaE2_C02 = getObjectFromGUID(zonaCerradaE2_C02_GUID)\r\n    ZonaCerradaE2_C03 = getObjectFromGUID(zonaCerradaE2_C03_GUID)\r\n    ZonaCerradaE2_C04 = getObjectFromGUID(zonaCerradaE2_C04_GUID)\r\n    ZonaCerradaE2_C05 = getObjectFromGUID(zonaCerradaE2_C05_GUID)\r\n    ZonaCerradaE2_C06 = getObjectFromGUID(zonaCerradaE2_C06_GUID)\r\n    ZonaCerradaE2_C07 = getObjectFromGUID(zonaCerradaE2_C07_GUID)\r\n    ZonaCerradaE2_C08 = getObjectFromGUID(zonaCerradaE2_C08_GUID)\r\n\r\n    zc1 = 'ZonaCerradaE'\r\n    zc2 = '_C0'\r\n\r\n    equipo = 1\r\n    cerrado_E1 = 0\r\n    cerrado_E2 = 0\r\n\r\n    -- PUNTOS EN CARTAS EN CANASTAS CERRADAS\r\n    for j = 1,2 do\r\n\r\n      puntosv = 'cerrado_E' .. j\r\n\r\n      -- Para cada uno de los 8 montones de canastas, contamos cartas\r\n      for k = 1,8 do\r\n\r\n        zc_name = zc1 .. j .. zc2 .. k\r\n        zc_objects = _G[zc_name].getObjects()\r\n        N_zc = #zc_objects\r\n\r\n        if N_zc > 2 then\r\n\r\n          obj_name = zc_objects[1].name\r\n\r\n          if obj_name ~= 'Deck' or obj_name ~= 'Card' then\r\n            obj_name = zc_objects[2].name\r\n            if obj_name == 'Deck' or obj_name == 'Card' then\r\n              mazo     = zc_objects[2]\r\n              tipomazo = obj_name\r\n            else\r\n              obj_name = zc_objects[3].name\r\n              mazo     = zc_objects[3]\r\n              tipomazo = obj_name\r\n            end\r\n          else\r\n            mazo = zc_objects[1]\r\n            tipomazo = obj_name\r\n          end\r\n\r\n          -- Contamos valores de cartas\r\n          if tipomazo == 'Deck' then\r\n            cartas = mazo.getObjects()\r\n            Ncmazo = #cartas\r\n            for i = 1,Ncmazo do\r\n              valor = cartas[i].description\r\n              if valor ~= '' then\r\n                _G[puntosv] = _G[puntosv] + valor\r\n              end\r\n            end\r\n          else\r\n            valor = mazo.getDescription()\r\n            _G[puntosv] = _G[puntosv] + valor\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n    end\r\n\r\n    -- PUNTOS DE CANASTAS CERRADAS Y FLORES\r\n    contador_puntos_canastas_E1 = getObjectFromGUID(contador_puntos_canastas_E1_GUID)\r\n    contador_puntos_canastas_E2 = getObjectFromGUID(contador_puntos_canastas_E2_GUID)\r\n\r\n    puntos_canastas_E1 = contador_puntos_canastas_E1.getValue()\r\n    puntos_canastas_E2 = contador_puntos_canastas_E2.getValue()\r\n\r\n    -- CONTABILIZAR QUIÉN HA TERMINADO LA RONDA\r\n    print(jugador_color)\r\n    if     jugador_color == 'Red' or jugador_color == 'Green' then\r\n      puntos_canastas_E2 = puntos_canastas_E2 + 100\r\n      contador_puntos_canastas_E2.setValue(puntos_canastas_E2)\r\n    elseif jugador_color == 'Blue' or jugador_color == 'Yellow' then\r\n      puntos_canastas_E1 = puntos_canastas_E1 + 100\r\n      contador_puntos_canastas_E1.setValue(puntos_canastas_E1 + 100)\r\n    end\r\n\r\n\r\n    -- DETECTAR SI SE HA CERRADO O NO\r\n    signoE1 = 1\r\n    if puntos_canastas_E1 <= 0 then\r\n      signoE1 = -1\r\n    end\r\n    signoE2 = 1\r\n    if puntos_canastas_E2 <= 0 then\r\n      signoE2 = -1\r\n    end\r\n\r\n\r\n    -- CONTABILIZAR PUNTOS\r\n    puntos_base_E1 = puntos_canastas_E1\r\n    puntos_mano_E1 = signoE1*(cerrado_E1 + puntosE1_mesa) - puntosE1_mano1 - puntosE1_mano2\r\n    puntos_base_E2 = puntos_canastas_E2\r\n    puntos_mano_E2 = signoE2*(cerrado_E2 + puntosE2_mesa) - puntosE2_mano1 - puntosE2_mano2\r\n\r\n    puntos_subtotal_E1 = puntos_base_E1 + puntos_mano_E1\r\n    puntos_subtotal_E2 = puntos_base_E2 + puntos_mano_E2\r\n\r\n    puntos_total_E1 = puntos_total_E1 + puntos_subtotal_E1\r\n    puntos_total_E2 = puntos_total_E2 + puntos_subtotal_E2\r\n\r\n\r\n    -- ACTUALIZAMOS CONTADORES TOTALES\r\n    contador_puntos_total_E1.setValue(puntos_total_E1)\r\n    contador_puntos_total_E2.setValue(puntos_total_E2)\r\n\r\n    -- PRESENTAMOS RESULTADOS\r\n    print('')\r\n    print('EQUIPO 1')\r\n    print('puntos_base_E1 = ',puntos_base_E1)\r\n    print('cerrado_E1 = ',cerrado_E1)\r\n    print('puntosE1_mesa = ',puntosE1_mesa)\r\n    print('puntosE1_mano1 = ',puntosE1_mano1)\r\n    print('puntosE1_mano2 = ',puntosE1_mano2)\r\n    print('puntos_mano_E1 = ',puntos_mano_E1)\r\n    print('puntos_subtotal_E1 = ',puntos_subtotal_E1)\r\n    print('puntos_total_E1 = ',puntos_total_E1)\r\n    print('')\r\n    print('EQUIPO 2')\r\n    print('puntos_base_E2 = ',puntos_base_E2)\r\n    print('cerrado_E2 = ',cerrado_E2)\r\n    print('puntosE2_mesa = ',puntosE2_mesa)\r\n    print('puntosE2_mano1 = ',puntosE2_mano1)\r\n    print('puntosE2_mano2 = ',puntosE2_mano2)\r\n    print('puntos_mano_E2 = ',puntos_mano_E2)\r\n    print('puntos_subtotal_E2 = ',puntos_subtotal_E2)\r\n    print('puntos_total_E2 = ',puntos_total_E2)\r\n\r\n    -- AÑADIR A BLOC DE NOTAS\r\n    -- Creamos variables de entrada\r\n    M_puntos_E1 = {}\r\n    M_puntos_E1[1] = puntos_base_E1\r\n    M_puntos_E1[2] = puntos_mano_E1\r\n    M_puntos_E1[3] = puntos_subtotal_E1\r\n    M_puntos_E1[4] = puntos_total_E1\r\n\r\n    M_puntos_E2 = {}\r\n    M_puntos_E2[1] = puntos_base_E2\r\n    M_puntos_E2[2] = puntos_mano_E2\r\n    M_puntos_E2[3] = puntos_subtotal_E2\r\n    M_puntos_E2[4] = puntos_total_E2\r\n\r\n    -- Llamamos a la función que genera los textos para bloc de notas\r\n    texto_escribir = puntos_ronda_notas(ronda,M_puntos_E1,M_puntos_E2)\r\n\r\n    if ronda == 1 then\r\n      -- Editamos block de notas\r\n      paramsE1 = {\r\n          index = 0,\r\n          title = \"PUNTOS\",\r\n          body = texto_escribir,\r\n          color = \"Grey\"\r\n      }\r\n      editNotebookTab(paramsE1)\r\n    else\r\n      -- BLoc de notas actual\r\n      tabInfo = getNotebookTabs()\r\n      txt_actual = tabInfo[1].body\r\n      texto_escribir = txt_actual .. '\\n' .. texto_escribir\r\n      -- Editamos block de notas\r\n      paramsE1 = {\r\n          index = 0,\r\n          title = \"PUNTOS\",\r\n          body = texto_escribir,\r\n          color = \"Grey\"\r\n      }\r\n      editNotebookTab(paramsE1)\r\n    end\r\n\r\n\r\n  else\r\n\r\n    printToAll('Ronda sin finalizar', {1,0,0})\r\n\r\n  end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/contar_puntos\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/texto_notas\nfunction puntos_ronda_notas(ronda,M_puntos_E1,M_puntos_E2)\r\n\r\n  -- Puntos de los equipos\r\n  puntos_base_E1     = M_puntos_E1[1]\r\n  puntos_mano_E1     = M_puntos_E1[2]\r\n  puntos_subtotal_E1 = M_puntos_E1[3]\r\n  puntos_total_E1    = M_puntos_E1[4]\r\n\r\n  puntos_base_E2     = M_puntos_E2[1]\r\n  puntos_mano_E2     = M_puntos_E2[2]\r\n  puntos_subtotal_E2 = M_puntos_E2[3]\r\n  puntos_total_E2    = M_puntos_E2[4]\r\n\r\n  -- Longitud de los números\r\n  N_E1_1 = string.len(puntos_base_E1)\r\n  N_E1_2 = string.len(puntos_mano_E1)\r\n  N_E1_3 = string.len(puntos_subtotal_E1)\r\n  N_E1_4 = string.len(puntos_total_E1)\r\n\r\n  N_E2_1 = string.len(puntos_base_E2)\r\n  N_E2_2 = string.len(puntos_mano_E2)\r\n  N_E2_3 = string.len(puntos_subtotal_E2)\r\n  N_E2_4 = string.len(puntos_total_E2)\r\n\r\n  -- Texto base\r\n  TBase = {}\r\n  TBase[1] = '----------------------------------------\\n--------------   RONDA ' .. ronda .. ' -------------\\n----------------------------------------\\n------------  EQUIPO 1 - EQUIPO 2 ---\\n'\r\n  TBase[2] = '        BASE:     '\r\n  TBase[3] = '      MANO:     '\r\n  TBase[4] = 'SUBTOTAL:     '\r\n  TBase[5] = '----------------------------------------\\n'\r\n  TBase[6] = '      TOTAL:     '\r\n  TBase[7] = '          '\r\n\r\n  -- Creamos números para rellenar en tabla\r\n\r\n  -- EQUIPO 1 --\r\n  if N_E1_1 == 1 then\r\n    TN_E1_1 = '   ' .. puntos_base_E1\r\n  elseif N_E1_1 == 2 then\r\n    TN_E1_1 = '  ' .. puntos_base_E1\r\n  elseif N_E1_1 == 3 then\r\n    TN_E1_1 = ' ' .. puntos_base_E1\r\n  elseif N_E1_1 == 4 then\r\n    TN_E1_1 = puntos_base_E1\r\n  end\r\n\r\n  if N_E1_2 == 1 then\r\n    TN_E1_2 = '   ' .. puntos_mano_E1\r\n  elseif N_E1_2 == 2 then\r\n    TN_E1_2 = '  ' .. puntos_mano_E1\r\n  elseif N_E1_2 == 3 then\r\n    TN_E1_2 = ' ' .. puntos_mano_E1\r\n  elseif N_E1_2 == 4 then\r\n    TN_E1_2 = puntos_mano_E1\r\n  end\r\n\r\n  if N_E1_3 == 1 then\r\n    TN_E1_3 = '   ' .. puntos_subtotal_E1\r\n  elseif N_E1_3 == 2 then\r\n    TN_E1_3 = '  ' .. puntos_subtotal_E1\r\n  elseif N_E1_3 == 3 then\r\n    TN_E1_3 = ' ' .. puntos_subtotal_E1\r\n  elseif N_E1_3 == 4 then\r\n    TN_E1_3 = puntos_subtotal_E1\r\n  end\r\n\r\n  if N_E1_4 == 1 then\r\n    TN_E1_4 = '   ' .. puntos_total_E1\r\n  elseif N_E1_4 == 2 then\r\n    TN_E1_4 = '  ' .. puntos_total_E1\r\n  elseif N_E1_4 == 3 then\r\n    TN_E1_4 = ' ' .. puntos_total_E1\r\n  elseif N_E1_4 == 4 then\r\n    TN_E1_4 = puntos_total_E1\r\n  end\r\n\r\n  -- EQUIPO 2 --\r\n  if N_E2_1 == 1 then\r\n    TN_E2_1 = '   ' .. puntos_base_E2\r\n  elseif N_E2_1 == 2 then\r\n    TN_E2_1 = '  ' .. puntos_base_E2\r\n  elseif N_E2_1 == 3 then\r\n    TN_E2_1 = ' ' .. puntos_base_E2\r\n  elseif N_E2_1 == 4 then\r\n    TN_E2_1 = puntos_base_E2\r\n  end\r\n\r\n  if N_E2_2 == 1 then\r\n    TN_E2_2 = '   ' .. puntos_mano_E2\r\n  elseif N_E2_2 == 2 then\r\n    TN_E2_2 = '  ' .. puntos_mano_E2\r\n  elseif N_E2_2 == 3 then\r\n    TN_E2_2 = ' ' .. puntos_mano_E2\r\n  elseif N_E2_2 == 4 then\r\n    TN_E2_2 = puntos_mano_E2\r\n  end\r\n\r\n  if N_E2_3 == 1 then\r\n    TN_E2_3 = '   ' .. puntos_subtotal_E2\r\n  elseif N_E2_3 == 2 then\r\n    TN_E2_3 = '  ' .. puntos_subtotal_E2\r\n  elseif N_E2_3 == 3 then\r\n    TN_E2_3 = ' ' .. puntos_subtotal_E2\r\n  elseif N_E2_3 == 4 then\r\n    TN_E2_3 = puntos_subtotal_E2\r\n  end\r\n\r\n  if N_E2_4 == 1 then\r\n    TN_E2_4 = '   ' .. puntos_total_E2\r\n  elseif N_E2_4 == 2 then\r\n    TN_E2_4 = '  ' .. puntos_total_E2\r\n  elseif N_E2_4 == 3 then\r\n    TN_E2_4 = ' ' .. puntos_total_E2\r\n  elseif N_E2_4 == 4 then\r\n    TN_E2_4 = puntos_total_E2\r\n  end\r\n\r\n  -- Creamos textos a escribir\r\n texto_a_escribir = TBase[1] .. TBase[2] .. TN_E1_1 .. TBase[7] .. TN_E2_1 .. '\\n'\r\n                 .. TBase[3] .. TN_E1_2 .. TBase[7] .. TN_E2_2 .. '\\n'\r\n                 .. TBase[4] .. TN_E1_3 .. TBase[7] .. TN_E2_3 .. '\\n'\r\n                 .. TBase[5]\r\n                 .. TBase[6] .. TN_E1_4 .. TBase[7] .. TN_E2_4 .. '\\n'\r\n                 .. TBase[5]\r\n\r\n  return texto_a_escribir\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/texto_notas\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='FINALIZAR\\nRONDA',\r\n    click_function='pulsar_boton_finalizar',\r\n    function_owner=self,\r\n    position={0,0.5,0},\r\n    height=400,\r\n    width=450,\r\n    font_size=90,\r\n    color={1,1,1},\r\n    tooltip = 'Finalizar ronda - Contar puntos',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton_finalizar(obj, color)\r\n\r\n  -- Detectamos jugador que pulsa\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  -- Detectamos si el jugador que pulsa no tiene cartas en mano\r\n  N_Cartas = Player[color].getHandCount()\r\n\r\n  if cond and N_Cartas == 0 then\r\n\r\n    -- CONTAMOS PUNTOS\r\n    contar_puntos(color)\r\n\r\n    -- FINALIZAMOS SISTEMA DE TURNOS\r\n    Turns.enable = false\r\n\r\n    -- DESAPARECEMOS BOTÓN\r\n    pos0 = self.getPosition()\r\n    self.setPosition({pos0[1],-1,pos0[3]})\r\n    self.setScale({0.01,0.01,0.01})\r\n\r\n  end\r\n\r\n\r\n\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "5d2de2"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 12.2428732,
        "posY": 0.253891945,
        "posZ": -11.7063255,
        "rotX": -6.406859E-07,
        "rotY": 180.015213,
        "rotZ": -1.35464717E-07,
        "scaleX": 0.01,
        "scaleY": 0.01,
        "scaleZ": 0.01
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0678792,
        "g": 0.3651263,
        "b": 0.03742451
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN FINALIZAR RONDA\r\n---------------------------------\r\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='EMPEZAR\\nRONDA',\r\n    click_function='pulsar_boton2',\r\n    function_owner=self,\r\n    position={0,0.5,0},\r\n    height=400,\r\n    width=450,\r\n    font_size=90,\r\n    color={1,1,1},\r\n    tooltip = 'Empezar ronda - Repartir',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton2()\r\n  print('Prueba')\r\nend",
      "LuaScriptState": "",
      "GUID": "ce0a1f"
    },
    {
      "Name": "Counter",
      "Transform": {
        "posX": -0.0510496162,
        "posY": 0.94125,
        "posZ": -21.3995781,
        "rotX": -7.316679E-07,
        "rotY": -0.00133017125,
        "rotZ": 3.12972759E-07,
        "scaleX": 0.625000358,
        "scaleY": 0.625000358,
        "scaleZ": 0.625000358
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0823529139,
        "g": 0.0823529139,
        "b": 0.0823529139
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a17f07"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 12.9333382,
        "posY": 1.458395,
        "posZ": 7.28452349,
        "rotX": 0.0,
        "rotY": 359.66684,
        "rotZ": 0.0,
        "scaleX": 11.1993494,
        "scaleY": 1.0,
        "scaleZ": 33.707222
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "4621af"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -12.7809229,
        "posY": 1.46,
        "posZ": -7.3005085,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 33.6899261,
        "scaleY": 1.0,
        "scaleZ": 11.0229836
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "90dfb9"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": -1.79225779,
        "posY": 0.0,
        "posZ": -9.002828,
        "rotX": 6.716513E-07,
        "rotY": 180.015244,
        "rotZ": 1.11855158E-07,
        "scaleX": 0.01,
        "scaleY": 0.01,
        "scaleZ": 0.01
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0678792,
        "g": 0.3651263,
        "b": 0.03742451
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN RECOGER MESA\r\n---------------------------------\r\n-- INCLUDES\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n-- JUGADORES\r\nJugador_1_E1 = Player[\"Blue\"]\r\nJugador_2_E1 = Player[\"Yellow\"]\r\nJugador_1_E2 = Player[\"Green\"]\r\nJugador_2_E2 = Player[\"Red\"]\r\n\r\nJugador_1_E1_color = \"Blue\"\r\nJugador_2_E1_color = \"Yellow\"\r\nJugador_1_E2_color = \"Green\"\r\nJugador_2_E2_color = \"Red\"\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_pos_sca\n\r\nboton_sortear_turnos_pos0  = {0.00, 4.88, 2.07}\r\nboton_corte_aleatorio_pos0 = {0.00, 4.88, 2.07}\r\nboton_repartir_cartas_pos0 = {0.00, 4.88, 2.07}\r\n\r\nboton_bloque_scale0 = {2.40, 1.00, 1.55}\r\nboton_bloque_rotac0 = {0.00, 180.00, 0.00}\r\n\r\nboton_recoger_pos0         = {-1.79, 1.46, -9.00}\r\nboton_finalizar_ronda_pos0 = {1.77, 1.46, -8.99}\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_pos_sca\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/recoger_mesa\nfunction recoger_mesa()\r\n\r\n  -- Salida\r\n  mesa_recogida = false\r\n\r\n  -- Objetos de la mesa\r\n  objetos_mesa = getAllObjects()\r\n  Nobjetos = #objetos_mesa\r\n\r\n  objetos_a_agrupar = {}\r\n  objetos_colocados = {}\r\n\r\n  -- Posición de zona del mazo de robo\r\n  Z_mazo_robo   = getObjectFromGUID(Z_mazo_robo_GUID)\r\n  pos_mazo_robo = Z_mazo_robo.getPosition()\r\n  rot_mazo_robo = Z_mazo_robo.getRotation()\r\n  -- Volteamos\r\n  rot_mazo_robo = {rot_mazo_robo[1], rot_mazo_robo[2], 180 }\r\n\r\n  -- Posición de zona del mazo de ocultas\r\n  Z_ocultas              = getObjectFromGUID(Z_marcador_ocultas_GUID)\r\n  pos_mazo_ocultas       = Z_ocultas.getPosition()\r\n  rot_mazo_ocultas       = Z_ocultas.getRotation()\r\n  -- Volteamos\r\n  rot_mazo_ocultas = {rot_mazo_ocultas[1], rot_mazo_ocultas[2], 0 }\r\n\r\n  -- Posición de zona del mazo de ocultas apoyadas\r\n  Z_ocultas_apoyo        = getObjectFromGUID(Z_marcador_ocultas_apoyo_GUID)\r\n  pos_mazo_ocultas_apoyo = Z_ocultas_apoyo.getPosition()\r\n  rot_mazo_ocultas_apoyo = Z_ocultas_apoyo.getRotation()\r\n  -- Volteamos\r\n  rot_mazo_ocultas_apoyo = {rot_mazo_ocultas_apoyo[1], rot_mazo_ocultas_apoyo[2], 0 }\r\n\r\n  -- Zona AUXILIAR\r\n  Z_auxiliar_01 = getObjectFromGUID(Z_auxiliar_01_GUID)\r\n  Z_auxiliar_01_pos = Z_auxiliar_01.getPosition()\r\n  Z_auxiliar_01_rot = Z_auxiliar_01.getRotation()\r\n\r\n  -- Vemos cuantas cartas hay en sus posiciones correctas\r\n  OBJ_mazo_robo     =  Z_mazo_robo.getObjects()\r\n  OBJ_ocultas       =  Z_ocultas.getObjects()\r\n  OBJ_ocultas_apoyo =  Z_ocultas_apoyo.getObjects()\r\n\r\n  N_OBJ_mazo_robo     = #OBJ_mazo_robo\r\n  N_OBJ_ocultas       = #OBJ_ocultas\r\n  N_OBJ_ocultas_apoyo = #OBJ_ocultas_apoyo\r\n\r\n  -- Manos de jugadores\r\n  mano_1_E1 = Jugador_1_E1.getHandObjects()\r\n  mano_2_E1 = Jugador_2_E1.getHandObjects()\r\n  mano_1_E2 = Jugador_1_E2.getHandObjects()\r\n  mano_2_E2 = Jugador_2_E2.getHandObjects()\r\n\r\n  N_mano_1_E1 = #mano_1_E1\r\n  N_mano_2_E1 = #mano_2_E1\r\n  N_mano_1_E2 = #mano_1_E2\r\n  N_mano_2_E2 = #mano_2_E2\r\n\r\n  print('N_mano_1_E1 = ',N_mano_1_E1)\r\n  print('N_mano_2_E1 = ',N_mano_2_E1)\r\n  print('N_mano_1_E2 = ',N_mano_1_E2)\r\n  print('N_mano_2_E2 = ',N_mano_2_E2)\r\n\r\n  if N_OBJ_mazo_robo ~= 0 then\r\n    OBJ_mazo_robo_name = OBJ_mazo_robo[1].name\r\n    if OBJ_mazo_robo_name == 'Deck' then\r\n      DECK_mazo_robo     = OBJ_mazo_robo[1].getObjects()\r\n      N_CARD_mazo_robo = #DECK_mazo_robo\r\n    else\r\n      N_CARD_mazo_robo = 1\r\n    end\r\n  else\r\n    N_CARD_mazo_robo = 0\r\n  end\r\n\r\n  if N_OBJ_ocultas ~= 0 then\r\n    OBJ_ocultas_name = OBJ_ocultas[1].name\r\n    if OBJ_ocultas_name == 'Deck' then\r\n      DECK_ocultas       = OBJ_ocultas[1].getObjects()\r\n      N_CARD_ocultas = #DECK_ocultas\r\n    else\r\n      N_CARD_ocultas = 1\r\n    end\r\n  else\r\n    N_CARD_ocultas = 0\r\n  end\r\n\r\n  if N_OBJ_ocultas_apoyo ~= 0 then\r\n    OBJ_ocultas_apoyo_name = OBJ_ocultas_apoyo[1].name\r\n    if OBJ_ocultas_apoyo_name == 'Deck' then\r\n      CARD_ocultas_apoyo = OBJ_ocultas_apoyo[1].getObjects()\r\n      N_CARD_ocultas_apoyo = #CARD_ocultas_apoyo\r\n    else\r\n      N_CARD_ocultas_apoyo = 1\r\n    end\r\n  else\r\n    N_CARD_ocultas_apoyo = 0\r\n  end\r\n\r\n  print('N_CARD_mazo_robo = ',N_CARD_mazo_robo)\r\n  print('N_CARD_ocultas = ',N_CARD_ocultas)\r\n  print('N_CARD_ocultas_apoyo = ',N_CARD_ocultas_apoyo)\r\n\r\n\r\n  -- Condición para poder recoger - 1 mano vacia\r\n  Cond_Manos = N_mano_1_E1*N_mano_2_E1*N_mano_1_E2*N_mano_2_E2\r\n\r\n  if (N_CARD_mazo_robo ~= 108 or N_CARD_ocultas ~= 4\r\n      or N_CARD_ocultas_apoyo ~= 4) and Cond_Manos == 0 then\r\n\r\n      printToAll('Ordenando mesa',{1,0,0})\r\n\r\n      kk  = 1\r\n      kkC1 = 1\r\n      kkC2 = 1\r\n      kkC3 = 1\r\n\r\n      -- Encontrar/Localizar cartas / mazos a colocar en su sitio\r\n      for k = 1,Nobjetos do\r\n        objeto_nombre = objetos_mesa[k].name\r\n        objeto_location = objetos_mesa[k].getPosition()\r\n\r\n        if objeto_nombre == 'Card' or objeto_nombre == 'CardCustom' or objeto_nombre == 'Deck' then\r\n\r\n          -- Localizamos objetos que ya están en su sitio\r\n          x_obj = objeto_location[1]\r\n          y_obj = objeto_location[2]\r\n          z_obj = objeto_location[3]\r\n\r\n          -- Mazo de robo\r\n          cond1X = x_obj >= (pos_mazo_robo[1] - 0.1) and x_obj <= (pos_mazo_robo[1] + 0.1)\r\n          cond1Z = z_obj >= (pos_mazo_robo[3] - 0.1) and z_obj <= (pos_mazo_robo[3] + 0.1)\r\n          -- Mazo de marcadores de ocultas\r\n          cond2X = x_obj >= (pos_mazo_ocultas[1] - 0.1) and x_obj <= (pos_mazo_ocultas[1] + 0.1)\r\n          cond2Z = z_obj >= (pos_mazo_ocultas[3] - 0.1) and z_obj <= (pos_mazo_ocultas[3] + 0.1)\r\n          -- Mazo de marcadores de ocultas apoyadas\r\n          cond3X = x_obj >= (pos_mazo_ocultas_apoyo[1] - 0.1) and x_obj <= (pos_mazo_ocultas_apoyo[1] + 0.1)\r\n          cond3Z = z_obj >= (pos_mazo_ocultas_apoyo[3] - 0.1) and z_obj <= (pos_mazo_ocultas_apoyo[3] + 0.1)\r\n\r\n          if cond1X and cond1Z then\r\n            objetos_colocados[kkC1] = k\r\n            kkC1 = kkC1 + 1\r\n          elseif cond2X and cond2Z then\r\n            objetos_colocados[kkC2] = k\r\n            kkC2 = kkC2 + 1\r\n          elseif cond3X and cond3Z then\r\n            objetos_colocados[kkC3] = k\r\n            kkC3 = kkC3 + 1\r\n          else\r\n            objetos_a_agrupar[kk] = k\r\n            kk = kk + 1\r\n          end\r\n\r\n        end\r\n      end\r\n\r\n      -- print('kk = ',kk-1)\r\n      -- print('kkC1 = ',kkC1-1)\r\n      -- print('kkC2 = ',kkC2-1)\r\n      -- print('kkC3 = ',kkC3-1)\r\n\r\n\r\n      -- Conteo de cartas actual\r\n      Cont_Robo         = N_CARD_mazo_robo\r\n      Cont_Ocultas      = N_CARD_ocultas\r\n      Cont_Ocultas_Apoy = N_CARD_ocultas_apoyo\r\n\r\n\r\n      -- Recorremos objetos encontrados que no están colocados\r\n      for i = 1,(kk-1) do\r\n\r\n        objeto = objetos_mesa[objetos_a_agrupar[i]]\r\n        objeto_nombre = objeto.name\r\n\r\n        -- Objeto encontrado tipo Mazo -> Coger cartas\r\n        if objeto_nombre == 'Deck' then\r\n\r\n          mazo    = objeto.getObjects()\r\n          Ncartas = #mazo\r\n          objeto.setLock(false)\r\n\r\n          for j = 1,Ncartas do\r\n\r\n            carta_name = mazo[j].name\r\n\r\n            if carta_name == 'Oculta' then\r\n              if Cont_Ocultas == 0 then\r\n                param = {position = pos_mazo_ocultas,\r\n                         rotation = rot_mazo_ocultas,\r\n                         index = 1,\r\n                         callback_function = function(obj) mover_carta_a_monton_vacio(obj,pos_mazo_ocultas,rot_mazo_ocultas) end,\r\n                         }\r\n                objeto.takeObject(param)\r\n              else\r\n                param = {position = pos_mazo_ocultas,\r\n                         rotation = rot_mazo_ocultas,\r\n                         index = 1,\r\n                         callback_function = function(obj) mover_carta_a_monton(obj,OBJ_ocultas[1]) end,\r\n                         }\r\n                objeto.takeObject(param)\r\n              end\r\n              Cont_Ocultas = Cont_Ocultas + 1\r\n            elseif carta_name == 'Oculta Apoyada' then\r\n              if Cont_Ocultas_Apoy == 0 then\r\n                param = {position = pos_mazo_ocultas_apoyo,\r\n                         rotation = rot_mazo_ocultas_apoyo,\r\n                         index = 1,\r\n                         callback_function = function(obj) mover_carta_a_monton_vacio(obj,pos_mazo_ocultas_apoyo,rot_mazo_ocultas_apoyo) end,\r\n                         }\r\n                objeto.takeObject(param)\r\n              else\r\n                param = {position = pos_mazo_ocultas_apoyo,\r\n                         rotation = rot_mazo_ocultas_apoyo,\r\n                         index = 1,\r\n                         callback_function = function(obj) mover_carta_a_monton(obj,OBJ_ocultas_apoyo[1]) end,\r\n                         }\r\n                objeto.takeObject(param)\r\n              end\r\n\r\n              Cont_Ocultas_Apoy = Cont_Ocultas_Apoy + 1\r\n            else\r\n              if Cont_Robo == 0 then\r\n                param = {position = pos_mazo_robo,\r\n                         rotation = rot_mazo_robo,\r\n                         index = 1,\r\n                         callback_function = function(obj) mover_carta_a_monton_vacio(obj,pos_mazo_robo,rot_mazo_robo) end,\r\n                         }\r\n                objeto.takeObject(param)\r\n              else\r\n                param = {position = pos_mazo_robo,\r\n                         rotation = rot_mazo_robo,\r\n                         index = 1,\r\n                         callback_function = function(obj) mover_carta_a_monton(obj,OBJ_mazo_robo[1]) end,\r\n                         }\r\n                objeto.takeObject(param)\r\n              end\r\n              Cont_Robo = Cont_Robo + 1\r\n            end\r\n\r\n          end\r\n\r\n        -- Objeto encontrado tipo Carta\r\n        elseif objeto_nombre == 'Card' or objeto_nombre == 'CardCustom'  then\r\n\r\n          carta_name = objeto.getName()\r\n\r\n          if carta_name == 'Oculta' then\r\n            objeto.setLock(false)\r\n            if Cont_Ocultas == 0 then\r\n              objeto.setPosition(pos_mazo_ocultas)\r\n              objeto.setRotation(rot_mazo_ocultas)\r\n            else\r\n              mazo = OBJ_ocultas[1]\r\n              mazo.putObject(objeto)\r\n            end\r\n            Cont_Ocultas = Cont_Ocultas + 1\r\n\r\n          elseif carta_name == 'Oculta Apoyada' then\r\n            objeto.setLock(false)\r\n            if Cont_Ocultas_Apoy == 0 then\r\n              objeto.setPosition(pos_mazo_ocultas_apoyo)\r\n              objeto.setRotation(rot_mazo_ocultas_apoyo)\r\n            else\r\n              mazo = OBJ_ocultas_apoyo[1]\r\n              mazo.putObject(objeto)\r\n            end\r\n            Cont_Ocultas_Apoy = Cont_Ocultas_Apoy + 1\r\n\r\n          else\r\n            objeto.setLock(false)\r\n            if Cont_Robo == 0 then\r\n              objeto.setPosition(pos_mazo_robo)\r\n              objeto.setRotation(rot_mazo_robo)\r\n            else\r\n              mazo = OBJ_mazo_robo[1]\r\n              mazo.putObject(objeto)\r\n            end\r\n            Cont_Robo = Cont_Robo + 1\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      mesa_recogida = true\r\n\r\n  elseif N_CARD_mazo_robo == 108 and N_CARD_ocultas == 4 and N_CARD_ocultas_apoyo == 4 then\r\n    printToAll('Mesa ordenada', {0,1,0})\r\n  elseif Cond_Manos ~= 0 then\r\n    printToAll('No se puede recoger la mesa', {1,0,0})\r\n  end\r\n\r\nreturn mesa_recogida\r\n\r\nend\r\n\r\nfunction mover_carta_a_monton_vacio(obj,pos,rot)\r\n    obj.setPosition(pos)\r\n    obj.setRotation(rot)\r\nend\r\n\r\nfunction mover_carta_a_monton(obj, mazo)\r\n    mazo.putObject(obj)\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/recoger_mesa\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/resetear_mesa\nfunction reset_table(mesa_recogida)\r\n\r\n  if mesa_recogida then\r\n\r\n    -- CONTADOR PUNTOS CANASTAS --\r\n    contador_puntos_canastas_E1 = getObjectFromGUID(contador_puntos_canastas_E1_GUID)\r\n    contador_puntos_canastas_E2 = getObjectFromGUID(contador_puntos_canastas_E2_GUID)\r\n\r\n    -- CONTADOR PUNTOS TOTALES --\r\n    contador_puntos_total_E1 = getObjectFromGUID(contador_puntos_total_E1_GUID)\r\n    contador_puntos_total_E2 = getObjectFromGUID(contador_puntos_total_E2_GUID)\r\n\r\n    -- CONTADOR RONDA\r\n    contador_ronda = getObjectFromGUID(contador_ronda_GUID)\r\n    ronda = contador_ronda.getValue()\r\n\r\n    -- TEXTOS CANASTA EQUIPO 1\r\n    canasta_tipo_E1_C01 = getObjectFromGUID(canasta_tipo_E1_C01_GUID)\r\n    canasta_tipo_E1_C02 = getObjectFromGUID(canasta_tipo_E1_C02_GUID)\r\n    canasta_tipo_E1_C03 = getObjectFromGUID(canasta_tipo_E1_C03_GUID)\r\n    canasta_tipo_E1_C04 = getObjectFromGUID(canasta_tipo_E1_C04_GUID)\r\n    canasta_tipo_E1_C05 = getObjectFromGUID(canasta_tipo_E1_C05_GUID)\r\n    canasta_tipo_E1_C06 = getObjectFromGUID(canasta_tipo_E1_C06_GUID)\r\n    canasta_tipo_E1_C07 = getObjectFromGUID(canasta_tipo_E1_C07_GUID)\r\n    canasta_tipo_E1_C08 = getObjectFromGUID(canasta_tipo_E1_C08_GUID)\r\n    canasta_tipo_E1_C09 = getObjectFromGUID(canasta_tipo_E1_C09_GUID)\r\n\r\n    -- TEXTOS CANASTA EQUIPO 1\r\n    canasta_tipo_E2_C01 = getObjectFromGUID(canasta_tipo_E2_C01_GUID)\r\n    canasta_tipo_E2_C02 = getObjectFromGUID(canasta_tipo_E2_C02_GUID)\r\n    canasta_tipo_E2_C03 = getObjectFromGUID(canasta_tipo_E2_C03_GUID)\r\n    canasta_tipo_E2_C04 = getObjectFromGUID(canasta_tipo_E2_C04_GUID)\r\n    canasta_tipo_E2_C05 = getObjectFromGUID(canasta_tipo_E2_C05_GUID)\r\n    canasta_tipo_E2_C06 = getObjectFromGUID(canasta_tipo_E2_C06_GUID)\r\n    canasta_tipo_E2_C07 = getObjectFromGUID(canasta_tipo_E2_C07_GUID)\r\n    canasta_tipo_E2_C08 = getObjectFromGUID(canasta_tipo_E2_C08_GUID)\r\n    canasta_tipo_E2_C09 = getObjectFromGUID(canasta_tipo_E2_C09_GUID)\r\n\r\n    -- BASE CANASTA EQUIPO 1 --\r\n    bloque_canasta_E1_C01 = getObjectFromGUID(bloque_canasta_E1_C01_GUID)\r\n    bloque_canasta_E1_C02 = getObjectFromGUID(bloque_canasta_E1_C02_GUID)\r\n    bloque_canasta_E1_C03 = getObjectFromGUID(bloque_canasta_E1_C03_GUID)\r\n    bloque_canasta_E1_C04 = getObjectFromGUID(bloque_canasta_E1_C04_GUID)\r\n    bloque_canasta_E1_C05 = getObjectFromGUID(bloque_canasta_E1_C05_GUID)\r\n    bloque_canasta_E1_C06 = getObjectFromGUID(bloque_canasta_E1_C06_GUID)\r\n    bloque_canasta_E1_C07 = getObjectFromGUID(bloque_canasta_E1_C07_GUID)\r\n    bloque_canasta_E1_C08 = getObjectFromGUID(bloque_canasta_E1_C08_GUID)\r\n\r\n    -- BASE CANASTA EQUIPO 2 --\r\n    bloque_canasta_E2_C01 = getObjectFromGUID(bloque_canasta_E2_C01_GUID)\r\n    bloque_canasta_E2_C02 = getObjectFromGUID(bloque_canasta_E2_C02_GUID)\r\n    bloque_canasta_E2_C03 = getObjectFromGUID(bloque_canasta_E2_C03_GUID)\r\n    bloque_canasta_E2_C04 = getObjectFromGUID(bloque_canasta_E2_C04_GUID)\r\n    bloque_canasta_E2_C05 = getObjectFromGUID(bloque_canasta_E2_C05_GUID)\r\n    bloque_canasta_E2_C06 = getObjectFromGUID(bloque_canasta_E2_C06_GUID)\r\n    bloque_canasta_E2_C07 = getObjectFromGUID(bloque_canasta_E2_C07_GUID)\r\n    bloque_canasta_E2_C08 = getObjectFromGUID(bloque_canasta_E2_C08_GUID)\r\n\r\n    -- BASE CANASTA TIPO - EQUIPO 1 -\r\n    bloque_canasta_tipo_E1_C01 = getObjectFromGUID(bloque_canasta_tipo_E1_C01_GUID)\r\n    bloque_canasta_tipo_E1_C02 = getObjectFromGUID(bloque_canasta_tipo_E1_C02_GUID)\r\n    bloque_canasta_tipo_E1_C03 = getObjectFromGUID(bloque_canasta_tipo_E1_C03_GUID)\r\n    bloque_canasta_tipo_E1_C04 = getObjectFromGUID(bloque_canasta_tipo_E1_C04_GUID)\r\n    bloque_canasta_tipo_E1_C05 = getObjectFromGUID(bloque_canasta_tipo_E1_C05_GUID)\r\n    bloque_canasta_tipo_E1_C06 = getObjectFromGUID(bloque_canasta_tipo_E1_C06_GUID)\r\n    bloque_canasta_tipo_E1_C07 = getObjectFromGUID(bloque_canasta_tipo_E1_C07_GUID)\r\n    bloque_canasta_tipo_E1_C08 = getObjectFromGUID(bloque_canasta_tipo_E1_C08_GUID)\r\n\r\n    -- BASE CANASTA TIPO - EQUIPO 2 -\r\n    bloque_canasta_tipo_E2_C01 = getObjectFromGUID(bloque_canasta_tipo_E2_C01_GUID)\r\n    bloque_canasta_tipo_E2_C02 = getObjectFromGUID(bloque_canasta_tipo_E2_C02_GUID)\r\n    bloque_canasta_tipo_E2_C03 = getObjectFromGUID(bloque_canasta_tipo_E2_C03_GUID)\r\n    bloque_canasta_tipo_E2_C04 = getObjectFromGUID(bloque_canasta_tipo_E2_C04_GUID)\r\n    bloque_canasta_tipo_E2_C05 = getObjectFromGUID(bloque_canasta_tipo_E2_C05_GUID)\r\n    bloque_canasta_tipo_E2_C06 = getObjectFromGUID(bloque_canasta_tipo_E2_C06_GUID)\r\n    bloque_canasta_tipo_E2_C07 = getObjectFromGUID(bloque_canasta_tipo_E2_C07_GUID)\r\n    bloque_canasta_tipo_E2_C08 = getObjectFromGUID(bloque_canasta_tipo_E2_C08_GUID)\r\n\r\n    if ronda >= 1 then\r\n\r\n    -- PONEMOS PUNTOS DE CONTADORES DE CANASTAS A CERO\r\n    contador_puntos_canastas_E1.setValue(0)\r\n    contador_puntos_canastas_E2.setValue(0)\r\n\r\n    elseif ronda == 0 then\r\n\r\n      -- PONEMOS PUNTOS DE TODOS LOS CONTADORES A CERO\r\n      contador_puntos_canastas_E1.setValue(0)\r\n      contador_puntos_canastas_E2.setValue(0)\r\n      contador_puntos_total_E1.setValue(0)\r\n      contador_puntos_total_E2.setValue(0)\r\n\r\n    end\r\n\r\n    -- PASAMOS DE RONDA\r\n    contador_ronda.setValue(ronda+1)\r\n\r\n    -- RESETEAMOS COLORES DE BASES DE CANASTA Y TEXTOS\r\n    for i = 1,2 do\r\n      for j = 1,8 do\r\n        bloque = 'bloque_canasta_E' .. i .. '_C0' .. j\r\n        bloque_tipo = 'bloque_canasta_tipo_E' .. i .. '_C0' .. j\r\n        _G[bloque].setColorTint({0.7,0.7,0.7})\r\n        _G[bloque_tipo].setColorTint({0.7,0.7,0.7})\r\n      end\r\n    end\r\n\r\n    for i = 1,2 do\r\n      for j = 1,9 do\r\n        txt_gui = 'canasta_tipo_E' .. i .. '_C0' .. j\r\n        _G[txt_gui].setValue(' ')\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/resetear_mesa\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='RECOGER',\r\n    click_function='pulsar_boton_recoger',\r\n    function_owner=self,\r\n    position={0,0.5,0},\r\n    height=400,\r\n    width=450,\r\n    font_size=90,\r\n    color={1,1,1},\r\n    tooltip = 'Recoger mesa y resetear zonas',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton_recoger()\r\n\r\n  -- Recogemos cartas\r\n  mesa_recogida = recoger_mesa()\r\n\r\n  -- Reseteamos mesa y pasamos de ronda\r\n  reset_table(mesa_recogida)\r\n\r\n  if mesa_recogida then\r\n    -- Volvemos a hacer aparecer el botón de corte\r\n    boton_corte_aleatorio = getObjectFromGUID(boton_corte_aleatorio_GUID)\r\n    boton_corte_aleatorio.setPosition(boton_corte_aleatorio_pos0)\r\n    boton_corte_aleatorio.setScale(boton_bloque_scale0)\r\n\r\n    -- Reactivamos el sistema de turnos pasando el turno del texto\r\n    texto_primer_turno = getObjectFromGUID(texto_primer_turno_GUID)\r\n    turno_inicial = texto_primer_turno.TextTool.getValue()\r\n\r\n    turno_orden_S = {'Red','Blue','Green','Yellow'}\r\n\r\n    if     turno_inicial == turno_orden_S[1] then\r\n      turno_inicial_NEW = turno_orden_S[2]\r\n    elseif turno_inicial == turno_orden_S[2] then\r\n      turno_inicial_NEW = turno_orden_S[3]\r\n    elseif turno_inicial == turno_orden_S[3] then\r\n      turno_inicial_NEW = turno_orden_S[4]\r\n    elseif turno_inicial == turno_orden_S[4] then\r\n      turno_inicial_NEW = turno_orden_S[1]\r\n    end\r\n\r\n    texto_primer_turno.setValue(turno_inicial_NEW)\r\n    activar_sistema_turnos(turno_inicial_NEW)\r\n\r\n    -- DESAPARECEMOS BOTÓN\r\n    pos0 = self.getPosition()\r\n    self.setPosition({pos0[1],-1,pos0[3]})\r\n    self.setScale({0.01,0.01,0.01})\r\n\r\n    -- VOLVEMOS A PONER PUNTOS A CERO DE CANASTAS/FLORES POR SI ACASO\r\n    contador_puntos_canastas_E1 = getObjectFromGUID(contador_puntos_canastas_E1_GUID)\r\n    contador_puntos_canastas_E2 = getObjectFromGUID(contador_puntos_canastas_E2_GUID)\r\n    contador_puntos_canastas_E1.setValue(0)\r\n    contador_puntos_canastas_E2.setValue(0)\r\n\r\n  end\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "07ba83"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 8.697875,
        "posY": 0.51,
        "posZ": -21.603796,
        "rotX": 2.03435093E-07,
        "rotY": 89.99898,
        "rotZ": -4.407698E-07,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "06faf3"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 8.7,
        "posY": 0.51,
        "posZ": -18.7021484,
        "rotX": -1.47950871E-07,
        "rotY": 89.99898,
        "rotZ": -6.576112E-08,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "2c848f"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 13.0,
        "posY": 0.51,
        "posZ": -18.7,
        "rotX": 5.688003E-08,
        "rotY": 89.99897,
        "rotZ": -1.877828E-07,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f83701"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 17.3,
        "posY": 0.51,
        "posZ": -18.7,
        "rotX": -5.300228E-07,
        "rotY": 90.00001,
        "rotZ": -4.51559643E-08,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d6844a"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 21.6,
        "posY": 0.51,
        "posZ": -18.7,
        "rotX": -6.88142254E-09,
        "rotY": 90.0000153,
        "rotZ": -1.64252015E-07,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "39ce4c"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 13.0,
        "posY": 0.51,
        "posZ": -21.6,
        "rotX": 3.704303E-08,
        "rotY": 89.99897,
        "rotZ": -1.96161576E-08,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "b35dc9"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 17.3,
        "posY": 0.51,
        "posZ": -21.6,
        "rotX": -1.13300809E-08,
        "rotY": 89.99897,
        "rotZ": 5.282867E-09,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "eb0137"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 21.6,
        "posY": 0.51,
        "posZ": -21.6,
        "rotX": 8.936393E-09,
        "rotY": 89.99897,
        "rotZ": 2.43312268E-08,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "095259"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -8.7,
        "posY": 0.51,
        "posZ": 18.7,
        "rotX": -3.059053E-07,
        "rotY": 89.9975,
        "rotZ": 3.44588429E-08,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a36fe2"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -13.0,
        "posY": 0.51,
        "posZ": 18.7,
        "rotX": 1.07839533E-07,
        "rotY": 90.01593,
        "rotZ": -1.42614439E-07,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "ce3a1f"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -17.3,
        "posY": 0.51,
        "posZ": 18.7,
        "rotX": -8.855458E-08,
        "rotY": 89.99897,
        "rotZ": -1.41289775E-07,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d426db"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -21.6,
        "posY": 0.51,
        "posZ": 18.7,
        "rotX": -5.72939074E-09,
        "rotY": 89.99897,
        "rotZ": -5.982945E-08,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "095776"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -8.7,
        "posY": 0.51,
        "posZ": 21.6,
        "rotX": -3.53387151E-08,
        "rotY": 89.99897,
        "rotZ": -9.61584146E-09,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "809966"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -13.0,
        "posY": 0.51,
        "posZ": 21.6,
        "rotX": 1.11853936E-07,
        "rotY": 89.9996262,
        "rotZ": 1.291453E-07,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "6a1079"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -17.3,
        "posY": 0.51,
        "posZ": 21.6,
        "rotX": -3.49983154E-08,
        "rotY": 89.9999847,
        "rotZ": 180.0,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "073759"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": -21.6,
        "posY": 0.51,
        "posZ": 21.6,
        "rotX": 3.08778674E-08,
        "rotY": 89.99896,
        "rotZ": -4.970002E-07,
        "scaleX": 2.40451217,
        "scaleY": 1.0,
        "scaleZ": 1.84901345
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7,
        "g": 0.7,
        "b": 0.7
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "c9fede"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -1.5604068,
        "posY": 5.024892,
        "posZ": -1.98503244,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 2.25893044,
        "scaleY": 1.26611519,
        "scaleZ": 3.459164
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d5fc5d"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 1.49636579,
        "posY": 4.962115,
        "posZ": -1.97542059,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 2.2754364,
        "scaleY": 1.1536622,
        "scaleZ": 3.45237136
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "5d0d4e"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -0.0381288528,
        "posY": 4.6920743,
        "posZ": 2.17744613,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.33665657,
        "scaleY": 0.5358775,
        "scaleZ": 3.51691556
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a5e227"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -2.13263488,
        "posY": 1.293361,
        "posZ": 24.0542641,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.25083828,
        "scaleY": 0.6666093,
        "scaleZ": 3.46176863
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e0d23b"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 2.132545,
        "posY": 1.30032778,
        "posZ": 24.05297,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 2.25624418,
        "scaleY": 0.6783858,
        "scaleZ": 3.43823266
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "3670f3"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 0.0,
        "posY": 0.0,
        "posZ": 10.0,
        "rotX": -1.25661472E-06,
        "rotY": 180.015213,
        "rotZ": 1.73690722E-07,
        "scaleX": 0.01,
        "scaleY": 0.01,
        "scaleZ": 0.01
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0678792,
        "g": 0.3651263,
        "b": 0.03742451
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN RECOGER MESA\r\n---------------------------------\r\n-- INCLUDES\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n-- JUGADORES\r\nJugador_1_E1 = Player[\"Blue\"]\r\nJugador_2_E1 = Player[\"Yellow\"]\r\nJugador_1_E2 = Player[\"Green\"]\r\nJugador_2_E2 = Player[\"Red\"]\r\n\r\nJugador_1_E1_color = \"Blue\"\r\nJugador_2_E1_color = \"Yellow\"\r\nJugador_1_E2_color = \"Green\"\r\nJugador_2_E2_color = \"Red\"\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_pos_sca\n\r\nboton_sortear_turnos_pos0  = {0.00, 4.88, 2.07}\r\nboton_corte_aleatorio_pos0 = {0.00, 4.88, 2.07}\r\nboton_repartir_cartas_pos0 = {0.00, 4.88, 2.07}\r\n\r\nboton_bloque_scale0 = {2.40, 1.00, 1.55}\r\nboton_bloque_rotac0 = {0.00, 180.00, 0.00}\r\n\r\nboton_recoger_pos0         = {-1.79, 1.46, -9.00}\r\nboton_finalizar_ronda_pos0 = {1.77, 1.46, -8.99}\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_pos_sca\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/repartir_cartas\nfunction reparto_de_cartas(turno_inicial,mazo_corte,mazo_reparto)\r\n\r\n  -- MAZO DE ROBO\r\n  Z_mazo_robo     = getObjectFromGUID(Z_mazo_robo_GUID)\r\n\r\n  -- MONTÓN OCULTO\r\n  Z_monton_oculto = getObjectFromGUID(Z_monton_oculto_GUID)\r\n  Z_monton_oculto_pos = Z_monton_oculto.getPosition()\r\n  Z_monton_oculto_rot = Z_monton_oculto.getRotation()\r\n  Z_monton_oculto_rot = {Z_monton_oculto_rot[1],Z_monton_oculto_rot[2],180.00}\r\n\r\n  -- MAZO DE DESCARTE\r\n  Z_mazo_descarte = getObjectFromGUID(Z_mazo_descarte_GUID)\r\n  Z_mazo_descarte_pos = Z_mazo_descarte.getPosition()\r\n  Z_mazo_descarte_rot0 = Z_mazo_descarte.getRotation()\r\n  Z_mazo_descarte_rot = {Z_mazo_descarte_rot0[1],Z_mazo_descarte_rot0[2],180.00}\r\n\r\n  -- Turnos\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  -- Detectar orden de reparto\r\n  if     turno_inicial == turno_orden_1[1] then\r\n    orden_reparto = turno_orden_3\r\n  elseif turno_inicial == turno_orden_2[1] then\r\n    orden_reparto = turno_orden_4\r\n  elseif turno_inicial == turno_orden_3[1] then\r\n    orden_reparto = turno_orden_1\r\n  elseif turno_inicial == turno_orden_4[1] then\r\n    orden_reparto = turno_orden_2\r\n  end\r\n\r\n  -- Manos de jugadores\r\n  mano_11 = Player[orden_reparto[1]].getHandObjects()\r\n  mano_22 = Player[orden_reparto[2]].getHandObjects()\r\n  mano_12 = Player[orden_reparto[3]].getHandObjects()\r\n  mano_22 = Player[orden_reparto[4]].getHandObjects()\r\n\r\n  N_mano_11 = #mano_11\r\n  N_mano_21 = #mano_22\r\n  N_mano_12 = #mano_12\r\n  N_mano_22 = #mano_22\r\n\r\n  N_Restantes_mano_11 = 13 - N_mano_11\r\n  N_Restantes_mano_21 = 13 - N_mano_21\r\n  N_Restantes_mano_12 = 13 - N_mano_12\r\n  N_Restantes_mano_22 = 13 - N_mano_22\r\n  N_Restantes = (13*4 + 7) - N_mano_11 - N_mano_21 - N_mano_12 - N_mano_22\r\n\r\n  print('N_Restantes = ',N_Restantes)\r\n\r\n  N_Restantes_T = {N_Restantes_mano_11,N_Restantes_mano_21,\r\n                   N_Restantes_mano_12,N_Restantes_mano_22}\r\n\r\n  N_cartas_reparto  = #mazo_reparto.getObjects()\r\n  N_cartas_corte    = #mazo_corte.getObjects()\r\n  print('N_cartas_reparto = ', N_cartas_reparto)\r\n  print('N_cartas_corte = '  , N_cartas_corte)\r\n\r\n  -- Corte perfecto\r\n  corte_perfecto = 0\r\n  if N_cartas_reparto == N_Restantes then\r\n    printToAll('¡CORTE PERFECTO!', {1,0,0})\r\n    broadcastToAll('¡CORTE PERFECTO!', {1,0,0})\r\n    corte_perfecto = 50\r\n  end\r\n\r\n  -- Ponemos mazo de corte provisionalmente aparte\r\n  mazo_corte.setPosition({1.47, 4.59, -2.09})\r\n  mazo_corte.setRotation({0.00, 180.00, 180.00})\r\n\r\n  -- Juntamos mazo de reparto encima del mazo de corte\r\n  mazo_reparto.putObject(mazo_corte)\r\n\r\n  -- Empezamos reparto a jugadores\r\n\r\n  restante   = 52 - N_mano_11 - N_mano_21 - N_mano_12 - N_mano_22\r\n\r\n  contadores = {N_mano_11,N_mano_21,N_mano_12,N_mano_22}\r\n  orden_i = 1\r\n\r\n  while restante > 0 do\r\n\r\n    -- Color jugador\r\n    color_j = orden_reparto[orden_i]\r\n\r\n    -- Chequeamos si jugador tiene las 13 cartas ya\r\n    contador_cartas = contadores[orden_i]\r\n\r\n    if contador_cartas < 13 then\r\n      deal_card(mazo_reparto,color_j)\r\n      restante = restante - 1\r\n      contadores[orden_i] = contadores[orden_i] + 1\r\n    end\r\n\r\n    if orden_i == 4 then\r\n      orden_i = 1\r\n    else\r\n      orden_i = orden_i + 1\r\n    end\r\n\r\n  end\r\n\r\n\r\n  -- Ponemos primera carta del montón oculto\r\n  paramN = {position = Z_monton_oculto_pos,\r\n            rotation = Z_monton_oculto_rot,\r\n            }\r\n\r\n  for k = 1,6 do\r\n    mazo_reparto.takeObject(paramN)\r\n  end\r\n\r\n  -- Ponemos última carta bocarriba en descarte\r\n  paramNF = {position = Z_mazo_descarte_pos,\r\n             rotation = Z_mazo_descarte_rot0,\r\n            }\r\n\r\n  mazo_reparto.takeObject(paramNF)\r\n\r\nend\r\n\r\nfunction deal_card(mazo,color)\r\n  mazo.deal(1,color)\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/repartir_cartas\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='REPARTIR',\r\n    click_function='repartir_cartas',\r\n    function_owner=self,\r\n    position={0,0.5,0},\r\n    height=400,\r\n    width=450,\r\n    font_size=90,\r\n    color={1,1,1},\r\n    tooltip = 'Repartir cartas',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction repartir_cartas(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond  then\r\n\r\n      -- Comprobamos si se le ha dado la vuelta al corte\r\n      Z_mazo_robo = getObjectFromGUID(Z_mazo_robo_GUID)\r\n      Z_mazo_robo_OBJ = Z_mazo_robo.getObjects()\r\n\r\n      mazo_1  = Z_mazo_robo_OBJ[1].getObjects()\r\n      mazo_2  = Z_mazo_robo_OBJ[2].getObjects()\r\n\r\n      pos1 = Z_mazo_robo_OBJ[1].getPosition()\r\n      pos2 = Z_mazo_robo_OBJ[2].getPosition()\r\n\r\n      if pos1[2] > pos2[2] then\r\n        mazo_corte   = Z_mazo_robo_OBJ[1]\r\n        mazo_reparto = Z_mazo_robo_OBJ[2]\r\n      else\r\n        mazo_corte   = Z_mazo_robo_OBJ[2]\r\n        mazo_reparto = Z_mazo_robo_OBJ[1]\r\n      end\r\n\r\n      rot_corte = mazo_corte.getRotation()\r\n\r\n      if rot_corte[3] >= -0.1 and rot_corte[3] <= 0.1 then\r\n\r\n        -- Hacemos desaparecer botón\r\n        self.setPosition({0,0,10})\r\n        self.setScale({0.01,0.01,0.01})\r\n\r\n        -- Cogemos inicio de turno en texto marcador\r\n        texto_primer_turno = getObjectFromGUID(texto_primer_turno_GUID)\r\n        turno_inicial = texto_primer_turno.TextTool.getValue()\r\n\r\n        -- Ejecutamos reparto de cartas\r\n        reparto_de_cartas(turno_inicial,mazo_corte,mazo_reparto)\r\n\r\n        -- Colocamos botones de recoger y finalizar ronda\r\n        boton_finalizar_ronda = getObjectFromGUID(boton_finalizar_ronda_GUID)\r\n        boton_recoger = getObjectFromGUID(boton_recoger_GUID)\r\n        \r\n        boton_recoger.setPosition(boton_recoger_pos0)\r\n        boton_recoger.setScale(boton_bloque_scale0)\r\n        boton_finalizar_ronda.setPosition(boton_finalizar_ronda_pos0)\r\n        boton_finalizar_ronda.setScale(boton_bloque_scale0)\r\n\r\n      else\r\n\r\n        printToAll('¡Mirar mazo de corte!', {1,0,0})\r\n        broadcastToAll('¡Mirar mazo de corte!', {1,0,0})\r\n\r\n      end\r\n\r\n  end\r\n\r\n\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "22f205"
    },
    {
      "Name": "Deck",
      "Transform": {
        "posX": -2.13293815,
        "posY": 1.03808939,
        "posZ": 24.0546246,
        "rotX": -1.65679932E-08,
        "rotY": 89.98688,
        "rotZ": 180.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": false,
      "SidewaysCard": false,
      "DeckIDs": [
        200,
        200,
        200,
        200
      ],
      "CustomDeck": {
        "2": {
          "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
          "BackURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
          "NumWidth": 1,
          "NumHeight": 1,
          "BackIsHidden": true,
          "UniqueBack": false
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "CardCustom",
          "Transform": {
            "posX": -2.13263464,
            "posY": 1.3139292,
            "posZ": 24.0542641,
            "rotX": -3.213137E-05,
            "rotY": 89.99987,
            "rotZ": 179.999817,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Oculta",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 200,
          "SidewaysCard": false,
          "CustomDeck": {
            "2": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9689e7"
        },
        {
          "Name": "CardCustom",
          "Transform": {
            "posX": -2.13272715,
            "posY": 1.405303,
            "posZ": 24.0520039,
            "rotX": 359.952057,
            "rotY": 90.0003,
            "rotZ": 178.77507,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Oculta",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 200,
          "SidewaysCard": false,
          "CustomDeck": {
            "2": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "79b92f"
        },
        {
          "Name": "CardCustom",
          "Transform": {
            "posX": -2.13263488,
            "posY": 1.29027975,
            "posZ": 24.0542641,
            "rotX": -2.28256067E-05,
            "rotY": 89.99987,
            "rotZ": 179.999878,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Oculta",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 200,
          "SidewaysCard": false,
          "CustomDeck": {
            "2": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "727c05"
        },
        {
          "Name": "CardCustom",
          "Transform": {
            "posX": -2.13263488,
            "posY": 1.17328131,
            "posZ": 24.0542641,
            "rotX": -4.02423939E-05,
            "rotY": 89.99987,
            "rotZ": 179.999756,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Oculta",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 200,
          "SidewaysCard": false,
          "CustomDeck": {
            "2": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1020570699268389353/E999541760495CA549A9AD31951D0DAC9802F1E6/",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "b0894b"
        }
      ],
      "GUID": "4fc90a"
    },
    {
      "Name": "Deck",
      "Transform": {
        "posX": 2.13235426,
        "posY": 1.03808939,
        "posZ": 24.0534439,
        "rotX": 4.171071E-08,
        "rotY": 89.99003,
        "rotZ": 180.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": false,
      "SidewaysCard": false,
      "DeckIDs": [
        500,
        600,
        500,
        400
      ],
      "CustomDeck": {
        "5": {
          "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
          "BackURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
          "NumWidth": 1,
          "NumHeight": 1,
          "BackIsHidden": true,
          "UniqueBack": false
        },
        "6": {
          "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
          "BackURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
          "NumWidth": 1,
          "NumHeight": 1,
          "BackIsHidden": true,
          "UniqueBack": false
        },
        "4": {
          "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
          "BackURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
          "NumWidth": 1,
          "NumHeight": 1,
          "BackIsHidden": true,
          "UniqueBack": false
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "CardCustom",
          "Transform": {
            "posX": 2.13254476,
            "posY": 1.32676017,
            "posZ": 24.05297,
            "rotX": -0.00011832975,
            "rotY": 90.00002,
            "rotZ": 180.000076,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Oculta Apoyada",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 500,
          "SidewaysCard": false,
          "CustomDeck": {
            "5": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "b5dcbb"
        },
        {
          "Name": "CardCustom",
          "Transform": {
            "posX": 2.13254666,
            "posY": 1.36614418,
            "posZ": 24.0529613,
            "rotX": -0.0001232039,
            "rotY": 90.00005,
            "rotZ": 180.000092,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Oculta Apoyada",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 600,
          "SidewaysCard": false,
          "CustomDeck": {
            "6": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "234fe6"
        },
        {
          "Name": "CardCustom",
          "Transform": {
            "posX": 2.13254523,
            "posY": 1.41424644,
            "posZ": 24.05297,
            "rotX": 0.0001020027,
            "rotY": 90.00002,
            "rotZ": 179.999954,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Oculta Apoyada",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 500,
          "SidewaysCard": false,
          "CustomDeck": {
            "5": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "4ca9ea"
        },
        {
          "Name": "CardCustom",
          "Transform": {
            "posX": 2.13254476,
            "posY": 1.18024218,
            "posZ": 24.05297,
            "rotX": -0.000148108462,
            "rotY": 90.00002,
            "rotZ": 180.000092,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Oculta Apoyada",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 400,
          "SidewaysCard": false,
          "CustomDeck": {
            "4": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1000304544162610290/A802F5DE1D676064C2EEC2A250FA18F3F347A545/",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "0b0232"
        }
      ],
      "GUID": "39d91c"
    },
    {
      "Name": "Custom_Board",
      "Transform": {
        "posX": 7.451526E-09,
        "posY": 3.7889998,
        "posZ": -0.122597441,
        "rotX": 8.388731E-21,
        "rotY": 180.0,
        "rotZ": 1.65564842E-08,
        "scaleX": 0.5891893,
        "scaleY": 0.9999979,
        "scaleZ": 0.6022198
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7867647,
        "g": 0.7867647,
        "b": 0.7867647
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1000305522027900824/46AD6F959A44FC71A1CD182D86481653A430D685/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.746696055
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d82fa4"
    },
    {
      "Name": "Deck",
      "Transform": {
        "posX": 0.06045417,
        "posY": 1.558752,
        "posZ": 20.7067184,
        "rotX": -1.59586108E-07,
        "rotY": 1.3861446E-05,
        "rotZ": 180.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": false,
      "SidewaysCard": false,
      "DeckIDs": [
        102,
        103,
        101,
        116,
        116,
        103,
        114,
        101,
        117,
        142,
        124,
        130,
        146,
        147,
        128,
        150,
        135,
        111,
        145,
        105,
        129,
        149,
        139,
        104,
        143,
        143,
        135,
        132,
        140,
        105,
        133,
        110,
        108,
        152,
        148,
        109,
        127,
        136,
        107,
        142,
        148,
        113,
        117,
        118,
        119,
        150,
        115,
        151,
        128,
        118,
        127,
        134,
        134,
        108,
        120,
        111,
        123,
        141,
        122,
        145,
        119,
        129,
        102,
        137,
        124,
        122,
        109,
        137,
        115,
        144,
        140,
        107,
        139,
        120,
        149,
        152,
        110,
        146,
        131,
        136,
        153,
        131,
        123,
        100,
        141,
        130,
        126,
        112,
        126,
        106,
        114,
        100,
        104,
        144,
        121,
        147,
        132,
        133,
        121,
        113,
        106,
        138,
        125,
        138,
        151,
        153,
        125,
        112
      ],
      "CustomDeck": {
        "1": {
          "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
          "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
          "NumWidth": 10,
          "NumHeight": 7,
          "BackIsHidden": false,
          "UniqueBack": false
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Card",
          "Transform": {
            "posX": 2.72784734,
            "posY": 1.12677646,
            "posZ": 13.1522388,
            "rotX": 3.19899416,
            "rotY": 88.63978,
            "rotZ": 359.8586,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "3c",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 102,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "731ac6"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 2.682265,
            "posY": 1.36082685,
            "posZ": 12.932169,
            "rotX": 0.524711549,
            "rotY": 90.01954,
            "rotZ": 359.890961,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "4c",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 103,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "642a51"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 2.29554152,
            "posY": 1.21020854,
            "posZ": 12.8481159,
            "rotX": 359.952332,
            "rotY": 45.0011139,
            "rotZ": 359.972137,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "2c",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 101,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6a1d60"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -0.414842427,
            "posY": 1.30646765,
            "posZ": 12.9127693,
            "rotX": 359.137,
            "rotY": 89.0716248,
            "rotZ": 345.3507,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "4r",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 116,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f77701"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 1.61987793,
            "posY": 1.225422,
            "posZ": 14.1333609,
            "rotX": 359.886536,
            "rotY": 89.951355,
            "rotZ": 359.8471,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "4r",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 116,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ff8471"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 1.26609027,
            "posY": 1.07936668,
            "posZ": 14.3160248,
            "rotX": 359.934479,
            "rotY": 89.97671,
            "rotZ": 359.853455,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "4c",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 103,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "d2f455"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 2.51007366,
            "posY": 1.03173411,
            "posZ": 14.3691511,
            "rotX": 0.000670694455,
            "rotY": 89.9983444,
            "rotZ": 0.0013878654,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "2r",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 114,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2170b4"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 2.336371,
            "posY": 1.27551949,
            "posZ": 14.351614,
            "rotX": 359.8858,
            "rotY": 89.97426,
            "rotZ": 359.845673,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "2c",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 101,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "bf0dc6"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -2.44312763,
            "posY": 4.452969,
            "posZ": -4.230619,
            "rotX": 0.00170885958,
            "rotY": 270.0083,
            "rotZ": -0.00289840065,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "5r",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 117,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "77d90a"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -2.332464,
            "posY": 4.802942,
            "posZ": -4.48678732,
            "rotX": 0.224210054,
            "rotY": 270.173462,
            "rotZ": 14.02443,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "4p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 142,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9b62b8"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -2.854162,
            "posY": 5.04387426,
            "posZ": -4.69050026,
            "rotX": 0.009109765,
            "rotY": 270.0122,
            "rotZ": 35.9578819,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Qr",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 124,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "48bbc7"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55982137,
            "posY": 5.17536068,
            "posZ": -1.98496842,
            "rotX": 0.0402642936,
            "rotY": -0.005622337,
            "rotZ": 180.855011,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "5t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 130,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "bb4502"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56343722,
            "posY": 5.235835,
            "posZ": -1.984922,
            "rotX": 0.5493384,
            "rotY": 0.0309533868,
            "rotZ": 183.545,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "8p",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 146,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9ca48a"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56178129,
            "posY": 5.12708139,
            "posZ": -1.98488283,
            "rotX": 0.106811747,
            "rotY": 359.99115,
            "rotZ": 180.807312,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "9p",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 147,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2eef5f"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56650138,
            "posY": 5.58931828,
            "posZ": -1.98526323,
            "rotX": 0.04969239,
            "rotY": 0.009184949,
            "rotZ": 186.460266,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "3t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 128,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "0256f1"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56153286,
            "posY": 5.266146,
            "posZ": -1.98489439,
            "rotX": 0.07894119,
            "rotY": 359.981384,
            "rotZ": 181.180527,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Qp",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 150,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7bbda6"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56657529,
            "posY": 5.73479939,
            "posZ": -1.98530066,
            "rotX": 0.261033624,
            "rotY": 0.0163481217,
            "rotZ": 186.993546,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "10t",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 135,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "69dd41"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.5642556,
            "posY": 5.460621,
            "posZ": -1.985158,
            "rotX": 359.9156,
            "rotY": 359.977142,
            "rotZ": 183.822891,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Qc",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 111,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "818f5b"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55877292,
            "posY": 4.83805227,
            "posZ": -1.98524964,
            "rotX": 359.9314,
            "rotY": 0.00439841673,
            "rotZ": 178.642487,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "7p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 145,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ba78a5"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55955553,
            "posY": 4.91102839,
            "posZ": -1.9851172,
            "rotX": 359.936951,
            "rotY": 0.00165992347,
            "rotZ": 179.149765,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "6c",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 105,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "37041c"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55994427,
            "posY": 5.05273628,
            "posZ": -1.98521447,
            "rotX": 0.16548112,
            "rotY": 0.0225770529,
            "rotZ": 181.13652,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "4t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 129,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "af6068"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55759323,
            "posY": 4.807169,
            "posZ": -1.98518968,
            "rotX": 359.815521,
            "rotY": 0.000350063143,
            "rotZ": 177.107941,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Jp",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 149,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "e22f9d"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55943978,
            "posY": 4.857502,
            "posZ": -1.98527515,
            "rotX": 359.577454,
            "rotY": -0.002352193,
            "rotZ": 178.2098,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Ap",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 139,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "91e585"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56136346,
            "posY": 5.339998,
            "posZ": -1.98515284,
            "rotX": 359.8672,
            "rotY": -0.00307277474,
            "rotZ": 182.099518,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "5c",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 104,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "4d4b17"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55625033,
            "posY": 4.682194,
            "posZ": -1.98500419,
            "rotX": 359.6625,
            "rotY": -0.00478364667,
            "rotZ": 175.0781,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "5p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 143,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a18603"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56341112,
            "posY": 5.065785,
            "posZ": -1.9847132,
            "rotX": 0.513273358,
            "rotY": 0.0141438693,
            "rotZ": 181.950485,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "5p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 143,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2cda31"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56530476,
            "posY": 5.823623,
            "posZ": -1.98590684,
            "rotX": 0.198705286,
            "rotY": 0.05279723,
            "rotZ": 187.577484,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "10t",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 135,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "71a33f"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55709851,
            "posY": 4.54824066,
            "posZ": -1.984932,
            "rotX": 359.8682,
            "rotY": 0.006156369,
            "rotZ": 175.92691,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "7t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 132,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "87412e"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55955362,
            "posY": 5.023684,
            "posZ": -1.98496485,
            "rotX": 0.141303316,
            "rotY": 0.0105789872,
            "rotZ": 180.2478,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "2p",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 140,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9609d5"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55725622,
            "posY": 4.52316952,
            "posZ": -1.984941,
            "rotX": 359.860748,
            "rotY": 0.00335315685,
            "rotZ": 175.82077,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "6c",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 105,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f64279"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55802238,
            "posY": 4.753255,
            "posZ": -1.98501241,
            "rotX": 359.950317,
            "rotY": 0.00708648376,
            "rotZ": 177.497177,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "8t",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 133,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "561bc8"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55633628,
            "posY": 4.58479261,
            "posZ": -1.98495042,
            "rotX": 359.79306,
            "rotY": 0.00332342531,
            "rotZ": 175.303314,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Jc",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 110,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "51baa9"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.560131,
            "posY": 4.8146615,
            "posZ": -1.98495245,
            "rotX": 0.148921981,
            "rotY": 0.0002601795,
            "rotZ": 178.7826,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "9c",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 108,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "4993d4"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55625176,
            "posY": 4.5258503,
            "posZ": -1.98521471,
            "rotX": 359.860352,
            "rotY": 0.0195319671,
            "rotZ": 175.86319,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Joker",
          "Description": "50",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 152,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "e48146"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.556846,
            "posY": 4.706271,
            "posZ": -1.985111,
            "rotX": 359.354828,
            "rotY": -0.00199134159,
            "rotZ": 175.243347,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "10p",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 148,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "dca96d"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55915582,
            "posY": 4.92486954,
            "posZ": -1.98541844,
            "rotX": 359.69635,
            "rotY": 359.991272,
            "rotZ": 178.007385,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "10c",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 109,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "87ad4b"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.5604068,
            "posY": 4.91419172,
            "posZ": -1.98503244,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 180.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "2t",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 127,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "be8c2c"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55427229,
            "posY": 5.368876,
            "posZ": -1.989554,
            "rotX": 0.431256145,
            "rotY": 359.994263,
            "rotZ": 179.687057,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Jt",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 136,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "cca20c"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55540991,
            "posY": 5.407018,
            "posZ": -1.988719,
            "rotX": 0.3049786,
            "rotY": 359.9816,
            "rotZ": 179.433716,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "8c",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 107,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "37d8d3"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55490351,
            "posY": 5.25094,
            "posZ": -1.98947144,
            "rotX": 0.2833473,
            "rotY": 359.994171,
            "rotZ": 179.215485,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "4p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 142,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "d3e061"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55420661,
            "posY": 5.215374,
            "posZ": -1.98912752,
            "rotX": 0.184443653,
            "rotY": -0.00385934161,
            "rotZ": 178.576233,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "10p",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 148,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "47f303"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55098331,
            "posY": 5.2156496,
            "posZ": -1.99158514,
            "rotX": 0.337015152,
            "rotY": 359.963379,
            "rotZ": 177.646454,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Ar",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 113,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "c04826"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.5556426,
            "posY": 5.35034561,
            "posZ": -1.98863208,
            "rotX": 0.889691353,
            "rotY": -0.00394540466,
            "rotZ": 179.150162,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "5r",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 117,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "96a6d6"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55506659,
            "posY": 5.484823,
            "posZ": -1.9897995,
            "rotX": 2.79201531,
            "rotY": 0.00337197864,
            "rotZ": 179.928009,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "6r",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 118,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9179a0"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55634916,
            "posY": 5.49321747,
            "posZ": -1.98775649,
            "rotX": 0.981340468,
            "rotY": -0.003732832,
            "rotZ": 178.984848,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "7r",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 119,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "80a77a"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55852187,
            "posY": 5.28555727,
            "posZ": -1.98479831,
            "rotX": 358.690643,
            "rotY": 0.0179951228,
            "rotZ": 179.026947,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Qp",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 150,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a46794"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56103408,
            "posY": 5.371569,
            "posZ": -1.98511434,
            "rotX": 358.944061,
            "rotY": 0.008758653,
            "rotZ": 181.580185,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "3r",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 115,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "8ff8fa"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56005764,
            "posY": 5.3262043,
            "posZ": -1.98419285,
            "rotX": 359.948059,
            "rotY": 0.0259548072,
            "rotZ": 181.12114,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Kp",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 151,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "451078"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55673063,
            "posY": 5.55046272,
            "posZ": -1.9890964,
            "rotX": 359.8186,
            "rotY": 359.989563,
            "rotZ": 180.944824,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "3t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 128,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "734080"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55775392,
            "posY": 5.162349,
            "posZ": -1.98461521,
            "rotX": 358.948,
            "rotY": 0.0308170933,
            "rotZ": 178.976013,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "6r",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 118,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "74abea"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.555563,
            "posY": 5.028614,
            "posZ": -1.984417,
            "rotX": 358.781921,
            "rotY": 0.05103945,
            "rotZ": 177.630249,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "2t",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 127,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "65b0e0"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.5521816,
            "posY": 5.26344728,
            "posZ": -1.99051285,
            "rotX": 1.11672878,
            "rotY": 359.937134,
            "rotZ": 178.180435,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "9t",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 134,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "1f62d4"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55828333,
            "posY": 5.2439456,
            "posZ": -1.9842484,
            "rotX": 359.166229,
            "rotY": 0.0224145669,
            "rotZ": 179.269455,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "9t",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 134,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "b11478"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55580556,
            "posY": 5.01918,
            "posZ": -1.98487377,
            "rotX": 358.7937,
            "rotY": 0.0602289364,
            "rotZ": 179.499374,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "9c",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 108,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2f70a0"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55497622,
            "posY": 5.326828,
            "posZ": -1.98950481,
            "rotX": 1.42195,
            "rotY": 0.008061155,
            "rotZ": 180.066788,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "8r",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 120,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3f0d1f"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55399013,
            "posY": 5.27712154,
            "posZ": -1.98913026,
            "rotX": 0.284624457,
            "rotY": 359.952972,
            "rotZ": 178.122116,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Qc",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 111,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "e4d001"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55627465,
            "posY": 5.521873,
            "posZ": -1.98919451,
            "rotX": 0.730099559,
            "rotY": 359.972137,
            "rotZ": 179.805008,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Jr",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 123,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "aea6b2"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55602229,
            "posY": 5.632928,
            "posZ": -1.98973787,
            "rotX": 359.4733,
            "rotY": 0.009682378,
            "rotZ": 182.378159,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "3p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 141,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a55dff"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.555086,
            "posY": 5.47783566,
            "posZ": -1.99008358,
            "rotX": 1.48777449,
            "rotY": 359.9931,
            "rotZ": 180.229263,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "10r",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 122,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "518590"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55382752,
            "posY": 5.36342335,
            "posZ": -1.98921847,
            "rotX": 1.16235483,
            "rotY": 359.954071,
            "rotZ": 178.109528,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "7p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 145,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "5736f5"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55206919,
            "posY": 5.37844372,
            "posZ": -1.99176967,
            "rotX": 1.29842949,
            "rotY": 359.993835,
            "rotZ": 178.91217,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "7r",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 119,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "5a4538"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56109011,
            "posY": 5.40032053,
            "posZ": -1.98419082,
            "rotX": 359.850861,
            "rotY": 0.0190985985,
            "rotZ": 181.164261,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "4t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 129,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "5de82d"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55807173,
            "posY": 5.128208,
            "posZ": -1.98448193,
            "rotX": 359.27597,
            "rotY": 0.0401815325,
            "rotZ": 180.014343,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "3c",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 102,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "484321"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55489182,
            "posY": 5.402685,
            "posZ": -1.98889208,
            "rotX": 0.6313841,
            "rotY": 359.9881,
            "rotZ": 179.3228,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Qt",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 137,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "52f535"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55430162,
            "posY": 5.402122,
            "posZ": -1.9887265,
            "rotX": 359.81662,
            "rotY": -0.00282503478,
            "rotZ": 179.155624,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Qr",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 124,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "888e6a"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56263959,
            "posY": 5.538123,
            "posZ": -1.984346,
            "rotX": 359.780853,
            "rotY": 0.0127440253,
            "rotZ": 182.245667,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "10r",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 122,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "73003b"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55646253,
            "posY": 5.10329628,
            "posZ": -1.98444378,
            "rotX": 358.98468,
            "rotY": 0.0385463461,
            "rotZ": 177.461456,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "10c",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 109,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "546ae3"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55651534,
            "posY": 5.13120747,
            "posZ": -1.98460972,
            "rotX": 358.926239,
            "rotY": 0.0437781475,
            "rotZ": 178.675812,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Qt",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 137,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3d42f2"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55432928,
            "posY": 4.92610931,
            "posZ": -1.9848721,
            "rotX": 358.5563,
            "rotY": 0.06868724,
            "rotZ": 177.770935,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "3r",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 115,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "daf3ff"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55624139,
            "posY": 5.17100525,
            "posZ": -1.98608851,
            "rotX": 359.985931,
            "rotY": 0.00464424537,
            "rotZ": 180.589066,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "6p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 144,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "c1f410"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.556607,
            "posY": 5.04130173,
            "posZ": -1.98575485,
            "rotX": 359.456146,
            "rotY": 0.0106934337,
            "rotZ": 180.8396,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "2p",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 140,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "c046d6"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.5568217,
            "posY": 5.25797462,
            "posZ": -1.98618925,
            "rotX": 0.117820978,
            "rotY": 0.0194232482,
            "rotZ": 182.812775,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "8c",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 107,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a436ce"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55491447,
            "posY": 5.06940174,
            "posZ": -1.98574233,
            "rotX": 359.833344,
            "rotY": 0.007249023,
            "rotZ": 179.475159,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Ap",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 139,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ed3dda"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.560435,
            "posY": 5.002982,
            "posZ": -1.98504043,
            "rotX": 0.003411402,
            "rotY": 1.49127573E-06,
            "rotZ": 179.989426,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "8r",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 120,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "8b99ca"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56042933,
            "posY": 5.16478252,
            "posZ": -1.98497462,
            "rotX": -0.001821332,
            "rotY": 359.987579,
            "rotZ": 179.820587,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Jp",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 149,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "5dd17c"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.558164,
            "posY": 4.65054035,
            "posZ": -1.98474014,
            "rotX": 0.0135263326,
            "rotY": 0.008017026,
            "rotZ": 176.991,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Joker",
          "Description": "50",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 152,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "0573da"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.558234,
            "posY": 4.753538,
            "posZ": -1.98495877,
            "rotX": 359.7459,
            "rotY": 359.985657,
            "rotZ": 176.302231,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Jc",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 110,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "17b9ac"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55551445,
            "posY": 4.41521645,
            "posZ": -1.98451269,
            "rotX": 359.7837,
            "rotY": 359.990143,
            "rotZ": 173.329346,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "8p",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 146,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "47f467"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55995226,
            "posY": 5.01025438,
            "posZ": -1.9853307,
            "rotX": 0.102496207,
            "rotY": 0.02665781,
            "rotZ": 180.761658,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "6t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 131,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7e6a4b"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55538952,
            "posY": 4.33471966,
            "posZ": -1.98440027,
            "rotX": 359.496735,
            "rotY": 359.993835,
            "rotZ": 172.317062,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Jt",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 136,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6d5ca1"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56387,
            "posY": 5.432232,
            "posZ": -1.98526478,
            "rotX": 0.135019258,
            "rotY": 0.0211609267,
            "rotZ": 184.87059,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Joker",
          "Description": "50",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 153,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "1f546e"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55663073,
            "posY": 5.21952534,
            "posZ": -1.98426569,
            "rotX": 359.9758,
            "rotY": 359.927551,
            "rotZ": 178.187134,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "6t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 131,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "dad48b"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.563655,
            "posY": 5.45231628,
            "posZ": -1.9847827,
            "rotX": 0.151302963,
            "rotY": -0.00203686417,
            "rotZ": 183.722916,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Jr",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 123,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "cb6084"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55812049,
            "posY": 4.870271,
            "posZ": -1.98479748,
            "rotX": 0.143064231,
            "rotY": 359.986633,
            "rotZ": 177.509613,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Ac",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 100,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9ae8c0"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56170356,
            "posY": 5.2040267,
            "posZ": -1.9851743,
            "rotX": 0.137397677,
            "rotY": 0.0179198645,
            "rotZ": 182.309311,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "3p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 141,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "1d9d27"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56037092,
            "posY": 4.729032,
            "posZ": -1.98516047,
            "rotX": 0.187467471,
            "rotY": 0.0218165927,
            "rotZ": 179.355743,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "5t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 130,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6b6252"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56134832,
            "posY": 5.12653637,
            "posZ": -1.98475277,
            "rotX": 0.283132434,
            "rotY": 0.00383150275,
            "rotZ": 181.284164,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "At",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 126,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "edd1b9"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55790913,
            "posY": 4.67867947,
            "posZ": -1.98482037,
            "rotX": 359.963959,
            "rotY": 0.006095863,
            "rotZ": 176.6264,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Kc",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 112,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "e65900"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.5573169,
            "posY": 4.49867058,
            "posZ": -1.98507249,
            "rotX": 359.745,
            "rotY": 0.00229238719,
            "rotZ": 175.517334,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "At",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 126,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "4d0d9e"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56467974,
            "posY": 5.735365,
            "posZ": -1.98549819,
            "rotX": 359.9205,
            "rotY": -0.00292091258,
            "rotZ": 185.528854,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "7c",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 106,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "faac9c"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55592465,
            "posY": 4.294663,
            "posZ": -1.98480368,
            "rotX": 359.87854,
            "rotY": 0.0161398668,
            "rotZ": 174.365051,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "2r",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 114,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a1970c"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56422079,
            "posY": 5.56933832,
            "posZ": -1.98515677,
            "rotX": -0.00456270156,
            "rotY": -0.003490774,
            "rotZ": 184.410431,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Ac",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 100,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "340b90"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55639,
            "posY": 4.232206,
            "posZ": -1.98506987,
            "rotX": 359.732635,
            "rotY": 0.025443282,
            "rotZ": 171.992966,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "5c",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 104,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "60df16"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56332135,
            "posY": 5.42552757,
            "posZ": -1.98511958,
            "rotX": 0.187204212,
            "rotY": 0.008933014,
            "rotZ": 184.305725,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "6p",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 144,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a9f6a6"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.55833828,
            "posY": 5.04096937,
            "posZ": -1.98474383,
            "rotX": 359.892517,
            "rotY": 359.993,
            "rotZ": 179.2478,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "9r",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 121,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "20f469"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56560767,
            "posY": 5.564824,
            "posZ": -1.98518062,
            "rotX": 0.09681861,
            "rotY": 0.007054145,
            "rotZ": 185.713287,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "9p",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 147,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a32365"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56025028,
            "posY": 4.901162,
            "posZ": -1.984895,
            "rotX": 0.0852477849,
            "rotY": -0.00250156363,
            "rotZ": 179.498352,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "7t",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 132,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7d6cb4"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56765115,
            "posY": 5.706501,
            "posZ": -1.98507714,
            "rotX": 0.9800324,
            "rotY": 0.10583818,
            "rotZ": 188.61557,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "8t",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 133,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "142f04"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56099749,
            "posY": 4.97379827,
            "posZ": -1.9847666,
            "rotX": 359.912231,
            "rotY": 359.989258,
            "rotZ": 179.698715,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "9r",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 121,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "b1d548"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -1.56240666,
            "posY": 5.56518459,
            "posZ": -1.98510611,
            "rotX": 0.306229532,
            "rotY": 0.0197584722,
            "rotZ": 184.051941,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Ar",
          "Description": "20",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 113,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "1e73e8"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": -3.43468857,
            "posY": 1.03453648,
            "posZ": -7.91713572,
            "rotX": 1.89355978E-06,
            "rotY": 359.9785,
            "rotZ": 180.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "7c",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 106,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "25056c"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 9.8,
            "posY": 1.40898514,
            "posZ": -7.7,
            "rotX": 9.000001,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Kt",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 138,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "5e0aba"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 10.7000008,
            "posY": 1.5,
            "posZ": -7.7,
            "rotX": 9.000001,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Kr",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 125,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "92e199"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 11.6,
            "posY": 1.5,
            "posZ": -7.7,
            "rotX": 9.000001,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Kt",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 138,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "41c393"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 12.5008345,
            "posY": 1.50491416,
            "posZ": -7.699873,
            "rotX": 9.060299,
            "rotY": 90.00418,
            "rotZ": 0.00159295287,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Kp",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 151,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "e6ff62"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 13.4012222,
            "posY": 1.507368,
            "posZ": -7.6998744,
            "rotX": 9.04953,
            "rotY": 90.00439,
            "rotZ": -0.00155270437,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Joker",
          "Description": "50",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 153,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6a174e"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 14.3015471,
            "posY": 1.509478,
            "posZ": -7.699886,
            "rotX": 9.0409,
            "rotY": 90.00414,
            "rotZ": -0.0038371447,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Kr",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 125,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "14631e"
        },
        {
          "Name": "Card",
          "Transform": {
            "posX": 15.2000008,
            "posY": 1.5,
            "posZ": -7.7,
            "rotX": 9.000001,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Kc",
          "Description": "10",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": true,
          "CardID": 112,
          "SidewaysCard": false,
          "CustomDeck": {
            "1": {
              "FaceURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646488883/941CE60C944B3B94597E4CC31ADF537B4004A3C2/",
              "BackURL": "http://cloud-3.steamusercontent.com/ugc/1021696076646489586/3C1E4137458B454383FF83B72817B31798F19978/",
              "NumWidth": 10,
              "NumHeight": 7,
              "BackIsHidden": false,
              "UniqueBack": false
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "8a86b0"
        }
      ],
      "GUID": "bc1419"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 0.0,
        "posY": 1.40255022,
        "posZ": -12.003994,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 3.07539868,
        "scaleY": 0.88283056,
        "scaleZ": 3.623007
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "b70628"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 0.07221952,
        "posY": 0.0613986179,
        "posZ": -15.575242,
        "rotX": 0.00201097014,
        "rotY": 180.033432,
        "rotZ": 0.00209022756,
        "scaleX": 0.01,
        "scaleY": 0.01,
        "scaleZ": 0.01
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0678792,
        "g": 0.3651263,
        "b": 0.03742451
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN RECOGER MESA\r\n---------------------------------\r\n-- INCLUDES\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n-- JUGADORES\r\nJugador_1_E1 = Player[\"Blue\"]\r\nJugador_2_E1 = Player[\"Yellow\"]\r\nJugador_1_E2 = Player[\"Green\"]\r\nJugador_2_E2 = Player[\"Red\"]\r\n\r\nJugador_1_E1_color = \"Blue\"\r\nJugador_2_E1_color = \"Yellow\"\r\nJugador_1_E2_color = \"Green\"\r\nJugador_2_E2_color = \"Red\"\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/repartir_cartas\nfunction reparto_de_cartas(turno_inicial,mazo_corte,mazo_reparto)\r\n\r\n  -- MAZO DE ROBO\r\n  Z_mazo_robo     = getObjectFromGUID(Z_mazo_robo_GUID)\r\n\r\n  -- MONTÓN OCULTO\r\n  Z_monton_oculto = getObjectFromGUID(Z_monton_oculto_GUID)\r\n  Z_monton_oculto_pos = Z_monton_oculto.getPosition()\r\n  Z_monton_oculto_rot = Z_monton_oculto.getRotation()\r\n  Z_monton_oculto_rot = {Z_monton_oculto_rot[1],Z_monton_oculto_rot[2],180.00}\r\n\r\n  -- MAZO DE DESCARTE\r\n  Z_mazo_descarte = getObjectFromGUID(Z_mazo_descarte_GUID)\r\n  Z_mazo_descarte_pos = Z_mazo_descarte.getPosition()\r\n  Z_mazo_descarte_rot0 = Z_mazo_descarte.getRotation()\r\n  Z_mazo_descarte_rot = {Z_mazo_descarte_rot0[1],Z_mazo_descarte_rot0[2],180.00}\r\n\r\n  -- Turnos\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  -- Detectar orden de reparto\r\n  if     turno_inicial == turno_orden_1[1] then\r\n    orden_reparto = turno_orden_3\r\n  elseif turno_inicial == turno_orden_2[1] then\r\n    orden_reparto = turno_orden_4\r\n  elseif turno_inicial == turno_orden_3[1] then\r\n    orden_reparto = turno_orden_1\r\n  elseif turno_inicial == turno_orden_4[1] then\r\n    orden_reparto = turno_orden_2\r\n  end\r\n\r\n  -- Manos de jugadores\r\n  mano_11 = Player[orden_reparto[1]].getHandObjects()\r\n  mano_22 = Player[orden_reparto[2]].getHandObjects()\r\n  mano_12 = Player[orden_reparto[3]].getHandObjects()\r\n  mano_22 = Player[orden_reparto[4]].getHandObjects()\r\n\r\n  N_mano_11 = #mano_11\r\n  N_mano_21 = #mano_22\r\n  N_mano_12 = #mano_12\r\n  N_mano_22 = #mano_22\r\n\r\n  N_Restantes_mano_11 = 13 - N_mano_11\r\n  N_Restantes_mano_21 = 13 - N_mano_21\r\n  N_Restantes_mano_12 = 13 - N_mano_12\r\n  N_Restantes_mano_22 = 13 - N_mano_22\r\n  N_Restantes = (13*4 + 7) - N_mano_11 - N_mano_21 - N_mano_12 - N_mano_22\r\n\r\n  print('N_Restantes = ',N_Restantes)\r\n\r\n  N_Restantes_T = {N_Restantes_mano_11,N_Restantes_mano_21,\r\n                   N_Restantes_mano_12,N_Restantes_mano_22}\r\n\r\n  N_cartas_reparto  = #mazo_reparto.getObjects()\r\n  N_cartas_corte    = #mazo_corte.getObjects()\r\n  print('N_cartas_reparto = ', N_cartas_reparto)\r\n  print('N_cartas_corte = '  , N_cartas_corte)\r\n\r\n  -- Corte perfecto\r\n  corte_perfecto = 0\r\n  if N_cartas_reparto == N_Restantes then\r\n    printToAll('¡CORTE PERFECTO!', {1,0,0})\r\n    broadcastToAll('¡CORTE PERFECTO!', {1,0,0})\r\n    corte_perfecto = 50\r\n  end\r\n\r\n  -- Ponemos mazo de corte provisionalmente aparte\r\n  mazo_corte.setPosition({1.47, 4.59, -2.09})\r\n  mazo_corte.setRotation({0.00, 180.00, 180.00})\r\n\r\n  -- Juntamos mazo de reparto encima del mazo de corte\r\n  mazo_reparto.putObject(mazo_corte)\r\n\r\n  -- Empezamos reparto a jugadores\r\n\r\n  restante   = 52 - N_mano_11 - N_mano_21 - N_mano_12 - N_mano_22\r\n\r\n  contadores = {N_mano_11,N_mano_21,N_mano_12,N_mano_22}\r\n  orden_i = 1\r\n\r\n  while restante > 0 do\r\n\r\n    -- Color jugador\r\n    color_j = orden_reparto[orden_i]\r\n\r\n    -- Chequeamos si jugador tiene las 13 cartas ya\r\n    contador_cartas = contadores[orden_i]\r\n\r\n    if contador_cartas < 13 then\r\n      deal_card(mazo_reparto,color_j)\r\n      restante = restante - 1\r\n      contadores[orden_i] = contadores[orden_i] + 1\r\n    end\r\n\r\n    if orden_i == 4 then\r\n      orden_i = 1\r\n    else\r\n      orden_i = orden_i + 1\r\n    end\r\n\r\n  end\r\n\r\n\r\n  -- Ponemos primera carta del montón oculto\r\n  paramN = {position = Z_monton_oculto_pos,\r\n            rotation = Z_monton_oculto_rot,\r\n            }\r\n\r\n  for k = 1,6 do\r\n    mazo_reparto.takeObject(paramN)\r\n  end\r\n\r\n  -- Ponemos última carta bocarriba en descarte\r\n  paramNF = {position = Z_mazo_descarte_pos,\r\n             rotation = Z_mazo_descarte_rot0,\r\n            }\r\n\r\n  mazo_reparto.takeObject(paramNF)\r\n\r\nend\r\n\r\nfunction deal_card(mazo,color)\r\n  mazo.deal(1,color)\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/repartir_cartas\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='PRUEBA',\r\n    click_function='prueba2',\r\n    function_owner=self,\r\n    position={0,0.5,0},\r\n    height=400,\r\n    width=450,\r\n    font_size=90,\r\n    color={1,1,1},\r\n    tooltip = 'Prueba',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton()\r\n  pasar_turno()\r\nend\r\n\r\nfunction prueba2(obj, color)\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond then\r\n    print('CORR')\r\n  end\r\n\r\nend\r\n\r\n\r\n\r\nfunction pasar_turno()\r\n\r\n\r\n  Turns.enable = true\r\n  Turns.type = 2\r\n  Turns.reverse_order = false\r\n  Turns.disable_interactations = true\r\n  Turns.order = {'Red','Blue','Green','Yellow'}\r\n\r\n\r\nend\r\n\r\nfunction colocar_textos_01()\r\n\r\n  -- COLOCAR textos\r\n  for i = 1,2 do\r\n    for j = 1,9 do\r\n      txt_canasta_tipo_GUID = 'canasta_tipo_E' .. i .. '_C0' .. j .. '_GUID'\r\n      zona_canasta_GUID     = 'zonaCanastaE' .. i .. '_C0' .. j .. '_GUID'\r\n\r\n      txt_canasta_tipo = getObjectFromGUID(_G[txt_canasta_tipo_GUID])\r\n      zona_canasta     = getObjectFromGUID(_G[zona_canasta_GUID])\r\n\r\n      pos0 = zona_canasta.getPosition()\r\n\r\n      signo = 1\r\n      angZ = 270\r\n      if pos0[1] < 0  then\r\n        signo = -1\r\n        angZ = 90\r\n      end\r\n      pos0 = {pos0[1]-6.7*signo,0.96,pos0[3]}\r\n      txt_canasta_tipo.setPosition(pos0)\r\n      txt_canasta_tipo.setRotation({90,angZ,0})\r\n      --txt_canasta_tipo.color = {1,1,1}\r\n      txt_canasta_tipo.setValue('A')\r\n      --txt_canasta_tipo.setFontColor({r = 1, g = 1, b = 1})\r\n    end\r\n  end\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "ad4516"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.400055,
        "posY": 0.9600001,
        "posZ": -7.70000029,
        "rotX": 90.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 84
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "71df96"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.40005445,
        "posY": 0.96,
        "posZ": -3.96998787,
        "rotX": 90.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "58aceb"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.40005541,
        "posY": 0.9600001,
        "posZ": -0.191030517,
        "rotX": 90.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "1eef00"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.400052,
        "posY": 0.96,
        "posZ": 7.380892,
        "rotX": 90.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "6680e6"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.400054,
        "posY": 0.96,
        "posZ": 3.60377145,
        "rotX": 90.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e065d1"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.400055,
        "posY": 0.96,
        "posZ": 11.1448259,
        "rotX": 90.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "7e93c3"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.40005541,
        "posY": 0.96,
        "posZ": 14.9066362,
        "rotX": 90.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "34b0be"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.400054,
        "posY": 0.96,
        "posZ": 22.46793,
        "rotX": 90.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "8887de"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.400054,
        "posY": 0.96,
        "posZ": 18.6726437,
        "rotX": 90.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "163729"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -6.300055,
        "posY": 0.96,
        "posZ": 3.874159,
        "rotX": 90.0,
        "rotY": 90.00001,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 84
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "28943a"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -6.30005455,
        "posY": 0.96,
        "posZ": -18.7662735,
        "rotX": 90.0,
        "rotY": 90.00001,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "938c06"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -6.300045,
        "posY": 0.960000753,
        "posZ": 7.67679834,
        "rotX": 90.0,
        "rotY": 90.00001,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "df24cf"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -6.300056,
        "posY": 0.96,
        "posZ": -22.4931889,
        "rotX": 90.0,
        "rotY": 90.00001,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a42ff5"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -6.296257,
        "posY": 0.96,
        "posZ": -14.9877605,
        "rotX": 90.0,
        "rotY": 90.00001,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "92a2d0"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -6.300055,
        "posY": 0.9600001,
        "posZ": 0.105276115,
        "rotX": 90.0,
        "rotY": 90.00001,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "4d288f"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -6.30001,
        "posY": 0.96,
        "posZ": -3.67553735,
        "rotX": 90.0,
        "rotY": 90.00001,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "2ca120"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -6.300055,
        "posY": 0.96,
        "posZ": -7.44455862,
        "rotX": 90.0,
        "rotY": 90.00001,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "be289b"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -6.3000536,
        "posY": 0.96,
        "posZ": -11.2174006,
        "rotX": 90.0,
        "rotY": 90.00001,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": " ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 80
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "87fd03"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 0.0003429868,
        "posY": 4.881232,
        "posZ": 2.07,
        "rotX": 1.69085854E-06,
        "rotY": 180.009979,
        "rotZ": -6.021402E-07,
        "scaleX": 2.3996172,
        "scaleY": 1.0,
        "scaleZ": 1.55121708
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0678792,
        "g": 0.3651263,
        "b": 0.03742451
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN RECOGER MESA\r\n---------------------------------\r\n-- INCLUDES\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n-- JUGADORES\r\nJugador_1_E1 = Player[\"Blue\"]\r\nJugador_2_E1 = Player[\"Yellow\"]\r\nJugador_1_E2 = Player[\"Green\"]\r\nJugador_2_E2 = Player[\"Red\"]\r\n\r\nJugador_1_E1_color = \"Blue\"\r\nJugador_2_E1_color = \"Yellow\"\r\nJugador_1_E2_color = \"Green\"\r\nJugador_2_E2_color = \"Red\"\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_pos_sca\n\r\nboton_sortear_turnos_pos0  = {0.00, 4.88, 2.07}\r\nboton_corte_aleatorio_pos0 = {0.00, 4.88, 2.07}\r\nboton_repartir_cartas_pos0 = {0.00, 4.88, 2.07}\r\n\r\nboton_bloque_scale0 = {2.40, 1.00, 1.55}\r\nboton_bloque_rotac0 = {0.00, 180.00, 0.00}\r\n\r\nboton_recoger_pos0         = {-1.79, 1.46, -9.00}\r\nboton_finalizar_ronda_pos0 = {1.77, 1.46, -8.99}\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_pos_sca\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/repartir_cartas\nfunction reparto_de_cartas(turno_inicial,mazo_corte,mazo_reparto)\r\n\r\n  -- MAZO DE ROBO\r\n  Z_mazo_robo     = getObjectFromGUID(Z_mazo_robo_GUID)\r\n\r\n  -- MONTÓN OCULTO\r\n  Z_monton_oculto = getObjectFromGUID(Z_monton_oculto_GUID)\r\n  Z_monton_oculto_pos = Z_monton_oculto.getPosition()\r\n  Z_monton_oculto_rot = Z_monton_oculto.getRotation()\r\n  Z_monton_oculto_rot = {Z_monton_oculto_rot[1],Z_monton_oculto_rot[2],180.00}\r\n\r\n  -- MAZO DE DESCARTE\r\n  Z_mazo_descarte = getObjectFromGUID(Z_mazo_descarte_GUID)\r\n  Z_mazo_descarte_pos = Z_mazo_descarte.getPosition()\r\n  Z_mazo_descarte_rot0 = Z_mazo_descarte.getRotation()\r\n  Z_mazo_descarte_rot = {Z_mazo_descarte_rot0[1],Z_mazo_descarte_rot0[2],180.00}\r\n\r\n  -- Turnos\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  -- Detectar orden de reparto\r\n  if     turno_inicial == turno_orden_1[1] then\r\n    orden_reparto = turno_orden_3\r\n  elseif turno_inicial == turno_orden_2[1] then\r\n    orden_reparto = turno_orden_4\r\n  elseif turno_inicial == turno_orden_3[1] then\r\n    orden_reparto = turno_orden_1\r\n  elseif turno_inicial == turno_orden_4[1] then\r\n    orden_reparto = turno_orden_2\r\n  end\r\n\r\n  -- Manos de jugadores\r\n  mano_11 = Player[orden_reparto[1]].getHandObjects()\r\n  mano_22 = Player[orden_reparto[2]].getHandObjects()\r\n  mano_12 = Player[orden_reparto[3]].getHandObjects()\r\n  mano_22 = Player[orden_reparto[4]].getHandObjects()\r\n\r\n  N_mano_11 = #mano_11\r\n  N_mano_21 = #mano_22\r\n  N_mano_12 = #mano_12\r\n  N_mano_22 = #mano_22\r\n\r\n  N_Restantes_mano_11 = 13 - N_mano_11\r\n  N_Restantes_mano_21 = 13 - N_mano_21\r\n  N_Restantes_mano_12 = 13 - N_mano_12\r\n  N_Restantes_mano_22 = 13 - N_mano_22\r\n  N_Restantes = (13*4 + 7) - N_mano_11 - N_mano_21 - N_mano_12 - N_mano_22\r\n\r\n  print('N_Restantes = ',N_Restantes)\r\n\r\n  N_Restantes_T = {N_Restantes_mano_11,N_Restantes_mano_21,\r\n                   N_Restantes_mano_12,N_Restantes_mano_22}\r\n\r\n  N_cartas_reparto  = #mazo_reparto.getObjects()\r\n  N_cartas_corte    = #mazo_corte.getObjects()\r\n  print('N_cartas_reparto = ', N_cartas_reparto)\r\n  print('N_cartas_corte = '  , N_cartas_corte)\r\n\r\n  -- Corte perfecto\r\n  corte_perfecto = 0\r\n  if N_cartas_reparto == N_Restantes then\r\n    printToAll('¡CORTE PERFECTO!', {1,0,0})\r\n    broadcastToAll('¡CORTE PERFECTO!', {1,0,0})\r\n    corte_perfecto = 50\r\n  end\r\n\r\n  -- Ponemos mazo de corte provisionalmente aparte\r\n  mazo_corte.setPosition({1.47, 4.59, -2.09})\r\n  mazo_corte.setRotation({0.00, 180.00, 180.00})\r\n\r\n  -- Juntamos mazo de reparto encima del mazo de corte\r\n  mazo_reparto.putObject(mazo_corte)\r\n\r\n  -- Empezamos reparto a jugadores\r\n\r\n  restante   = 52 - N_mano_11 - N_mano_21 - N_mano_12 - N_mano_22\r\n\r\n  contadores = {N_mano_11,N_mano_21,N_mano_12,N_mano_22}\r\n  orden_i = 1\r\n\r\n  while restante > 0 do\r\n\r\n    -- Color jugador\r\n    color_j = orden_reparto[orden_i]\r\n\r\n    -- Chequeamos si jugador tiene las 13 cartas ya\r\n    contador_cartas = contadores[orden_i]\r\n\r\n    if contador_cartas < 13 then\r\n      deal_card(mazo_reparto,color_j)\r\n      restante = restante - 1\r\n      contadores[orden_i] = contadores[orden_i] + 1\r\n    end\r\n\r\n    if orden_i == 4 then\r\n      orden_i = 1\r\n    else\r\n      orden_i = orden_i + 1\r\n    end\r\n\r\n  end\r\n\r\n\r\n  -- Ponemos primera carta del montón oculto\r\n  paramN = {position = Z_monton_oculto_pos,\r\n            rotation = Z_monton_oculto_rot,\r\n            }\r\n\r\n  for k = 1,6 do\r\n    mazo_reparto.takeObject(paramN)\r\n  end\r\n\r\n  -- Ponemos última carta bocarriba en descarte\r\n  paramNF = {position = Z_mazo_descarte_pos,\r\n             rotation = Z_mazo_descarte_rot0,\r\n            }\r\n\r\n  mazo_reparto.takeObject(paramNF)\r\n\r\nend\r\n\r\nfunction deal_card(mazo,color)\r\n  mazo.deal(1,color)\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/repartir_cartas\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='SORTEAR\\nPARTIDA',\r\n    click_function='sortear_turnos',\r\n    function_owner=self,\r\n    position={0,0.5,0},\r\n    height=400,\r\n    width=450,\r\n    font_size=90,\r\n    color={1,1,1},\r\n    tooltip = 'Echar a suerte equipos y quién empieza',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\nfunction pulsar_boton()\r\n  pasar_turno()\r\nend\r\n\r\n\r\nfunction sortear_turnos()\r\n\r\n  -- Comprobamos si están los 4 jugadores\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  j1_seated = Player[turno_orden_1[1]].seated\r\n  j2_seated = Player[turno_orden_1[2]].seated\r\n  j3_seated = Player[turno_orden_1[3]].seated\r\n  j4_seated = Player[turno_orden_1[4]].seated\r\n\r\n  condI = j1_seated and j2_seated and j2_seated and j2_seated\r\n  condI = true\r\n\r\n  if condI then\r\n\r\n    -- Echamos a suerte los turnos\r\n    sorteo_resultado = math.random(1,4)\r\n    sorteo_resultado = math.random(1,4)\r\n    sorteo_resultado = math.random(1,4)\r\n\r\n\r\n    -- Seleccionamos jugador resultado\r\n    turno_orden_sel  = 'turno_orden_' .. sorteo_resultado\r\n    turno_orden      = _G[turno_orden_sel]\r\n    jugador_inicial  = Player[turno_orden[1]].steam_name\r\n\r\n    txt_a_todos = jugador_inicial .. ' empieza cortando'\r\n    broadcastToAll(txt_a_todos, {1,0,0})\r\n\r\n    -- Guardamos inicio de turno en texto marcador\r\n    texto_primer_turno = getObjectFromGUID(texto_primer_turno_GUID)\r\n    texto_primer_turno.setValue(turno_orden[1])\r\n\r\n    -- Hacemos desaparecer botón\r\n    self.setPosition({0,0,10})\r\n    self.setScale({0.01,0.01,0.01})\r\n\r\n    -- Esperamos, ponemos mazo de reparto en su zona, y activamos turnos\r\n    Wait.time(function() empezar_ronda(turno_orden[1]) end, 1.5)\r\n\r\n  else\r\n\r\n    txt_a_todos = '¡Faltan jugadores!'\r\n    --printToAll(txt_a_todos, {1,0,0})\r\n    broadcastToAll(txt_a_todos, {1,0,0})\r\n\r\n  end\r\n\r\n\r\nend\r\n\r\n\r\nfunction empezar_ronda(jugador_inicial)\r\n\r\n  -- Colocamos mazo de robo en su zona\r\n  zona_reparto_obj = getObjectFromGUID(Z_mazo_robo_GUID)\r\n  mazo_reparto_obj = getObjectFromGUID(mazo_reparto_GUID)\r\n  pos0 = zona_reparto_obj.getPosition()\r\n  mazo_reparto_obj.setPosition(pos0)\r\n\r\n  -- Barajamos mazo\r\n  mazo_reparto_obj.shuffle()\r\n  mazo_reparto_obj.shuffle()\r\n  mazo_reparto_obj.shuffle()\r\n  mazo_reparto_obj.shuffle()\r\n\r\n  -- Hacemos aparecer botón de corte aleatorio\r\n  boton_corte_aleatorio = getObjectFromGUID(boton_corte_aleatorio_GUID)\r\n  boton_corte_aleatorio.setPosition(boton_corte_aleatorio_pos0)\r\n  boton_corte_aleatorio.setScale(boton_bloque_scale0)\r\n\r\n  activar_sistema_turnos(jugador_inicial)\r\n\r\n  -- CONTADOR RONDA\r\n  contador_ronda = getObjectFromGUID(contador_ronda_GUID)\r\n  ronda = contador_ronda.getValue()\r\n  contador_ronda.setValue(ronda+1)\r\n\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "d36203"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 0.0,
        "posY": 0.0,
        "posZ": 10.0,
        "rotX": 5.29126169E-07,
        "rotY": 180.009979,
        "rotZ": -4.104937E-07,
        "scaleX": 0.01,
        "scaleY": 0.01,
        "scaleZ": 0.01
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.06787918,
        "g": 0.365126282,
        "b": 0.03742451
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "---------------------------------\r\n-- BOTÓN RECOGER MESA\r\n---------------------------------\r\n-- INCLUDES\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n-- JUGADORES\r\nJugador_1_E1 = Player[\"Blue\"]\r\nJugador_2_E1 = Player[\"Yellow\"]\r\nJugador_1_E2 = Player[\"Green\"]\r\nJugador_2_E2 = Player[\"Red\"]\r\n\r\nJugador_1_E1_color = \"Blue\"\r\nJugador_2_E1_color = \"Yellow\"\r\nJugador_1_E2_color = \"Green\"\r\nJugador_2_E2_color = \"Red\"\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_jugadores\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n-- -------------------------------GUID_ZONAS----------------------------\r\n\r\n-- MAZO DE ROBO\r\nZ_mazo_robo_GUID = 'd5fc5d'\r\n-- MONTÓN OCULTO\r\nZ_monton_oculto_GUID = 'a5e227'\r\n-- MAZO DE DESCARTE\r\nZ_mazo_descarte_GUID = '5d0d4e'\r\n-- ZONA MARCADOR OCULTAS\r\nZ_marcador_ocultas_GUID = 'e0d23b'\r\n-- ZONA MARCADOR OCULTAS APOYADAS\r\nZ_marcador_ocultas_apoyo_GUID = '3670f3'\r\n-- ZONA AUXILIAR 01\r\nZ_auxiliar_01_GUID = 'b70628'\r\n\r\n-- ----------------------- Equipo 1----------------------\r\n-- ----------------Canastas-------------------\r\nzonaCanastaE1_C01_GUID = 'db7d7a'\r\nzonaCanastaE1_C02_GUID = '1e1fee'\r\nzonaCanastaE1_C03_GUID = '1a0d9d'\r\nzonaCanastaE1_C04_GUID = '45f2be'\r\nzonaCanastaE1_C05_GUID = '65d35b'\r\nzonaCanastaE1_C06_GUID = '29035b'\r\nzonaCanastaE1_C07_GUID = '1ad7ac'\r\nzonaCanastaE1_C08_GUID = '875f5e'\r\nzonaCanastaE1_C09_GUID = 'bdafdd'\r\n-- -------------------------------------------\r\n-- ----------------Cerradas/Flores------------\r\nzonaCerradaE1_C01_GUID = '2ef863'\r\nzonaCerradaE1_C02_GUID = '880f29'\r\nzonaCerradaE1_C03_GUID = 'f2b64b'\r\nzonaCerradaE1_C04_GUID = '1359fa'\r\nzonaCerradaE1_C05_GUID = '8463b8'\r\nzonaCerradaE1_C06_GUID = '04dcae'\r\nzonaCerradaE1_C07_GUID = '1ef3ec'\r\nzonaCerradaE1_C08_GUID = 'da892d'\r\n-------------------------Flores------------\r\nzonaCerradaE1_F01_GUID = 'ed889e'\r\nzonaCerradaE1_F02_GUID = '9f2a5d'\r\nzonaCerradaE1_F03_GUID = '0b88c3'\r\nzonaCerradaE1_F04_GUID = '5883a5'\r\n-------------------------------------------\r\n------------------------------------------------------\r\n----------------------- Equipo 2----------------------\r\n----------------Canastas-------------------\r\nzonaCanastaE2_C01_GUID = '2e09c7'\r\nzonaCanastaE2_C02_GUID = '970291'\r\nzonaCanastaE2_C03_GUID = '649098'\r\nzonaCanastaE2_C04_GUID = 'b8caf3'\r\nzonaCanastaE2_C05_GUID = 'e26404'\r\nzonaCanastaE2_C06_GUID = 'ed78e4'\r\nzonaCanastaE2_C07_GUID = 'a6714b'\r\nzonaCanastaE2_C08_GUID = 'df0ee8'\r\nzonaCanastaE2_C09_GUID = 'ccf4ad'\r\n-------------------------------------------\r\n----------------Cerradas/Flores------------\r\nzonaCerradaE2_C01_GUID = '8ebbc8'\r\nzonaCerradaE2_C02_GUID = '7283e5'\r\nzonaCerradaE2_C03_GUID = '8279ef'\r\nzonaCerradaE2_C04_GUID = '3493a2'\r\nzonaCerradaE2_C05_GUID = 'e67d0f'\r\nzonaCerradaE2_C06_GUID = '07c6a3'\r\nzonaCerradaE2_C07_GUID = 'd2e8d9'\r\nzonaCerradaE2_C08_GUID = 'abfa5d'\r\n-------------------------Flores------------\r\nzonaCerradaE2_F01_GUID = '4e6a03'\r\nzonaCerradaE2_F02_GUID = 'e54478'\r\nzonaCerradaE2_F03_GUID = 'f2eba4'\r\nzonaCerradaE2_F04_GUID = '4889e2'\r\n-------------------------------------------\r\n----------- MESA ---------------\r\nzonaCanastaE1_GUID = '4621af'\r\nzonaCanastaE2_GUID = '90dfb9'\r\n-------------------------------------------\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/zonas_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n-- CONTADOR PUNTOS CANASTAS --\r\ncontador_puntos_canastas_E1_GUID = '821d9e'\r\ncontador_puntos_canastas_E2_GUID = '5043d9'\r\n\r\n-- CONTADOR PUNTOS TOTALES --\r\ncontador_puntos_total_E1_GUID = 'f204af'\r\ncontador_puntos_total_E2_GUID = '784c65'\r\n\r\n-- CONTADOR RONDA\r\ncontador_ronda_GUID = 'a17f07'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/contadores_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n-- BASE CANASTA EQUIPO 1 --\r\nbloque_canasta_E1_C01_GUID = '6f139a'\r\nbloque_canasta_E1_C02_GUID = '32bf01'\r\nbloque_canasta_E1_C03_GUID = 'ceaefc'\r\nbloque_canasta_E1_C04_GUID = '80526b'\r\nbloque_canasta_E1_C05_GUID = 'faf549'\r\nbloque_canasta_E1_C06_GUID = '39a73f'\r\nbloque_canasta_E1_C07_GUID = 'db0e7a'\r\nbloque_canasta_E1_C08_GUID = 'd6933a'\r\n\r\n-- BASE CANASTA EQUIPO 2 --\r\nbloque_canasta_E2_C01_GUID = '485745'\r\nbloque_canasta_E2_C02_GUID = 'f5df8d'\r\nbloque_canasta_E2_C03_GUID = 'a970d2'\r\nbloque_canasta_E2_C04_GUID = '812e44'\r\nbloque_canasta_E2_C05_GUID = '399d90'\r\nbloque_canasta_E2_C06_GUID = '6d7a78'\r\nbloque_canasta_E2_C07_GUID = 'f0f466'\r\nbloque_canasta_E2_C08_GUID = 'dc6c83'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 1 -\r\nbloque_canasta_tipo_E1_C01_GUID = '06faf3'\r\nbloque_canasta_tipo_E1_C02_GUID = '2c848f'\r\nbloque_canasta_tipo_E1_C03_GUID = 'b35dc9'\r\nbloque_canasta_tipo_E1_C04_GUID = 'f83701'\r\nbloque_canasta_tipo_E1_C05_GUID = 'eb0137'\r\nbloque_canasta_tipo_E1_C06_GUID = 'd6844a'\r\nbloque_canasta_tipo_E1_C07_GUID = '095259'\r\nbloque_canasta_tipo_E1_C08_GUID = '39ce4c'\r\n\r\n-- BASE CANASTA TIPO - EQUIPO 2 -\r\nbloque_canasta_tipo_E2_C01_GUID = '809966'\r\nbloque_canasta_tipo_E2_C02_GUID = 'a36fe2'\r\nbloque_canasta_tipo_E2_C03_GUID = '6a1079'\r\nbloque_canasta_tipo_E2_C04_GUID = 'ce3a1f'\r\nbloque_canasta_tipo_E2_C05_GUID = '073759'\r\nbloque_canasta_tipo_E2_C06_GUID = 'd426db'\r\nbloque_canasta_tipo_E2_C07_GUID = 'c9fede'\r\nbloque_canasta_tipo_E2_C08_GUID = '095776'\r\n\r\n-- MAZO DE ROBO\r\nmazo_reparto_GUID = 'bc1419'\r\n\r\n-- BOTÓN SORTEAR TURNOS\r\nboton_sortear_turnos_GUID = 'd36203'\r\n\r\n-- BOTÓN CORTE ALEATORIO\r\nboton_corte_aleatorio_GUID = 'ad58de'\r\n\r\n-- BOTÓN REPARTIR CARTAS\r\nboton_repartir_cartas_GUID = '22f205'\r\n\r\n-- BOTÓN EMPEZAR RONDA\r\nboton_empezar_ronda_GUID = 'ce0a1f'\r\n\r\n-- BOTÓN FINALIZAR RONDA\r\nboton_finalizar_ronda_GUID = '5d2de2'\r\n\r\n-- BOTÓN RECOGER\r\nboton_recoger_GUID = '07ba83'\r\n\r\n-- BOTÓN PRUEBA\r\nboton_prueba_GUID = 'ad4516'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_GUID\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n-- TEXTOS TIPO CANASTA\r\n\r\ncanasta_tipo_E1_C01_GUID = '71df96'\r\ncanasta_tipo_E1_C02_GUID = '58aceb'\r\ncanasta_tipo_E1_C03_GUID = '1eef00'\r\ncanasta_tipo_E1_C04_GUID = 'e065d1'\r\ncanasta_tipo_E1_C05_GUID = '6680e6'\r\ncanasta_tipo_E1_C06_GUID = '7e93c3'\r\ncanasta_tipo_E1_C07_GUID = '34b0be'\r\ncanasta_tipo_E1_C08_GUID = '163729'\r\ncanasta_tipo_E1_C09_GUID = '8887de'\r\n\r\ncanasta_tipo_E2_C01_GUID = 'df24cf'\r\ncanasta_tipo_E2_C02_GUID = '28943a'\r\ncanasta_tipo_E2_C03_GUID = '4d288f'\r\ncanasta_tipo_E2_C04_GUID = '2ca120'\r\ncanasta_tipo_E2_C05_GUID = 'be289b'\r\ncanasta_tipo_E2_C06_GUID = '87fd03'\r\ncanasta_tipo_E2_C07_GUID = 'a42ff5'\r\ncanasta_tipo_E2_C08_GUID = '938c06'\r\ncanasta_tipo_E2_C09_GUID = '92a2d0'\r\n\r\n-- INDICADOR DE PRIMER TURNO (CORTE DE MAZO)\r\ntexto_primer_turno_GUID = '8927f3'\r\ntexto_turno_actual_GUID = '5f3d5c'\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/textos_GUID\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_pos_sca\n\r\nboton_sortear_turnos_pos0  = {0.00, 4.88, 2.07}\r\nboton_corte_aleatorio_pos0 = {0.00, 4.88, 2.07}\r\nboton_repartir_cartas_pos0 = {0.00, 4.88, 2.07}\r\n\r\nboton_bloque_scale0 = {2.40, 1.00, 1.55}\r\nboton_bloque_rotac0 = {0.00, 180.00, 0.00}\r\n\r\nboton_recoger_pos0         = {-1.79, 1.46, -9.00}\r\nboton_finalizar_ronda_pos0 = {1.77, 1.46, -8.99}\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Zonas_Objetos/objetos_pos_sca\n\r\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/repartir_cartas\nfunction reparto_de_cartas(turno_inicial,mazo_corte,mazo_reparto)\r\n\r\n  -- MAZO DE ROBO\r\n  Z_mazo_robo     = getObjectFromGUID(Z_mazo_robo_GUID)\r\n\r\n  -- MONTÓN OCULTO\r\n  Z_monton_oculto = getObjectFromGUID(Z_monton_oculto_GUID)\r\n  Z_monton_oculto_pos = Z_monton_oculto.getPosition()\r\n  Z_monton_oculto_rot = Z_monton_oculto.getRotation()\r\n  Z_monton_oculto_rot = {Z_monton_oculto_rot[1],Z_monton_oculto_rot[2],180.00}\r\n\r\n  -- MAZO DE DESCARTE\r\n  Z_mazo_descarte = getObjectFromGUID(Z_mazo_descarte_GUID)\r\n  Z_mazo_descarte_pos = Z_mazo_descarte.getPosition()\r\n  Z_mazo_descarte_rot0 = Z_mazo_descarte.getRotation()\r\n  Z_mazo_descarte_rot = {Z_mazo_descarte_rot0[1],Z_mazo_descarte_rot0[2],180.00}\r\n\r\n  -- Turnos\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  -- Detectar orden de reparto\r\n  if     turno_inicial == turno_orden_1[1] then\r\n    orden_reparto = turno_orden_3\r\n  elseif turno_inicial == turno_orden_2[1] then\r\n    orden_reparto = turno_orden_4\r\n  elseif turno_inicial == turno_orden_3[1] then\r\n    orden_reparto = turno_orden_1\r\n  elseif turno_inicial == turno_orden_4[1] then\r\n    orden_reparto = turno_orden_2\r\n  end\r\n\r\n  -- Manos de jugadores\r\n  mano_11 = Player[orden_reparto[1]].getHandObjects()\r\n  mano_22 = Player[orden_reparto[2]].getHandObjects()\r\n  mano_12 = Player[orden_reparto[3]].getHandObjects()\r\n  mano_22 = Player[orden_reparto[4]].getHandObjects()\r\n\r\n  N_mano_11 = #mano_11\r\n  N_mano_21 = #mano_22\r\n  N_mano_12 = #mano_12\r\n  N_mano_22 = #mano_22\r\n\r\n  N_Restantes_mano_11 = 13 - N_mano_11\r\n  N_Restantes_mano_21 = 13 - N_mano_21\r\n  N_Restantes_mano_12 = 13 - N_mano_12\r\n  N_Restantes_mano_22 = 13 - N_mano_22\r\n  N_Restantes = (13*4 + 7) - N_mano_11 - N_mano_21 - N_mano_12 - N_mano_22\r\n\r\n  print('N_Restantes = ',N_Restantes)\r\n\r\n  N_Restantes_T = {N_Restantes_mano_11,N_Restantes_mano_21,\r\n                   N_Restantes_mano_12,N_Restantes_mano_22}\r\n\r\n  N_cartas_reparto  = #mazo_reparto.getObjects()\r\n  N_cartas_corte    = #mazo_corte.getObjects()\r\n  print('N_cartas_reparto = ', N_cartas_reparto)\r\n  print('N_cartas_corte = '  , N_cartas_corte)\r\n\r\n  -- Corte perfecto\r\n  corte_perfecto = 0\r\n  if N_cartas_reparto == N_Restantes then\r\n    printToAll('¡CORTE PERFECTO!', {1,0,0})\r\n    broadcastToAll('¡CORTE PERFECTO!', {1,0,0})\r\n    corte_perfecto = 50\r\n  end\r\n\r\n  -- Ponemos mazo de corte provisionalmente aparte\r\n  mazo_corte.setPosition({1.47, 4.59, -2.09})\r\n  mazo_corte.setRotation({0.00, 180.00, 180.00})\r\n\r\n  -- Juntamos mazo de reparto encima del mazo de corte\r\n  mazo_reparto.putObject(mazo_corte)\r\n\r\n  -- Empezamos reparto a jugadores\r\n\r\n  restante   = 52 - N_mano_11 - N_mano_21 - N_mano_12 - N_mano_22\r\n\r\n  contadores = {N_mano_11,N_mano_21,N_mano_12,N_mano_22}\r\n  orden_i = 1\r\n\r\n  while restante > 0 do\r\n\r\n    -- Color jugador\r\n    color_j = orden_reparto[orden_i]\r\n\r\n    -- Chequeamos si jugador tiene las 13 cartas ya\r\n    contador_cartas = contadores[orden_i]\r\n\r\n    if contador_cartas < 13 then\r\n      deal_card(mazo_reparto,color_j)\r\n      restante = restante - 1\r\n      contadores[orden_i] = contadores[orden_i] + 1\r\n    end\r\n\r\n    if orden_i == 4 then\r\n      orden_i = 1\r\n    else\r\n      orden_i = orden_i + 1\r\n    end\r\n\r\n  end\r\n\r\n\r\n  -- Ponemos primera carta del montón oculto\r\n  paramN = {position = Z_monton_oculto_pos,\r\n            rotation = Z_monton_oculto_rot,\r\n            }\r\n\r\n  for k = 1,6 do\r\n    mazo_reparto.takeObject(paramN)\r\n  end\r\n\r\n  -- Ponemos última carta bocarriba en descarte\r\n  paramNF = {position = Z_mazo_descarte_pos,\r\n             rotation = Z_mazo_descarte_rot0,\r\n            }\r\n\r\n  mazo_reparto.takeObject(paramNF)\r\n\r\nend\r\n\r\nfunction deal_card(mazo,color)\r\n  mazo.deal(1,color)\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/repartir_cartas\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\nfunction activar_sistema_turnos(color_primer_jugador)\r\n\r\n  -- Detectamos orden\r\n  turno_orden_1 = {'Red','Blue','Green','Yellow'}\r\n  turno_orden_2 = {'Blue','Green','Yellow','Red'}\r\n  turno_orden_3 = {'Green','Yellow','Red','Blue'}\r\n  turno_orden_4 = {'Yellow','Red','Blue','Green'}\r\n\r\n  if     color_primer_jugador == turno_orden_1[1] then\r\n    orden_turnos = turno_orden_1\r\n  elseif color_primer_jugador == turno_orden_1[2] then\r\n    orden_turnos = turno_orden_2\r\n  elseif color_primer_jugador == turno_orden_1[3] then\r\n    orden_turnos = turno_orden_3\r\n  elseif color_primer_jugador == turno_orden_1[4] then\r\n    orden_turnos = turno_orden_4\r\n  end\r\n\r\n  -- Activamos sistema de turnos\r\n  Turns.type = 2\r\n  Turns.disable_interactations = false\r\n  Turns.order  = orden_turnos\r\n  Turns.enable = true\r\n\r\nend\r\n\r\n\r\nfunction detectar_jugador_que_pulsa(obj, color)\r\n\r\n  turno_actual      = Turns.turn_color\r\n  print(turno_actual)\r\n  if turno_actual == '' then\r\n\r\n    txt_error = 'Turnos desactivados'\r\n    jugador_que_pulsa = color\r\n    printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n    condicion = false\r\n\r\n  else\r\n\r\n    nombre_ta         = Player[turno_actual].steam_name\r\n    jugador_que_pulsa = color\r\n    nombre_tb         = Player[jugador_que_pulsa].steam_name\r\n\r\n    if turno_actual == jugador_que_pulsa then\r\n      condicion = true\r\n    else\r\n      txt_error = '¡' .. nombre_tb .. ', no es tu turno!'\r\n      printToColor(txt_error, jugador_que_pulsa, {1,0,0})\r\n      condicion = false\r\n    end\r\n\r\n  end\r\n\r\n  return condicion\r\n\r\nend\r\n\r\n\r\nfunction detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n\r\n  -- Variable de salida\r\n  tipo_canasta = {}\r\n  Nmonos = {}\r\n\r\n  -- Detectar cartas que forman la canasta\r\n  Nmonos = 0\r\n  C_oculta = ''\r\n\r\n  for k = 1,Ncartas do\r\n\r\n    carta        = cartas_en_zona[k]\r\n    carta_name   = carta.getName()\r\n\r\n    carta2letra = carta_name.sub(carta_name,2,3)\r\n\r\n    if carta2letra == 'ok' then\r\n      carta_palo = 'Joker'\r\n      carta_numero = 'Joker'\r\n    elseif carta_name == 'Oculta' then\r\n      carta_palo = 'Oculta'\r\n      carta_numero = 'Oculta'\r\n      C_oculta = 'oculta'\r\n    elseif carta_name == 'Oculta Apoyada' then\r\n      carta_palo = 'Oculta Apoyada'\r\n      carta_numero = 'Oculta Apoyada'\r\n      C_oculta = 'oculta_apoyada'\r\n    else\r\n      carta_palo   = carta_name.sub(carta_name,-1)\r\n      carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n    end\r\n\r\n    if carta_numero == '2' or carta_palo == 'Joker' then\r\n      Nmonos = Nmonos + 1\r\n    end\r\n\r\n\r\n  end\r\n\r\n  -- Detectamos tipo de canasta\r\n  if Nmonos >= 1 and Nmonos < 7 then\r\n    tipo_canasta[1] = 'sucia'\r\n  elseif Nmonos == 0 then\r\n    tipo_canasta[1] = 'limpia'\r\n  elseif Nmonos == 7 then\r\n    tipo_canasta[1] = 'monos'\r\n  end\r\n\r\n  -- Guardamos variables\r\n  tipo_canasta[2] = Nmonos\r\n  tipo_canasta[3] = C_oculta\r\n\r\n  return tipo_canasta\r\n\r\nend\r\n\r\nfunction detectar_flores_colocadas(Equipo)\r\n\r\n  local Nflores = 0\r\n\r\n  -- Zonas de flores - Contabilizamos\r\n  zona_F_name = {}\r\n  zona_F_obj  = {}\r\n\r\n  for k = 1,4 do\r\n\r\n    zona_F_name[k] = 'zonaCerradaE' .. Equipo .. '_F0' .. k .. '_GUID'\r\n    zona_F_obj[k]  = getObjectFromGUID(_G[zona_F_name[k]])\r\n\r\n    cartas_F  = zona_F_obj[k].getObjects()\r\n    Ncarta_F = #cartas_F\r\n\r\n    if Ncarta_F == 1 then\r\n      cartaF_name = cartas_F[1].getName()\r\n      if cartaF_name == '3r' or cartaF_name == '3c' then\r\n        Nflores = Nflores + 1\r\n      end\r\n    end\r\n\r\n  end\r\n\r\n  return Nflores\r\n\r\nend\r\n\r\nfunction actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n  CN = {}\r\n  CN[1] = 'contador_puntos_canastas_E'\r\n  CN[2] = '_GUID'\r\n\r\n  contador_objetivo_GUID = CN[1] .. Equipo .. CN[2]\r\n  contador_objetivo = getObjectFromGUID(_G[contador_objetivo_GUID])\r\n\r\n  -- Puntuación actual\r\n  puntuacion_actual = contador_objetivo.getValue()\r\n\r\n  -- Flores\r\n  Nflores = detectar_flores_colocadas(Equipo)\r\n\r\n  if Nflores > 0 and puntuacion_actual <= 0 then\r\n  -- Corregimos puntuación de flores si se da el caso\r\n    if Nflores < 4 then\r\n      puntuacion_actual = puntuacion_actual + 2*Nflores*100\r\n    elseif Nflores == 4 then\r\n      puntuacion_actual = puntuacion_actual + 1600\r\n    end\r\n  end\r\n\r\n  -- Según el tipo de canasta...\r\n  if C_oculta == 'oculta' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 800\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 1000\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2500\r\n    end\r\n  elseif C_oculta == 'oculta_apoyada' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    end\r\n  elseif C_oculta == '' then\r\n    if canasta_tipo == 'sucia' then\r\n      puntuacion = 300\r\n    elseif canasta_tipo == 'limpia' then\r\n      puntuacion = 500\r\n    elseif canasta_tipo == 'monos' then\r\n      puntuacion = 2000\r\n    end\r\n  end\r\n\r\n  -- Actualizamos\r\n  puntuacion_nueva = puntuacion_actual + puntuacion\r\n  contador_objetivo.setValue(puntuacion_nueva)\r\n\r\nend\r\n\r\n\r\nfunction bloque_nombre(C,Equipo,Canasta)\r\n  nombre = C[1] .. Equipo .. C[2] .. Canasta .. C[3]\r\n  return nombre\r\nend\r\n\r\n\r\n\r\n\r\n_G['agrupar_canasta'] = function(zonaCanasta,Equipo)\r\n\r\n    -- Buscamos zona objetivo para colocar canastas\r\n    C = {}\r\n    C[1] = 'zonaCerradaE'\r\n    C[2] = '_C0'\r\n    C[3] = '_GUID'\r\n\r\n    B1 = {}\r\n    B1[1] = 'bloque_canasta_E'\r\n    B1[2] = '_C0'\r\n    B1[3] = '_GUID'\r\n\r\n    B2 = {}\r\n    B2[1] = 'bloque_canasta_tipo_E'\r\n    B2[2] = '_C0'\r\n    B2[3] = '_GUID'\r\n\r\n    zona_vacia = 0\r\n    cont = 1\r\n\r\n    --Buscamos zona vacia\r\n    while zona_vacia == 0 do\r\n      Canasta_Cerrada_Name = bloque_nombre(C,Equipo,cont)\r\n      zona_objetivo        = getObjectFromGUID(_G[Canasta_Cerrada_Name])\r\n      zona_objetivo_cont   = zona_objetivo.getObjects()\r\n      if zona_objetivo_cont[3] == nil then\r\n        zona_vacia = cont\r\n      else\r\n        cont = cont + 1\r\n      end\r\n    end\r\n\r\n    --Zona Objetivo\r\n    zona_objetivo_GUID = bloque_nombre(C,Equipo,zona_vacia)\r\n    zona_objetivo = getObjectFromGUID(_G[zona_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_GUID = bloque_nombre(B1,Equipo,zona_vacia)\r\n    bloque_objetivo = getObjectFromGUID(_G[bloque_objetivo_GUID])\r\n\r\n    --Base en Zona Objetivo\r\n    bloque_objetivo_tipo_GUID = bloque_nombre(B2,Equipo,zona_vacia)\r\n    bloque_objetivo_tipo = getObjectFromGUID(_G[bloque_objetivo_tipo_GUID])\r\n\r\n    --Zona canasta\r\n    zona_canasta_GUID = zonaCanasta\r\n    zona_canasta = getObjectFromGUID(zona_canasta_GUID)\r\n\r\n    --Posición de zona objetivo\r\n    pos_obj  = zona_objetivo.getPosition()\r\n    pos_obj  = {pos_obj[1],pos_obj[2],pos_obj[3]}\r\n    pos_objP = {pos_obj[1],pos_obj[2]+1,pos_obj[3]}\r\n\r\n    --Adquirimos cartas de la zona\r\n    cartas_en_zona = zona_canasta.getObjects()\r\n    Ncartas = #cartas_en_zona\r\n\r\n    --Tipo de canasta\r\n    tipo_canasta = detectar_tipo_canasta(cartas_en_zona,Ncartas)\r\n    canasta_tipo = tipo_canasta[1]\r\n    Nmonos = tipo_canasta[2]\r\n    C_oculta = tipo_canasta[3]\r\n\r\n    -- Según la canasta detectada\r\n    if Ncartas >= 7 then\r\n\r\n      -- Desbloqueamos cartas_en_zona\r\n      for k = 1,Ncartas do\r\n          cartas_en_zona[k].setLock(false)\r\n      end\r\n\r\n      --Detectamos carta que irá en primera posición\r\n      carta_a_mover = 0\r\n      carta_abajo = 0\r\n\r\n      for k = 1,Ncartas do\r\n\r\n        carta        = cartas_en_zona[k]\r\n        carta_name   = carta.getName()\r\n        carta_palo   = carta_name.sub(carta_name,-1)\r\n        carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          if ((carta_palo == 't') or (carta_palo == 'p')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'limpia' then\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n\r\n        elseif canasta_tipo == 'monos' then\r\n          if carta_numero == '2' then\r\n              carta_a_mover = k\r\n          end\r\n        end\r\n\r\n        if C_oculta ~= '' then\r\n          if carta_name == 'oculta' or carta_name == 'oculta_apoyada' then\r\n            carta_abajo = k\r\n          end\r\n        end\r\n\r\n      end\r\n\r\n      -- No se ha encontrado carta negra para canasta sucia, cogemos una roja\r\n      if canasta_tipo == 'sucia' and carta_a_mover == 0 then\r\n        for k = 1,Ncartas do\r\n          carta        = cartas_en_zona[k]\r\n          carta_name   = carta.getName()\r\n          carta_palo   = carta_name.sub(carta_name,-1)\r\n          carta_numero = carta_name.sub(carta_name,1,#carta_name-1)\r\n          if ((carta_palo == 'c') or (carta_palo == 'r')) then\r\n            if carta_numero ~= '2' and carta_name ~= 'Joker' then\r\n              carta_a_mover = k\r\n            end\r\n          end\r\n        end\r\n      end\r\n\r\n      -- Si encontramos carta adecuada, colocamos en objetivo\r\n      if carta_a_mover > 0 then\r\n\r\n        for k = 1,Ncartas do\r\n          if k ~= carta_a_mover then\r\n            carta = cartas_en_zona[k]\r\n            carta.setPosition(pos_obj)\r\n          end\r\n        end\r\n\r\n        --Ponemos la última carta encima\r\n        carta = cartas_en_zona[carta_a_mover]\r\n        carta.setPosition(pos_objP)\r\n\r\n        -- Según tipo de canasta, coloreamos base\r\n        if C_oculta == 'oculta_apoyada' then\r\n          bloque_objetivo.setColorTint({0.173,0.341,0.553})\r\n        elseif C_oculta == 'oculta' then\r\n          bloque_objetivo.setColorTint({0.439,0.173,0.553})\r\n        elseif C_oculta == '' then\r\n          bloque_objetivo.setColorTint({0.8,0.8,0.8})\r\n        end\r\n\r\n        if canasta_tipo == 'sucia' then\r\n          bloque_objetivo_tipo.setColorTint({0.270, 0.270, 0.270})\r\n        elseif canasta_tipo == 'limpia' then\r\n          bloque_objetivo_tipo.setColorTint({0.654, 0.047, 0.086})\r\n        elseif canasta_tipo == 'monos' then\r\n          bloque_objetivo_tipo.setColorTint({0.039, 0.533, 0.023})\r\n        end\r\n\r\n      end\r\n\r\n      -- Actualizamos contador de puntos de canastas\r\n      actualizar_puntos_canastas(Equipo,C_oculta,canasta_tipo)\r\n\r\n    elseif Ncartas > 0 then\r\n\r\n      --La canasta está incompleta\r\n      mensaje1 = 'Canasta incompleta, faltan '\r\n      mensaje2 = mensaje1 .. (7-Ncartas)\r\n      mensaje3 = mensaje2 .. ' cartas'\r\n      printToAll(mensaje3, {r=1,g=0,b=0})\r\n\r\n    elseif Ncartas == 0 then\r\n\r\n      --La canasta está sin empezar\r\n      printToAll('Canasta sin empezar', {r=1,g=0,b=0})\r\n\r\n    end\r\n\r\n\r\nend\r\n\n----#include !/../../AppData/Local/Temp/TabletopSimulator/Tabletop Simulator Lua/Funciones/funciones_boton\n\r\nfunction onLoad()\r\n\r\n  param = {\r\n    label='CORTAR',\r\n    click_function='cortar_aleatorio',\r\n    function_owner=self,\r\n    position={0,0.5,0},\r\n    height=400,\r\n    width=450,\r\n    font_size=110,\r\n    color={1,1,1},\r\n    tooltip = 'Cortar mazo',\r\n  }\r\n\r\n  self.createButton(param)\r\n  self.setLock(true)\r\n\r\nend\r\n\r\n\r\nfunction cortar_aleatorio(obj, color)\r\n\r\n  -- Detectamos turno\r\n  texto_primer_turno = getObjectFromGUID(texto_primer_turno_GUID)\r\n  color_primer_turno = texto_primer_turno.TextTool.getValue()\r\n\r\n  cond = detectar_jugador_que_pulsa(obj, color)\r\n\r\n  if cond  then\r\n\r\n    -- Activamos sistema de turnos\r\n    --activar_sistema_turnos(color_primer_jugador)\r\n\r\n    -- Mazo de reparto\r\n    mazo_reparto_obj = getObjectFromGUID(mazo_reparto_GUID)\r\n\r\n    -- Cortamos\r\n    corte_rand  = math.random(49-5,49+5)\r\n    mazo_reparto_obj.cut(corte_rand)\r\n\r\n    -- Esperamos, ponemos mazo de reparto en su zona, y activamos turnos\r\n    Wait.time(function() empezar_reparto() end, 1.0)\r\n\r\n  end\r\n\r\nend\r\n\r\n\r\nfunction empezar_reparto()\r\n\r\n  -- Hacemos desaparecer botón\r\n  self.setPosition({0,0,10})\r\n  self.setScale({0.01,0.01,0.01})\r\n\r\n  -- Hacemos aparecer botón de reparto\r\n  boton_repartir_cartas = getObjectFromGUID(boton_repartir_cartas_GUID)\r\n  boton_repartir_cartas.setPosition(boton_repartir_cartas_pos0)\r\n  boton_repartir_cartas.setScale(boton_bloque_scale0)\r\n\r\nend",
      "LuaScriptState": "",
      "GUID": "ad58de"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 13.8758383,
        "posY": 0.482313633,
        "posZ": -24.59263,
        "rotX": 90.0,
        "rotY": -1.17911925E-09,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "White",
        "colorstate": {
          "r": 1.0,
          "g": 0.0509803928,
          "b": 0.0509803928
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "8927f3"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 17.8481369,
        "posY": -0.105058074,
        "posZ": -24.3508949,
        "rotX": 90.0,
        "rotY": -1.17911925E-09,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "Red",
        "colorstate": {
          "r": 0.856,
          "g": 0.1,
          "b": 0.094
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "5f3d5c"
    }
  ],
  "DecalPallet": [],
  "TabStates": {
    "0": {
      "title": "PUNTOS",
      "body": "\n",
      "color": "Grey",
      "visibleColor": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "id": 0
    }
  },
  "VersionNumber": "v12.3.5"
}